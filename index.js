!function t(n,r,e){function o(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[a]={exports:{}};n[a][0].call(l.exports,function(t){var r=n[a][1][t];return o(r||t)},l,l.exports,t,n,r,e)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)o(e[a]);return o}({1:[function(t,n,r){function e({gameState:t,recentClickX:n,recentClickY:r}){u({gameState:t,recentClickX:n,recentClickY:r}),c({gameState:t,onAdvance:e,probable:f})}function o(t,n,r,e,o){a(o)}var i=t("route-state"),a=t("handle-error-web"),u=t("./flows/update"),c=t("./renderers/render"),f=t("probable"),l=t("lodash.findwhere"),s={grids:t("./defs/grid-defs"),souls:t("./defs/soul-defs")};s.player=l(s.souls,{id:"player"});var h=i({followRoute:function(t){e({gameState:s})},windowObject:window});window.onerror=o,h.routeFromHash()},{"./defs/grid-defs":3,"./defs/soul-defs":4,"./flows/update":7,"./renderers/render":49,"handle-error-web":12,"lodash.findwhere":29,probable:37,"route-state":40}],2:[function(t,n,r){n.exports=function(t,n){for(var r=0;r<t.length;++r){let o=t[r];for(var e=0;e<o.length;++e)n(o[e])}}},{}],3:[function(t,n,r){n.exports=[{id:"basic",xSpace:64,ySpace:64,xOffset:-32,yOffset:-32,width:800,height:800,color:"blue"},{id:"other",xSpace:96,ySpace:32,xOffset:-16,yOffset:0,width:600,height:800,color:"red",effects:[{name:"gravityWarp",centers:[[300,300]],strength:16,decayDist:288},{name:"gravityWarp",centers:[[500,100],[400,700]],strength:64,decayDist:192}]}]},{}],4:[function(t,n,r){n.exports=[{id:"player",grid:{id:"basic",colOnGrid:4,rowOnGrid:5},sprite:{col:2,row:0,width:32,height:32,hitRadius:48}},{id:"doof",grid:{id:"other",colOnGrid:4,rowOnGrid:5},sprite:{col:1,row:0,width:32,height:32,hitRadius:100}}]},{}],5:[function(t,n,r){function e(t){t.minX=t.x-a,t.maxX=t.x+a,t.minY=t.y-a,t.maxY=t.y+a}var o=t("../grid-effects/grid-effects"),i=t("../apply-to-points-in-rows");const a=10;n.exports=function(t,n){function r(t){n.rows=o[t.name](t,n.rows)}var a=!1,u=!1;n.rows||(n.rows=function(t){for(var n=[],r=t.yOffset;r<=t.height;r+=t.ySpace){let o=[];for(var e=t.xOffset;e<=t.width;e+=t.xSpace)o.push({x:e,y:r,col:o.length,row:n.length,gridId:t.id});n.push(o)}return n}(n),a=!0,u=!0),n.effects&&(i(n.rows,t.remove.bind(t)),n.effects.forEach(r),u=!0,a=!0),a&&i(n.rows,e),u&&i(n.rows,t.insert.bind(t))}},{"../apply-to-points-in-rows":2,"../grid-effects/grid-effects":9}],6:[function(t,n,r){var e=t("lodash.findwhere");n.exports=function(t,n,r){var o=e(t,{id:r.grid.id});if(o){var i=o.rows[r.grid.rowOnGrid][r.grid.colOnGrid];r.minX=i.x-r.sprite.width/2,r.maxX=i.x+r.sprite.width/2,r.minY=i.y-r.sprite.height/2,r.maxY=i.y+r.sprite.height/2,n.remove(r),n.insert(r)}else console.log("Could not find grid",r.grid.id,"for",r.id,"!")}},{"lodash.findwhere":29}],7:[function(t,n,r){function e({gameState:t,recentClickX:n,recentClickY:r}){if(!isNaN(n)&&!isNaN(r)){var e=s.search({minX:n-l,maxX:n+l,minY:r-l,maxY:r+l});console.log("thingsHit",e);var u=c(e,{gridId:t.player.grid.id});u&&function(t,n){return 1===f.getVectorMagnitude(f.subtractPairs(t,n))}([u.col,u.row],[t.player.grid.colOnGrid,t.player.grid.rowOnGrid])&&(t.player.grid.colOnGrid=u.col,t.player.grid.rowOnGrid=u.row)}0===h&&t.grids.forEach(o(i)(s)),t.souls.forEach(o(a)(t.grids,s)),h+=1}var o=t("lodash.curry"),i=t("./update-grid"),a=t("./update-soul"),u=t("rbush"),c=t("lodash.findwhere"),f=t("basic-2d-math");const l=20;var s=u(9),h=0;n.exports=e},{"./update-grid":5,"./update-soul":6,"basic-2d-math":10,"lodash.curry":26,"lodash.findwhere":29,rbush:39}],8:[function(t,n,r){function e({points:t,strength:n,decayDist:r},e){for(var o=u({x:e[0],y:e[1]},a(t,"value"),"x","y"),i=0;i<o.length;++i){let a=t[o[i]].value,u=function(t){return[t.x,t.y]}(a),h=c.getVectorMagnitude(c.subtractPairs(u,e));if(h>r)break;var f=n*(r-h)/r,l=c.changeVectorMagnitude(c.subtractPairs(e,u),f),s=c.addPairs(u,l);a.x=s[0],a.y=s[1]}}var o=t("../row-ops"),i=t("lodash.curry"),a=t("lodash.pluck"),u=t("sort-cells-by-dist"),c=t("basic-2d-math");n.exports=function({centers:t,strength:n,decayDist:r},a){var u=o.flattenRowsButKeepOrigins(a);return t.forEach(i(e)({points:u,strength:n,decayDist:r})),o.reconstituteIntoRows(u)}},{"../row-ops":50,"basic-2d-math":10,"lodash.curry":26,"lodash.pluck":36,"sort-cells-by-dist":46}],9:[function(t,n,r){n.exports={gravityWarp:t("./gravity-warp")}},{"./gravity-warp":8}],10:[function(t,n,r){function e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,n){return[t[0]*n,t[1]*n]}n.exports={getVectorMagnitude:e,addPairs:function(t,n){return[t[0]+n[0],t[1]+n[1]]},subtractPairs:function(t,n){return[t[0]-n[0],t[1]-n[1]]},multiplyPairBySingleValue:o,changeVectorMagnitude:function(t,n){return o(t,n/e(t))}}},{}],11:[function(t,n,r){!function(t,e){"object"==typeof r&&void 0!==n?e(r):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t){var n=t+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=t.slice(0,r))&&(t=t.slice(r+1)),C.hasOwnProperty(n)?{space:C[n],local:t}:t}function r(t){var r=n(t);return(r.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===B&&n.documentElement.namespaceURI===B?n.createElement(t):n.createElementNS(r,t)}})(r)}function e(t){return null==t?function(){}:function(){return this.querySelector(t)}}function o(t){return null==t?function(){return[]}:function(){return this.querySelectorAll(t)}}function i(t){return new Array(t.length)}function a(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function u(t,n){if(!t)return d=new Array(this.size()),l=-1,this.each(function(t){d[++l]=t}),d;var r=n?function(t,n,r,e,o,i,u){var c,f,l,s={},h=n.length,p=i.length,d=new Array(h);for(c=0;c<h;++c)(f=n[c])&&(d[c]=l=F+u.call(f,f.__data__,c,n),l in s?o[c]=f:s[l]=f);for(c=0;c<p;++c)(f=s[l=F+u.call(t,i[c],c,i)])?(e[c]=f,f.__data__=i[c],s[l]=null):r[c]=new a(t,i[c]);for(c=0;c<h;++c)(f=n[c])&&s[d[c]]===f&&(o[c]=f)}:function(t,n,r,e,o,i){for(var u,c=0,f=n.length,l=i.length;c<l;++c)(u=n[c])?(u.__data__=i[c],e[c]=u):r[c]=new a(t,i[c]);for(;c<f;++c)(u=n[c])&&(o[c]=u)},e=this._parents,o=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var i=o.length,u=new Array(i),c=new Array(i),f=new Array(i),l=0;l<i;++l){var s=e[l],h=o[l],p=h.length,d=t.call(s,s&&s.__data__,l,e),v=d.length,y=c[l]=new Array(v),g=u[l]=new Array(v);r(s,h,y,g,f[l]=new Array(p),d,n);for(var m,b,_=0,w=0;_<v;++_)if(m=y[_]){for(_>=w&&(w=_+1);!(b=g[w])&&++w<v;);m._next=b||null}}return u=new O(u,e),u._enter=c,u._exit=f,u}function c(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function f(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function l(t,n){return t.style.getPropertyValue(n)||f(t).getComputedStyle(t,null).getPropertyValue(n)}function s(t){return t.trim().split(/^|\s+/)}function h(t){return t.classList||new p(t)}function p(t){this._node=t,this._names=s(t.getAttribute("class")||"")}function d(t,n){for(var r=h(t),e=-1,o=n.length;++e<o;)r.add(n[e])}function v(t,n){for(var r=h(t),e=-1,o=n.length;++e<o;)r.remove(n[e])}function y(t,n){var r=s(t+"");if(arguments.length<2){for(var e=h(this.node()),o=-1,i=r.length;++o<i;)if(!e.contains(r[o]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?d:v)(this,t)}}:n?function(t){return function(){d(this,t)}}:function(t){return function(){v(this,t)}})(r,n))}function g(){this.nextSibling&&this.parentNode.appendChild(this)}function m(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function b(){var t=this.parentNode;t&&t.removeChild(this)}function _(n,r,e){return function(o){var i=t.event;t.event=o;try{n.call(this,this.__data__,r,e)}finally{t.event=i}}}function w(t,n,r){var e=D.hasOwnProperty(t.type)?function(t,n,r){return t=_(t,n,r),function(n){var r=n.relatedTarget;r&&(r===this||8&r.compareDocumentPosition(this))||t.call(this,n)}}:_;return function(o,i,a){var u,c=this.__on,f=e(n,i,a);if(c)for(var l=0,s=c.length;l<s;++l)if((u=c[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=f,u.capture=r),void(u.value=n);this.addEventListener(t.type,f,r),u={type:t.type,name:t.name,value:n,listener:f,capture:r},c?c.push(u):this.__on=[u]}}function x(t,n,r){var e=f(t),o=e.CustomEvent;"function"==typeof o?o=new o(n,r):(o=e.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function j(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return x(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return x(this,t,n)}})(t,n))}function O(t,n){this._groups=t,this._parents=n}function A(){return new O([[document.documentElement]],I)}function S(t){return"string"==typeof t?new O([[document.querySelector(t)]],[document.documentElement]):new O([[t]],I)}function M(){return new E}function E(){this._="@"+(++$).toString(36)}function k(){for(var n,r=t.event;n=r.sourceEvent;)r=n;return r}function P(t,n){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var e=r.createSVGPoint();return e.x=n.clientX,e.y=n.clientY,e=e.matrixTransform(t.getScreenCTM().inverse()),[e.x,e.y]}var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}var B="http://www.w3.org/1999/xhtml",C={svg:"http://www.w3.org/2000/svg",xhtml:B,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Y=document.documentElement;if(!Y.matches){var R=Y.webkitMatchesSelector||Y.msMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector;X=function(t){return function(){return R.call(this,t)}}}}var N=X;a.prototype={constructor:a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var F="$";p.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var D={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(D={mouseenter:"mouseover",mouseleave:"mouseout"})}var I=[null];O.prototype=A.prototype={constructor:O,select:function(t){"function"!=typeof t&&(t=e(t));for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i)for(var a,u,c=n[i],f=c.length,l=o[i]=new Array(f),s=0;s<f;++s)(a=c[s])&&(u=t.call(a,a.__data__,s,c))&&("__data__"in a&&(u.__data__=a.__data__),l[s]=u);return new O(o,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=o(t));for(var n=this._groups,r=n.length,e=[],i=[],a=0;a<r;++a)for(var u,c=n[a],f=c.length,l=0;l<f;++l)(u=c[l])&&(e.push(t.call(u,u.__data__,l,c)),i.push(u));return new O(e,i)},filter:function(t){"function"!=typeof t&&(t=N(t));for(var n=this._groups,r=n.length,e=new Array(r),o=0;o<r;++o)for(var i,a=n[o],u=a.length,c=e[o]=[],f=0;f<u;++f)(i=a[f])&&t.call(i,i.__data__,f,a)&&c.push(i);return new O(e,this._parents)},data:u,enter:function(){return new O(this._enter||this._groups.map(i),this._parents)},exit:function(){return new O(this._exit||this._groups.map(i),this._parents)},merge:function(t){for(var n=this._groups,r=t._groups,e=n.length,o=r.length,i=Math.min(e,o),a=new Array(e),u=0;u<i;++u)for(var c,f=n[u],l=r[u],s=f.length,h=a[u]=new Array(s),p=0;p<s;++p)(c=f[p]||l[p])&&(h[p]=c);for(;u<e;++u)a[u]=n[u];return new O(a,this._parents)},order:function(){for(var t=this._groups,n=-1,r=t.length;++n<r;)for(var e,o=t[n],i=o.length-1,a=o[i];--i>=0;)(e=o[i])&&(a&&a!==e.nextSibling&&a.parentNode.insertBefore(e,a),a=e);return this},sort:function(t){function n(n,r){return n&&r?t(n.__data__,r.__data__):!n-!r}t||(t=c);for(var r=this._groups,e=r.length,o=new Array(e),i=0;i<e;++i){for(var a,u=r[i],f=u.length,l=o[i]=new Array(f),s=0;s<f;++s)(a=u[s])&&(l[s]=a);l.sort(n)}return new O(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var e=t[n],o=0,i=e.length;o<i;++o){var a=e[o];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var o,i=n[r],a=0,u=i.length;a<u;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,r){var e=n(t);if(arguments.length<2){var o=this.node();return e.local?o.getAttributeNS(e.space,e.local):o.getAttribute(e)}return this.each((null==r?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof r?e.local?function(t,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}:function(t,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,r))},style:function(t,n,r){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(t,n,r){return function(){this.style.setProperty(t,n,r)}})(t,n,null==r?"":r)):l(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var r=n.apply(this,arguments);null==r?delete this[t]:this[t]=r}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:y,text:function(t){return arguments.length?this.each(null==t?function(){this.textContent=""}:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?function(){this.innerHTML=""}:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(g)},lower:function(){return this.each(m)},append:function(t){var n="function"==typeof t?t:r(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var o="function"==typeof t?t:r(t),i=null==n?function(){return null}:"function"==typeof n?n:e(n);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(b)},clone:function(t){return this.select(t?function(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}:function(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)})},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,r){var e,o,i=(t+"").trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}}),a=i.length;if(!(arguments.length<2)){for(u=n?w:function(t){return function(){var n=this.__on;if(n){for(var r,e=0,o=-1,i=n.length;e<i;++e)r=n[e],t.type&&r.type!==t.type||r.name!==t.name?n[++o]=r:this.removeEventListener(r.type,r.listener,r.capture);++o?n.length=o:delete this.__on}}},null==r&&(r=!1),e=0;e<a;++e)this.each(u(i[e],n,r));return this}var u=this.node().__on;if(u)for(var c,f=0,l=u.length;f<l;++f)for(e=0,c=u[f];e<a;++e)if((o=i[e]).type===c.type&&o.name===c.name)return c.value},dispatch:j};var $=0;E.prototype=M.prototype={constructor:E,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return S(r(t).call(document.documentElement))},t.creator=r,t.local=M,t.matcher=N,t.mouse=function(t){var n=k();return n.changedTouches&&(n=n.changedTouches[0]),P(t,n)},t.namespace=n,t.namespaces=C,t.clientPoint=P,t.select=S,t.selectAll=function(t){return"string"==typeof t?new O([document.querySelectorAll(t)],[document.documentElement]):new O([null==t?[]:t],I)},t.selection=A,t.selector=e,t.selectorAll=o,t.style=l,t.touch=function(t,n,r){arguments.length<3&&(r=n,n=k().changedTouches);for(var e,o=0,i=n?n.length:0;o<i;++o)if((e=n[o]).identifier===r)return P(t,e);return null},t.touches=function(t,n){null==n&&(n=k().touches);for(var r=0,e=n?n.length:0,o=new Array(e);r<e;++r)o[r]=P(t,n[r]);return o},t.window=f,t.customEvent=function(n,r,e,o){var i=t.event;n.sourceEvent=t.event,t.event=n;try{return r.apply(e,o)}finally{t.event=i}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],12:[function(t,n,r){function e(t){if(t){console.error(t,t.stack);var n="";t.name&&(n+=t.name+": "),n+=t.message,t.stack&&(n+=" | "+t.stack.toString()),function(t){var n=document.getElementById("status-message");n.textContent=t,n.classList.remove("hidden")}(n)}}n.exports=e},{}],13:[function(t,n,r){n.exports=function(t,n){for(var r=-1,e=t.length,o=Array(e);++r<e;)o[r]=n(t[r],r,t);return o}},{}],14:[function(t,n,r){function e(t,n,r){var e=typeof t;return"function"==e?void 0===n?t:h(t,n,r):null==t?l:"object"==e?function(t){var n=function(t){var n=d(t),r=n.length;for(;r--;)n[r][2]=a(n[r][1]);return n}(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null!=t&&(t[r]===e&&(void 0!==e||r in u(t)))}}return function(t){return function(t,n,r){var e=n.length,o=e,i=!r;if(null==t)return!o;t=u(t);for(;e--;){var a=n[e];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++e<o;){var c=(a=n[e])[0],f=t[c],l=a[1];if(i&&a[2]){if(void 0===f&&!(c in t))return!1}else{var h=r?r(f,l,c):void 0;if(!(void 0===h?s(l,f,r,!0):h))return!1}}return!0}(t,n)}}(t):void 0===n?function(t){return i(t)?function(t){return function(n){return null==n?void 0:n[t]}}(t):function(t){var n=t+"";return t=c(t),function(r){return o(r,t,n)}}(t)}(t):function(t,n){var r=p(t),e=i(t)&&a(n),f=t+"";return t=c(t),function(i){if(null==i)return!1;var a=f;if(i=u(i),(r||!e)&&!(a in i)){if(null==(i=1==t.length?i:o(i,function(t,n,r){var e=-1,o=t.length;(n=null==n?0:+n||0)<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:+r||0)<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(o);++e<o;)i[e]=t[e+n];return i}(t,0,-1))))return!1;a=function(t){var n=t?t.length:0;return n?t[n-1]:void 0}(t),i=u(i)}return i[a]===n?void 0!==n||a in i:s(n,i[a],void 0,!0)}}(t,n)}function o(t,n,r){if(null!=t){void 0!==r&&r in u(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&e<o;)t=t[n[e++]];return e&&e==o?t:void 0}}function i(t,n){var r=typeof t;if("string"==r&&y.test(t)||"number"==r)return!0;if(p(t))return!1;return!v.test(t)||null!=n&&t in u(n)}function a(t){return t==t&&!f(t)}function u(t){return f(t)?t:Object(t)}function c(t){if(p(t))return t;var n=[];return function(t){return null==t?"":t+""}(t).replace(g,function(t,r,e,o){n.push(e?o.replace(m,"$1"):r||t)}),n}function f(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function l(t){return t}var s=t("lodash._baseisequal"),h=t("lodash._bindcallback"),p=t("lodash.isarray"),d=t("lodash.pairs"),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,y=/^\w*$/,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,m=/\\(\\)?/g;n.exports=e},{"lodash._baseisequal":19,"lodash._bindcallback":22,"lodash.isarray":31,"lodash.pairs":35}],15:[function(t,n,r){function e(t,n){return function(r,e){var i=r?f(r):0;if(!function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(i))return t(r,e);for(var u=n?i:-1,c=o(r);(n?u--:++u<i)&&!1!==e(c[u],u,c););return r}}function o(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}var i=t("lodash.keys"),a=9007199254740991,u=e(function(t,n){return c(t,n,i)}),c=function(t){return function(n,r,e){for(var i=o(n),a=e(n),u=a.length,c=t?u:-1;t?c--:++c<u;){var f=a[c];if(!1===r(i[f],f,i))break}return n}}(),f=function(t){return function(n){return null==n?void 0:n[t]}}("length");n.exports=u},{"lodash.keys":33}],16:[function(t,n,r){n.exports=function(t,n,r,e){var o;return r(t,function(t,r,i){if(n(t,r,i))return o=e?r:t,!1}),o}},{}],17:[function(t,n,r){n.exports=function(t,n,r){for(var e=t.length,o=r?e:-1;r?o--:++o<e;)if(n(t[o],o,t))return o;return-1}},{}],18:[function(t,n,r){function e(t,n,r){if(null!=t){void 0!==r&&r in function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&e<o;)t=t[n[e++]];return e&&e==o?t:void 0}}n.exports=e},{}],19:[function(t,n,r){function e(t,n){for(var r=-1,e=t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}function o(t,n,r,g,_,w){return t===n||(null==t||null==n||!function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&!function(t){return!!t&&"object"==typeof t}(n)?t!=t&&n!=n:function(t,n,r,o,g,_,w){var x=i(t),j=i(n),O=f,A=f;x||((O=b.call(t))==c?O=d:O!=d&&(x=a(t)));j||((A=b.call(n))==c?A=d:A!=d&&(j=a(n)));var S=O==d,M=A==d,E=O==A;if(E&&!x&&!S)return function(t,n,r){switch(r){case l:case s:return+t==+n;case h:return t.name==n.name&&t.message==n.message;case p:return t!=+t?n!=+n:t==+n;case v:case y:return t==n+""}return!1}(t,n,O);if(!g){var k=S&&m.call(t,"__wrapped__"),P=M&&m.call(n,"__wrapped__");if(k||P)return r(k?t.value():t,P?n.value():n,o,g,_,w)}if(!E)return!1;_||(_=[]),w||(w=[]);var B=_.length;for(;B--;)if(_[B]==t)return w[B]==n;_.push(t),w.push(n);var C=(x?function(t,n,r,o,i,a,u){var c=-1,f=t.length,l=n.length;if(f!=l&&!(i&&l>f))return!1;for(;++c<f;){var s=t[c],h=n[c],p=o?o(i?h:s,i?s:h,c):void 0;if(void 0!==p){if(p)continue;return!1}if(i){if(!e(n,function(t){return s===t||r(s,t,o,i,a,u)}))return!1}else if(s!==h&&!r(s,h,o,i,a,u))return!1}return!0}:function(t,n,r,e,o,i,a){var c=u(t),f=c.length,l=u(n).length;if(f!=l&&!o)return!1;var s=f;for(;s--;){var h=c[s];if(!(o?h in n:m.call(n,h)))return!1}var p=o;for(;++s<f;){h=c[s];var d=t[h],v=n[h],y=e?e(o?v:d,o?d:v,h):void 0;if(!(void 0===y?r(d,v,e,o,i,a):y))return!1;p||(p="constructor"==h)}if(!p){var g=t.constructor,b=n.constructor;if(g!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b))return!1}return!0})(t,n,r,o,g,_,w);return _.pop(),w.pop(),C}(t,n,o,r,g,_,w))}var i=t("lodash.isarray"),a=t("lodash.istypedarray"),u=t("lodash.keys"),c="[object Arguments]",f="[object Array]",l="[object Boolean]",s="[object Date]",h="[object Error]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object String]",g=Object.prototype,m=g.hasOwnProperty,b=g.toString;n.exports=o},{"lodash.isarray":31,"lodash.istypedarray":32,"lodash.keys":33}],20:[function(t,n,r){function e(t,n,r){var e=n.length,i=e,a=!r;if(null==t)return!i;for(t=function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t);e--;){var u=n[e];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++e<i;){var c=(u=n[e])[0],f=t[c],l=u[1];if(a&&u[2]){if(void 0===f&&!(c in t))return!1}else{var s=r?r(f,l,c):void 0;if(!(void 0===s?o(l,f,r,!0):s))return!1}}return!0}var o=t("lodash._baseisequal");n.exports=e},{"lodash._baseisequal":19}],21:[function(t,n,r){function e(t){var n=function(t){var n=a(t),r=n.length;for(;r--;)n[r][2]=function(t){return t==t&&!o(t)}(n[r][1]);return n}(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null!=t&&(t[r]===e&&(void 0!==e||r in function(t){return o(t)?t:Object(t)}(t)))}}return function(t){return i(t,n)}}function o(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var i=t("lodash._baseismatch"),a=t("lodash.pairs");n.exports=e},{"lodash._baseismatch":20,"lodash.pairs":35}],22:[function(t,n,r){function e(t){return t}n.exports=function(t,n,r){if("function"!=typeof t)return e;if(void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 3:return function(r,e,o){return t.call(n,r,e,o)};case 4:return function(r,e,o,i){return t.call(n,r,e,o,i)};case 5:return function(r,e,o,i,a){return t.call(n,r,e,o,i,a)}}return function(){return t.apply(n,arguments)}}},{}],23:[function(t,n,r){function e(t,n){var r=null==t?void 0:t[n];return function(t){if(null==t)return!1;if(function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&f.call(t)==o}(t))return l.test(u.call(t));return function(t){return!!t&&"object"==typeof t}(t)&&i.test(t)}(r)?r:void 0}var o="[object Function]",i=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,f=a.toString,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=e},{}],24:[function(t,n,r){var e=t("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,i=/\\(\\)?/g;n.exports=function(t){if(e(t))return t;var n=[];return function(t){return null==t?"":t+""}(t).replace(o,function(t,r,e,o){n.push(e?o.replace(i,"$1"):r||t)}),n}},{"lodash.isarray":31}],25:[function(t,n,r){(function(t){function e(t,n){return t.set(n[0],n[1]),t}function o(t,n){return t.add(n),t}function i(t,n,r,e){var o=-1,i=t?t.length:0;for(e&&i&&(r=t[++o]);++o<i;)r=n(r,t[o],o,t);return r}function a(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}function u(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function c(t,n){return function(r){return t(n(r))}}function f(t){var n=-1,r=Array(t.size);return t.forEach(function(t){r[++n]=t}),r}function l(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function s(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function h(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function p(t){this.__data__=new s(t)}function d(t,n){var r=Ut(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&S(t)}(t)&&mt.call(t,"callee")&&(!St.call(t,"callee")||bt.call(t)==X)}(t)?function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}(t.length,String):[],e=r.length,o=!!e;for(var i in t)!n&&!mt.call(t,i)||o&&("length"==i||function(t,n){return!!(n=null==n?C:n)&&("number"==typeof t||ot.test(t))&&t>-1&&t%1==0&&t<n}(i,e))||r.push(i);return r}function v(t,n,r){var e=t[n];mt.call(t,n)&&A(e,r)&&(void 0!==r||n in t)||(t[n]=r)}function y(t,n){for(var r=t.length;r--;)if(A(t[r][0],n))return r;return-1}function g(t,n,r,c,l,s,h){var d;if(c&&(d=s?c(t,l,s,h):c(t)),void 0!==d)return d;if(!E(t))return t;var y=Ut(t);if(y){if(d=function(t){var n=t.length,r=t.constructor(n);n&&"string"==typeof t[0]&&mt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!n)return function(t,n){var r=-1,e=t.length;n||(n=Array(e));for(;++r<e;)n[r]=t[r];return n}(t,d)}else{var m=Ht(t),w=m==N||m==F;if(Gt(t))return function(t,n){if(n)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,n);if(m==$||m==X||w&&!s){if(a(t))return s?t:{};if(d=function(t){return"function"!=typeof t.constructor||j(t)?{}:function(t){return E(t)?At(t):{}}(Ot(t))}(w?{}:t),!n)return function(t,n){return _(t,Vt(t),n)}(t,function(t,n){return t&&_(n,k(n),t)}(d,t))}else{if(!it[m])return s?t:{};d=function(t,n,r,a){var c=t.constructor;switch(n){case H:return b(t);case Y:case R:return new c(+t);case U:return function(t,n){var r=n?b(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,a);case G:case z:case W:case Q:case K:case J:case Z:case tt:case nt:return function(t,n){var r=n?b(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,a);case D:return function(t,n,r){return i(n?r(u(t),!0):u(t),e,new t.constructor)}(t,a,r);case I:case q:return new c(t);case T:return function(t){var n=new t.constructor(t.source,rt.exec(t));return n.lastIndex=t.lastIndex,n}(t);case L:return function(t,n,r){return i(n?r(f(t),!0):f(t),o,new t.constructor)}(t,a,r);case V:return function(t){return qt?Object(qt.call(t)):{}}(t)}}(t,m,g,n)}}h||(h=new p);var x=h.get(t);if(x)return x;if(h.set(t,d),!y)var O=r?function(t){return function(t,n,r){var e=n(t);return Ut(t)?e:function(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t}(e,r(t))}(t,k,Vt)}(t):k(t);return function(t,n){for(var r=-1,e=t?t.length:0;++r<e&&!1!==n(t[r],r,t););}(O||t,function(e,o){O&&(e=t[o=e]),v(d,o,g(e,n,r,c,o,t,h))}),d}function m(t){if(!E(t)||function(t){return!!yt&&yt in t}(t))return!1;return(M(t)||a(t)?_t:et).test(O(t))}function b(t){var n=new t.constructor(t.byteLength);return new jt(n).set(new jt(t)),n}function _(t,n,r,e){r||(r={});for(var o=-1,i=n.length;++o<i;){var a=n[o],u=e?e(r[a],t[a],a,r,t):void 0;v(r,a,void 0===u?t[a]:u)}return r}function w(t,n){var r=t.__data__;return function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?r["string"==typeof n?"string":"hash"]:r.map}function x(t,n){var r=function(t,n){return null==t?void 0:t[n]}(t,n);return m(r)?r:void 0}function j(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||dt)}function O(t){if(null!=t){try{return gt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function A(t,n){return t===n||t!=t&&n!=n}function S(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=C}(t.length)&&!M(t)}function M(t){var n=E(t)?bt.call(t):"";return n==N||n==F}function E(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function k(t){return S(t)?d(t):function(t){if(!j(t))return Pt(t);var n=[];for(var r in Object(t))mt.call(t,r)&&"constructor"!=r&&n.push(r);return n}(t)}var P=200,B="__lodash_hash_undefined__",C=9007199254740991,X="[object Arguments]",Y="[object Boolean]",R="[object Date]",N="[object Function]",F="[object GeneratorFunction]",D="[object Map]",I="[object Number]",$="[object Object]",T="[object RegExp]",L="[object Set]",q="[object String]",V="[object Symbol]",H="[object ArrayBuffer]",U="[object DataView]",G="[object Float32Array]",z="[object Float64Array]",W="[object Int8Array]",Q="[object Int16Array]",K="[object Int32Array]",J="[object Uint8Array]",Z="[object Uint8ClampedArray]",tt="[object Uint16Array]",nt="[object Uint32Array]",rt=/\w*$/,et=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,it={};it[X]=it["[object Array]"]=it[H]=it[U]=it[Y]=it[R]=it[G]=it[z]=it[W]=it[Q]=it[K]=it[D]=it[I]=it[$]=it[T]=it[L]=it[q]=it[V]=it[J]=it[Z]=it[tt]=it[nt]=!0,it["[object Error]"]=it[N]=it["[object WeakMap]"]=!1;var at="object"==typeof t&&t&&t.Object===Object&&t,ut="object"==typeof self&&self&&self.Object===Object&&self,ct=at||ut||Function("return this")(),ft="object"==typeof r&&r&&!r.nodeType&&r,lt=ft&&"object"==typeof n&&n&&!n.nodeType&&n,st=lt&&lt.exports===ft,ht=Array.prototype,pt=Function.prototype,dt=Object.prototype,vt=ct["__core-js_shared__"],yt=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=pt.toString,mt=dt.hasOwnProperty,bt=dt.toString,_t=RegExp("^"+gt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=st?ct.Buffer:void 0,xt=ct.Symbol,jt=ct.Uint8Array,Ot=c(Object.getPrototypeOf,Object),At=Object.create,St=dt.propertyIsEnumerable,Mt=ht.splice,Et=Object.getOwnPropertySymbols,kt=wt?wt.isBuffer:void 0,Pt=c(Object.keys,Object),Bt=x(ct,"DataView"),Ct=x(ct,"Map"),Xt=x(ct,"Promise"),Yt=x(ct,"Set"),Rt=x(ct,"WeakMap"),Nt=x(Object,"create"),Ft=O(Bt),Dt=O(Ct),It=O(Xt),$t=O(Yt),Tt=O(Rt),Lt=xt?xt.prototype:void 0,qt=Lt?Lt.valueOf:void 0;l.prototype.clear=function(){this.__data__=Nt?Nt(null):{}},l.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},l.prototype.get=function(t){var n=this.__data__;if(Nt){var r=n[t];return r===B?void 0:r}return mt.call(n,t)?n[t]:void 0},l.prototype.has=function(t){var n=this.__data__;return Nt?void 0!==n[t]:mt.call(n,t)},l.prototype.set=function(t,n){return this.__data__[t]=Nt&&void 0===n?B:n,this},s.prototype.clear=function(){this.__data__=[]},s.prototype.delete=function(t){var n=this.__data__,r=y(n,t);return!(r<0||(r==n.length-1?n.pop():Mt.call(n,r,1),0))},s.prototype.get=function(t){var n=this.__data__,r=y(n,t);return r<0?void 0:n[r][1]},s.prototype.has=function(t){return y(this.__data__,t)>-1},s.prototype.set=function(t,n){var r=this.__data__,e=y(r,t);return e<0?r.push([t,n]):r[e][1]=n,this},h.prototype.clear=function(){this.__data__={hash:new l,map:new(Ct||s),string:new l}},h.prototype.delete=function(t){return w(this,t).delete(t)},h.prototype.get=function(t){return w(this,t).get(t)},h.prototype.has=function(t){return w(this,t).has(t)},h.prototype.set=function(t,n){return w(this,t).set(t,n),this},p.prototype.clear=function(){this.__data__=new s},p.prototype.delete=function(t){return this.__data__.delete(t)},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,n){var r=this.__data__;if(r instanceof s){var e=r.__data__;if(!Ct||e.length<P-1)return e.push([t,n]),this;r=this.__data__=new h(e)}return r.set(t,n),this};var Vt=Et?c(Et,Object):function(){return[]},Ht=function(t){return bt.call(t)};(Bt&&Ht(new Bt(new ArrayBuffer(1)))!=U||Ct&&Ht(new Ct)!=D||Xt&&"[object Promise]"!=Ht(Xt.resolve())||Yt&&Ht(new Yt)!=L||Rt&&"[object WeakMap]"!=Ht(new Rt))&&(Ht=function(t){var n=bt.call(t),r=n==$?t.constructor:void 0,e=r?O(r):void 0;if(e)switch(e){case Ft:return U;case Dt:return D;case It:return"[object Promise]";case $t:return L;case Tt:return"[object WeakMap]"}return n});var Ut=Array.isArray,Gt=kt||function(){return!1};n.exports=function(t){return g(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(t,n,r){(function(t){function r(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function e(t,n){return!!(t?t.length:0)&&function(t,n,r){if(n!=n)return function(t,n,r,e){var o=t.length,i=r+(e?1:-1);for(;e?i--:++i<o;)if(n(t[i],i,t))return i;return-1}(t,o,r);var e=r-1,i=t.length;for(;++e<i;)if(t[e]===n)return e;return-1}(t,n,0)>-1}function o(t){return t!=t}function i(t,n){for(var r=-1,e=t.length,o=0,i=[];++r<e;){var a=t[r];a!==n&&a!==b||(t[r]=b,i[o++]=r)}return i}function a(t){if(!v(t)||function(t){return!!Z&&Z in t}(t))return!1;return(function(t){var n=v(t)?rt.call(t):"";return n==Y||n==R}(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t)?et:q).test(function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function u(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=function(t){return v(t)?ot(t):{}}(t.prototype),e=t.apply(r,n);return v(e)?e:r}}function c(t,n,r,e,o,a,l,h,d,v){function y(){for(var _=arguments.length,w=Array(_),j=_;j--;)w[j]=arguments[j];if(x)var O=s(y),M=function(t,n){for(var r=t.length,e=0;r--;)t[r]===n&&e++;return e}(w,O);if(e&&(w=function(t,n,r,e){for(var o=-1,i=t.length,a=r.length,u=-1,c=n.length,f=it(i-a,0),l=Array(c+f),s=!e;++u<c;)l[u]=n[u];for(;++o<a;)(s||o<i)&&(l[r[o]]=t[o]);for(;f--;)l[u++]=t[o++];return l}(w,e,o,x)),a&&(w=function(t,n,r,e){for(var o=-1,i=t.length,a=-1,u=r.length,c=-1,f=n.length,l=it(i-u,0),s=Array(l+f),h=!e;++o<l;)s[o]=t[o];for(var p=o;++c<f;)s[p+c]=n[c];for(;++a<u;)(h||o<i)&&(s[p+r[a]]=t[o++]);return s}(w,a,l,x)),_-=M,x&&_<v){var E=i(w,O);return f(t,n,c,y.placeholder,r,w,E,h,d,v-_)}var k=m?r:this,P=b?k[t]:t;return _=w.length,h?w=function(t,n){var r=t.length,e=at(n.length,r),o=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}(t);for(;e--;){var i=n[e];t[e]=p(i,r)?o[i]:void 0}return t}(w,h):A&&_>1&&w.reverse(),g&&d<_&&(w.length=d),this&&this!==W&&this instanceof y&&(P=S||u(P)),P.apply(k,w)}var g=n&M,m=n&_,b=n&w,x=n&(j|O),A=n&E,S=b?void 0:u(t);return y}function f(t,n,r,e,o,i,a,u,c,f){var l=n&j;n|=l?A:S,(n&=~(l?S:A))&x||(n&=~(_|w));var s=r(t,n,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,u,c,f);return s.placeholder=e,ct(s,t,n)}function l(t,n,e,o,a,l,h,p){var d=n&w;if(!d&&"function"!=typeof t)throw new TypeError(m);var v=o?o.length:0;if(v||(n&=~(A|S),o=a=void 0),h=void 0===h?h:it(g(h),0),p=void 0===p?p:g(p),v-=a?a.length:0,n&S){var y=o,b=a;o=a=void 0}var x=[t,n,e,o,a,y,b,l,h,p];if(t=x[0],n=x[1],e=x[2],o=x[3],a=x[4],!(p=x[9]=null==x[9]?d?0:t.length:it(x[9]-v,0))&&n&(j|O)&&(n&=~(j|O)),n&&n!=_)M=n==j||n==O?function(t,n,e){function o(){for(var u=arguments.length,l=Array(u),h=u,p=s(o);h--;)l[h]=arguments[h];var d=u<3&&l[0]!==p&&l[u-1]!==p?[]:i(l,p);return(u-=d.length)<e?f(t,n,c,o.placeholder,void 0,l,d,void 0,void 0,e-u):r(this&&this!==W&&this instanceof o?a:t,this,l)}var a=u(t);return o}(t,n,p):n!=A&&n!=(_|A)||a.length?c.apply(void 0,x):function(t,n,e,o){function i(){for(var n=-1,u=arguments.length,f=-1,l=o.length,s=Array(l+u),h=this&&this!==W&&this instanceof i?c:t;++f<l;)s[f]=o[f];for(;u--;)s[f++]=arguments[++n];return r(h,a?e:this,s)}var a=n&_,c=u(t);return i}(t,n,e,o);else var M=function(t,n,r){function e(){return(this&&this!==W&&this instanceof e?i:t).apply(o?r:this,arguments)}var o=n&_,i=u(t);return e}(t,n,e);return ct(M,t,n)}function s(t){return t.placeholder}function h(t,n){var r=function(t,n){return null==t?void 0:t[n]}(t,n);return a(r)?r:void 0}function p(t,n){return!!(n=null==n?P:n)&&("number"==typeof t||H.test(t))&&t>-1&&t%1==0&&t<n}function d(t,n,r){var e=l(t,j,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return e.placeholder=d.placeholder,e}function v(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function y(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&rt.call(t)==N}(t))return C;if(v(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=v(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(F,"");var r=L.test(t);return r||V.test(t)?U(t.slice(2),r?2:8):T.test(t)?C:+t}(t))===k||t===-k){return(t<0?-1:1)*B}return t==t?t:0}function g(t){var n=y(t),r=n%1;return n==n?r?n-r:n:0}var m="Expected a function",b="__lodash_placeholder__",_=1,w=2,x=4,j=8,O=16,A=32,S=64,M=128,E=512,k=1/0,P=9007199254740991,B=1.7976931348623157e308,C=NaN,X=[["ary",M],["bind",_],["bindKey",w],["curry",j],["curryRight",O],["flip",E],["partial",A],["partialRight",S],["rearg",256]],Y="[object Function]",R="[object GeneratorFunction]",N="[object Symbol]",F=/^\s+|\s+$/g,D=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,I=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,T=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,q=/^\[object .+?Constructor\]$/,V=/^0o[0-7]+$/i,H=/^(?:0|[1-9]\d*)$/,U=parseInt,G="object"==typeof t&&t&&t.Object===Object&&t,z="object"==typeof self&&self&&self.Object===Object&&self,W=G||z||Function("return this")(),Q=Function.prototype,K=Object.prototype,J=W["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),tt=Q.toString,nt=K.hasOwnProperty,rt=K.toString,et=RegExp("^"+tt.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Object.create,it=Math.max,at=Math.min,ut=function(){var t=h(Object,"defineProperty"),n=h.name;return n&&n.length>2?t:void 0}(),ct=ut?function(t,n,r){var o=n+"";return ut(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(function(t,n){var r=n.length,e=r-1;return n[e]=(r>1?"& ":"")+n[e],n=n.join(r>2?", ":" "),t.replace(D,"{\n/* [wrapped with "+n+"] */\n")}(o,function(t,n){return function(t,n){for(var r=-1,e=t?t.length:0;++r<e&&!1!==n(t[r],r,t););}(X,function(r){var o="_."+r[0];n&r[1]&&!e(t,o)&&t.push(o)}),t.sort()}(function(t){var n=t.match(I);return n?n[1].split($):[]}(o),r)))})}:function(t){return t};d.placeholder={},n.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,n,r){function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function o(t,n){var r=O(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&_.call(t,"callee")&&(!x.call(t,"callee")||w.call(t)==v)}(t)?function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}(t.length,String):[],e=r.length,o=!!e;for(var i in t)!n&&!_.call(t,i)||o&&("length"==i||l(i,e))||r.push(i);return r}function i(t,n,r,e){return void 0===t||s(t,b[r])&&!_.call(e,r)?n:t}function a(t,n,r){var e=t[n];_.call(t,n)&&s(e,r)&&(void 0!==r||n in t)||(t[n]=r)}function u(t){if(!p(t))return function(t){var n=[];if(null!=t)for(var r in Object(t))n.push(r);return n}(t);var n=function(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||b;return t===r}(t),r=[];for(var e in t)("constructor"!=e||!n&&_.call(t,e))&&r.push(e);return r}function c(t,n){return n=j(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=j(r.length-n,0),a=Array(i);++o<i;)a[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=a,e(t,this,u)}}function f(t){return c(function(n,r){var e=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,n,r){if(!p(r))return!1;var e=typeof n;if("number"==e?h(r)&&l(n,r.length):"string"==e&&n in r)return s(r[n],t);return!1}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),n=Object(n);++e<o;){var u=r[e];u&&t(n,u,e,i)}return n})}function l(t,n){return!!(n=null==n?d:n)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<n}function s(t,n){return t===n||t!=t&&n!=n}function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}(t.length)&&!function(t){var n=p(t)?w.call(t):"";return n==y||n==g}(t)}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var d=9007199254740991,v="[object Arguments]",y="[object Function]",g="[object GeneratorFunction]",m=/^(?:0|[1-9]\d*)$/,b=Object.prototype,_=b.hasOwnProperty,w=b.toString,x=b.propertyIsEnumerable,j=Math.max,O=Array.isArray,A=f(function(t,n,r,e){!function(t,n,r,e){r||(r={});for(var o=-1,i=n.length;++o<i;){var u=n[o],c=e?e(r[u],t[u],u,r,t):void 0;a(r,u,void 0===c?t[u]:c)}}(n,function(t){return h(t)?o(t,!0):u(t)}(n),t,e)}),S=c(function(t){return t.push(void 0,i),e(A,void 0,t)});n.exports=S},{}],28:[function(t,n,r){var e=t("lodash._basecallback"),o=t("lodash._baseeach"),i=t("lodash._basefind"),a=t("lodash._basefindindex"),u=t("lodash.isarray"),c=function(t,n){return function(r,o,c){if(o=e(o,c,3),u(r)){var f=a(r,o,n);return f>-1?r[f]:void 0}return i(r,o,t)}}(o);n.exports=c},{"lodash._basecallback":14,"lodash._baseeach":15,"lodash._basefind":16,"lodash._basefindindex":17,"lodash.isarray":31}],29:[function(t,n,r){var e=t("lodash._basematches"),o=t("lodash.find");n.exports=function(t,n){return o(t,e(n))}},{"lodash._basematches":21,"lodash.find":28}],30:[function(t,n,r){function e(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!function(t){var n=function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?l.call(t):"";return n==a||n==u}(t)}(t)}(t)&&f.call(t,"callee")&&(!s.call(t,"callee")||l.call(t)==i)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",u="[object GeneratorFunction]",c=Object.prototype,f=c.hasOwnProperty,l=c.toString,s=c.propertyIsEnumerable;n.exports=e},{}],31:[function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t,n){var r=null==t?void 0:t[n];return function(t){if(null==t)return!1;if(function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&l.call(t)==i}(t))return s.test(c.call(t));return e(t)&&a.test(t)}(r)?r:void 0}var i="[object Function]",a=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,f=u.hasOwnProperty,l=u.toString,s=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=9007199254740991,p=o(Array,"isArray")||function(t){return e(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}(t.length)&&"[object Array]"==l.call(t)};n.exports=p},{}],32:[function(t,n,r){function e(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!!i[a.call(t)]}var o=9007199254740991,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var a=Object.prototype.toString;n.exports=e},{}],33:[function(t,n,r){function e(t,n){return t="number"==typeof t||l.test(t)?+t:-1,n=null==n?p:n,t>-1&&t%1==0&&t<n}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function i(t){for(var n=function(t){if(null==t)return[];a(t)||(t=Object(t));var n=t.length;n=n&&o(n)&&(f(t)||c(t))&&n||0;var r=t.constructor,i=-1,u="function"==typeof r&&r.prototype===t,l=Array(n),h=n>0;for(;++i<n;)l[i]=i+"";for(var p in t)h&&e(p,n)||"constructor"==p&&(u||!s.call(t,p))||l.push(p);return l}(t),r=n.length,i=r&&t.length,u=!!i&&o(i)&&(f(t)||c(t)),l=-1,h=[];++l<r;){var p=n[l];(u&&e(p,i)||s.call(t,p))&&h.push(p)}return h}function a(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var u=t("lodash._getnative"),c=t("lodash.isarguments"),f=t("lodash.isarray"),l=/^\d+$/,s=Object.prototype.hasOwnProperty,h=u(Object,"keys"),p=9007199254740991,d=function(t){return function(n){return null==n?void 0:n[t]}}("length"),v=h?function(t){var n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&function(t){return null!=t&&o(d(t))}(t)?i(t):a(t)?h(t):[]}:i;n.exports=v},{"lodash._getnative":23,"lodash.isarguments":30,"lodash.isarray":31}],34:[function(t,n,r){function e(t,n){var r=-1,e=function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}(f(t))}(t)?Array(t.length):[];return a(t,function(t,o,i){e[++r]=n(t,o,i)}),e}var o=t("lodash._arraymap"),i=t("lodash._basecallback"),a=t("lodash._baseeach"),u=t("lodash.isarray"),c=9007199254740991,f=function(t){return function(n){return null==n?void 0:n[t]}}("length");n.exports=function(t,n,r){var a=u(t)?o:e;return n=i(n,r,3),a(t,n)}},{"lodash._arraymap":13,"lodash._basecallback":14,"lodash._baseeach":15,"lodash.isarray":31}],35:[function(t,n,r){function e(t){t=function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t);for(var n=-1,r=o(t),e=r.length,i=Array(e);++n<e;){var a=r[n];i[n]=[a,t[a]]}return i}var o=t("lodash.keys");n.exports=e},{"lodash.keys":33}],36:[function(t,n,r){function e(t,n){var r=typeof t;if("string"==r&&l.test(t)||"number"==r)return!0;if(u(t))return!1;return!f.test(t)||null!=n&&t in function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(n)}function o(t,n){return c(t,function(t){return e(t)?function(t){return function(n){return null==n?void 0:n[t]}}(t):function(t){var n=t+"";return t=a(t),function(r){return i(r,t,n)}}(t)}(n))}var i=t("lodash._baseget"),a=t("lodash._topath"),u=t("lodash.isarray"),c=t("lodash.map"),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,l=/^\w*$/;n.exports=o},{"lodash._baseget":18,"lodash._topath":24,"lodash.isarray":31,"lodash.map":34}],37:[function(t,n,r){function e(t){function n(t){return Math.floor(h()*t)}function r(t){function r(t){return function(t,n){n=+n;for(var r=0;r<t.length;++r){var e=t[r],o=e[0];if(n>=o[0]&&n<=o[1])return e[1]}}(e,t)}var e=t,o=e[e.length-1][0][1]-e[0][0][0]+1;return{outcomeAtIndex:r,roll:function(){var t=r(n(o));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:o,getRangesAndOutcomesArray:function(){return e}}}function e(t){var n=[],r=-1,e=function(t){var n=[];for(var r in t){var e=t[r];n.push([e,r])}return n}(t);return(e=e.sort(o)).forEach(function(t){var e=t[0],o=t[1],i=r+1,a=i+e-1;n.push([[i,a],o]),r=a}),n}function o(t,n){return t[0]>n[0]?-1:1}function i(t){return r(function(t){var n=[];for(var r in t){var e=function(t){var n=t.split("-");if(n.length>2)return;return 1===n.length?[+t,+t]:[+n[0],+n[1]]}(r),o=t[r];if("object"==typeof o)if(Array.isArray(o))o=f(o);else{var u=i(o);"function"==typeof u.roll&&(o=u.roll)}n.push([e,o])}return n.sort(a)}(t))}function a(t,n){return t[0][0]<n[0][0]?-1:1}function u(t){return r(function(t){function n(t){var n=t[0],e=t[1],o=r+n-1,i=[r,o];if(r=o+1,Array.isArray(e))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(e)){var a=u(e);"function"==typeof a.roll&&(e=a.roll)}else e=f(e);return[i,e]}var r=0;return t.map(n)}(t))}function c(t,r){return!t||"number"!=typeof t.length||t.length<1?r:t[n(t.length)]}function f(t,n){return function(){return c(t,n)}}function l(t,n){var r=[];return t.forEach(function(t){n.forEach(function(n){Array.isArray(t)||Array.isArray(n)?r.push(t.concat(n)):r.push([t,n])})}),r}function s(t){for(var r,e=t.length,o=Array(e),i=0;i<e;i++)(r=n(i+1))!==i&&(o[i]=o[r]),o[r]=t[i];return o}var h=Math.random;return t&&t.random&&(h=t.random),{roll:n,rollDie:function(t){return 0===t?0:n(t)+1},createRangeTable:r,createRangeTableFromDict:function(t){return r(e(t))},createTableFromDef:i,createTableFromSizes:u,convertDictToRangesAndOutcomePairs:e,pickFromArray:c,crossArrays:l,getCartesianProduct:function(t){return t.slice(1).reduce(l,t[0])},shuffle:s,sample:function(t,n){return s(t).slice(0,n)},randomFn:h}}var o=e();"object"==typeof n&&(n.exports=o,n.exports.createProbable=e)},{}],38:[function(t,n,r){"use strict";function e(t,n,r,e,i){o(t,n,r||0,e||t.length-1,i||function(t,n){return t<n?-1:t>n?1:0})}function o(t,n,r,e,a){for(;e>r;){if(e-r>600){var u=e-r+1,c=n-r+1,f=Math.log(u),l=.5*Math.exp(2*f/3),s=.5*Math.sqrt(f*l*(u-l)/u)*(c-u/2<0?-1:1);o(t,n,Math.max(r,Math.floor(n-c*l/u+s)),Math.min(e,Math.floor(n+(u-c)*l/u+s)),a)}var h=t[n],p=r,d=e;for(i(t,r,n),a(t[e],h)>0&&i(t,r,e);p<d;){for(i(t,p,d),p++,d--;a(t[p],h)<0;)p++;for(;a(t[d],h)>0;)d--}0===a(t[r],h)?i(t,r,d):i(t,++d,e),d<=n&&(r=d+1),n<=d&&(e=d-1)}}function i(t,n,r){var e=t[n];t[n]=t[r],t[r]=e}n.exports=e,n.exports.default=e},{}],39:[function(t,n,r){"use strict";function e(t,n){if(!(this instanceof e))return new e(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function o(t,n){i(t,0,t.children.length,n,t)}function i(t,n,r,e,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,u=n;u<r;u++)i=t.children[u],a(o,t.leaf?e(i):i);return o}function a(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function u(t,n){return t.minX-n.minX}function c(t,n){return t.minY-n.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function s(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function h(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(t,n,r,e,o){for(var i,a=[n,r];a.length;)(r=a.pop())-(n=a.pop())<=e||(i=n+Math.ceil((r-n)/e/2)*e,v(t,i,n,r,o),a.push(n,i,i,r))}n.exports=e,n.exports.default=e;var v=t("quickselect");e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var n=this.data,r=[],e=this.toBBox;if(!h(t,n))return r;for(var o,i,a,u,c=[];n;){for(o=0,i=n.children.length;o<i;o++)a=n.children[o],h(t,u=n.leaf?e(a):a)&&(n.leaf?r.push(a):s(t,u)?this._all(a,r):c.push(a));n=c.pop()}return r},collides:function(t){var n=this.data,r=this.toBBox;if(!h(t,n))return!1;for(var e,o,i,a,u=[];n;){for(e=0,o=n.children.length;e<o;e++)if(i=n.children[e],a=n.leaf?r(i):i,h(t,a)){if(n.leaf||s(t,a))return!0;u.push(i)}n=u.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0,r=t.length;n<r;n++)this.insert(t[n]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var o=this.data;this.data=e,e=o}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,n){if(!t)return this;for(var r,e,o,i,a=this.data,u=this.toBBox(t),c=[],f=[];a||c.length;){if(a||(a=c.pop(),e=c[c.length-1],r=f.pop(),i=!0),a.leaf&&-1!==(o=function(t,n,r){if(!r)return n.indexOf(t);for(var e=0;e<n.length;e++)if(r(t,n[e]))return e;return-1}(t,a.children,n)))return a.children.splice(o,1),c.push(a),this._condense(c),this;i||a.leaf||!s(a,u)?e?(r++,a=e.children[r],i=!1):a=null:(c.push(a),f.push(r),r=0,e=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,n){for(var r=[];t;)t.leaf?n.push.apply(n,t.children):r.push.apply(r,t.children),t=r.pop();return n},_build:function(t,n,r,e){var i,a=r-n+1,u=this._maxEntries;if(a<=u)return i=p(t.slice(n,r+1)),o(i,this.toBBox),i;e||(e=Math.ceil(Math.log(a)/Math.log(u)),u=Math.ceil(a/Math.pow(u,e-1))),(i=p([])).leaf=!1,i.height=e;var c,f,l,s,h=Math.ceil(a/u),v=h*Math.ceil(Math.sqrt(u));for(d(t,n,r,v,this.compareMinX),c=n;c<=r;c+=v)for(d(t,c,l=Math.min(c+v-1,r),h,this.compareMinY),f=c;f<=l;f+=h)s=Math.min(f+h-1,l),i.children.push(this._build(t,f,s,e-1));return o(i,this.toBBox),i},_chooseSubtree:function(t,n,r,e){for(var o,i,a,u,c,l,s,h;;){if(e.push(n),n.leaf||e.length-1===r)break;for(s=h=1/0,o=0,i=n.children.length;o<i;o++)c=f(a=n.children[o]),(l=function(t,n){return(Math.max(n.maxX,t.maxX)-Math.min(n.minX,t.minX))*(Math.max(n.maxY,t.maxY)-Math.min(n.minY,t.minY))}(t,a)-c)<h?(h=l,s=c<s?c:s,u=a):l===h&&c<s&&(s=c,u=a);n=u||n.children[0]}return n},_insert:function(t,n,r){var e=this.toBBox,o=r?t:e(t),i=[],u=this._chooseSubtree(o,this.data,n,i);for(u.children.push(t),a(u,o);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(o,i,n)},_split:function(t,n){var r=t[n],e=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,e);var a=this._chooseSplitIndex(r,i,e),u=p(r.children.splice(a,r.children.length-a));u.height=r.height,u.leaf=r.leaf,o(r,this.toBBox),o(u,this.toBBox),n?t[n-1].children.push(u):this._splitRoot(r,u)},_splitRoot:function(t,n){this.data=p([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,n,r){var e,o,a,u,c,l,s,h;for(l=s=1/0,e=n;e<=r-n;e++)u=function(t,n){var r=Math.max(t.minX,n.minX),e=Math.max(t.minY,n.minY),o=Math.min(t.maxX,n.maxX),i=Math.min(t.maxY,n.maxY);return Math.max(0,o-r)*Math.max(0,i-e)}(o=i(t,0,e,this.toBBox),a=i(t,e,r,this.toBBox)),c=f(o)+f(a),u<l?(l=u,h=e,s=c<s?c:s):u===l&&c<s&&(s=c,h=e);return h},_chooseSplitAxis:function(t,n,r){var e=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,n,r,e)<this._allDistMargin(t,n,r,o)&&t.children.sort(e)},_allDistMargin:function(t,n,r,e){t.children.sort(e);var o,u,c=this.toBBox,f=i(t,0,n,c),s=i(t,r-n,r,c),h=l(f)+l(s);for(o=n;o<r-n;o++)u=t.children[o],a(f,t.leaf?c(u):u),h+=l(f);for(o=r-n-1;o>=n;o--)u=t.children[o],a(s,t.leaf?c(u):u),h+=l(s);return h},_adjustParentBBoxes:function(t,n,r){for(var e=r;e>=0;e--)a(n[e],t)},_condense:function(t){for(var n,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(n=t[r-1].children).splice(n.indexOf(t[r]),1):this.clear():o(t[r],this.toBBox)},_initFormat:function(t){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(t[0])),this.compareMinY=new Function("a","b",n.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:38}],40:[function(t,n,r){var e=t("qs"),o=t("lodash.clonedeep"),i=t("lodash.defaults");n.exports=function(t){function n(){u(r())}function r(){return e.parse(c.location.hash.slice(1))}function a(t){var n=c.location.protocol+"//"+c.location.host+c.location.pathname+"#"+e.stringify(t);c.history.pushState(null,null,n)}var u,c;return t&&(u=t.followRoute,c=t.windowObject),c.onhashchange=n,{addToRoute:function(t){var n=i(o(t),r());a(n),u(n)},overwriteRouteEntirely:function(t){a(t),u(t)},routeFromHash:n,unpackEncodedRoute:function(t){var n=e.parse(decodeURIComponent(t));a(n),u(n)}}}},{"lodash.clonedeep":25,"lodash.defaults":27,qs:42}],41:[function(t,n,r){"use strict";var e=String.prototype.replace,o=/%20/g;n.exports={default:"RFC3986",formatters:{RFC1738:function(t){return e.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],42:[function(t,n,r){"use strict";var e=t("./stringify"),o=t("./parse"),i=t("./formats");n.exports={formats:i,parse:o,stringify:e}},{"./formats":41,"./parse":43,"./stringify":44}],43:[function(t,n,r){"use strict";var e=t("./utils"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:e.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,n,r){if(t){var e=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(e),u=a?e.slice(0,a.index):e,c=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var f=0;null!==(a=i.exec(e))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+e.slice(a.index)+"]"),function(t,n,r){for(var e=n,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a)i=(i=[]).concat(e);else{i=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[])[c]=e:i[u]=e}e=i}return e}(c,n,r)}};n.exports=function(t,n){var r=n?e.assign({},n):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||e.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,n){for(var r={},e=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=n.parameterLimit===1/0?void 0:n.parameterLimit,u=e.split(n.delimiter,a),c=0;c<u.length;++c){var f,l,s=u[c],h=s.indexOf("]="),p=-1===h?s.indexOf("="):h+1;-1===p?(f=n.decoder(s,i.decoder),l=n.strictNullHandling?null:""):(f=n.decoder(s.slice(0,p),i.decoder),l=n.decoder(s.slice(p+1),i.decoder)),o.call(r,f)?r[f]=[].concat(r[f]).concat(l):r[f]=l}return r}(t,r):t,c=r.plainObjects?Object.create(null):{},f=Object.keys(u),l=0;l<f.length;++l){var s=f[l],h=a(s,u[s],r);c=e.merge(c,h,r)}return e.compact(c)}},{"./utils":45}],44:[function(t,n,r){"use strict";var e=t("./utils"),o=t("./formats"),i={brackets:function(t){return t+"[]"},indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:e.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(n,r,o,i,a,c,f,l,s,h,p,d){var v=n;if("function"==typeof f)v=f(r,v);else if(v instanceof Date)v=h(v);else if(null===v){if(i)return c&&!d?c(r,u.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||e.isBuffer(v)){if(c){return[p(d?r:c(r,u.encoder))+"="+p(c(v,u.encoder))]}return[p(r)+"="+p(String(v))]}var y=[];if(void 0===v)return y;var g;if(Array.isArray(f))g=f;else{var m=Object.keys(v);g=l?m.sort(l):m}for(var b=0;b<g.length;++b){var _=g[b];a&&null===v[_]||(y=Array.isArray(v)?y.concat(t(v[_],o(r,_),o,i,a,c,f,l,s,h,p,d)):y.concat(t(v[_],r+(s?"."+_:"["+_+"]"),o,i,a,c,f,l,s,h,p,d)))}return y};n.exports=function(t,n){var r=t,a=n?e.assign({},n):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var f=void 0===a.delimiter?u.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:u.strictNullHandling,s="boolean"==typeof a.skipNulls?a.skipNulls:u.skipNulls,h="boolean"==typeof a.encode?a.encode:u.encode,p="function"==typeof a.encoder?a.encoder:u.encoder,d="function"==typeof a.sort?a.sort:null,v=void 0!==a.allowDots&&a.allowDots,y="function"==typeof a.serializeDate?a.serializeDate:u.serializeDate,g="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:u.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var m,b,_=o.formatters[a.format];"function"==typeof a.filter?r=(b=a.filter)("",r):Array.isArray(a.filter)&&(m=b=a.filter);var w=[];if("object"!=typeof r||null===r)return"";var x;x=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var j=i[x];m||(m=Object.keys(r)),d&&m.sort(d);for(var O=0;O<m.length;++O){var A=m[O];s&&null===r[A]||(w=w.concat(c(r[A],A,j,l,s,h?p:null,b,d,v,y,_,g)))}var S=w.join(f),M=!0===a.addQueryPrefix?"?":"";return S.length>0?M+S:""}},{"./formats":41,"./utils":45}],45:[function(t,n,r){"use strict";var e=Object.prototype.hasOwnProperty,o=function(){for(var t=[],n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t}();r.arrayToObject=function(t,n){for(var r=n&&n.plainObjects?Object.create(null):{},e=0;e<t.length;++e)void 0!==t[e]&&(r[e]=t[e]);return r},r.merge=function(t,n,o){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!e.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=r.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,i){e.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=r.merge(t[i],n,o):t.push(n):t[i]=n}),t):Object.keys(n).reduce(function(t,i){var a=n[i];return e.call(t,i)?t[i]=r.merge(t[i],a,o):t[i]=a,t},i)},r.assign=function(t,n){return Object.keys(n).reduce(function(t,r){return t[r]=n[r],t},t)},r.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(n){return t}},r.encode=function(t){if(0===t.length)return t;for(var n="string"==typeof t?t:String(t),r="",e=0;e<n.length;++e){var i=n.charCodeAt(e);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=n.charAt(e):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(e+=1,i=65536+((1023&i)<<10|1023&n.charCodeAt(e)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},r.compact=function(t){for(var n=[{obj:{o:t},prop:"o"}],r=[],e=0;e<n.length;++e)for(var o=n[e],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var c=a[u],f=i[c];"object"==typeof f&&null!==f&&-1===r.indexOf(f)&&(n.push({obj:i,prop:c}),r.push(f))}return function(t){for(var n;t.length;){var r=t.pop();if(n=r.obj[r.prop],Array.isArray(n)){for(var e=[],o=0;o<n.length;++o)void 0!==n[o]&&e.push(n[o]);r.obj[r.prop]=e}}return n}(n)},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},r.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],46:[function(t,n,r){function e(t,n){return t.dist<n.dist?-1:1}var o=t("lodash.pluck");n.exports=function(t,n,r="col",i="row"){var a=n.map(function(n,e){var o=n[r]-t[r],a=n[i]-t[i];return{index:e,dist:Math.sqrt(o*o+a*a)}}).sort(e);return o(a,"index")}},{"lodash.pluck":36}],47:[function(t,n,r){function e({imageContext:t,probable:n},r){!function({grid:t,imageContext:n}){function r(t){n.moveTo(t.start.x,t.start.y),t.curves.forEach(f)}var e=function(t){for(var n=[],r=0;r<t[0].length;++r){let e=[];for(let n=0;n<t.length;++n)e.push(t[n][r]);n.push(e)}return n}(t.rows),a=t.rows.map(u(i)(!1)),c=e.map(u(i)(!0)),f=u(o)(n);n.strokeStyle=t.color,n.beginPath(),a.forEach(r),c.forEach(r),n.stroke()}({grid:r,imageContext:t}),function({grid:t,imageContext:n}){n.fillStyle=t.color,n.beginPath(),c(t.rows,u(a)(n)),n.fill()}({grid:r,imageContext:t})}function o(t,n){t.bezierCurveTo.apply(t,n)}function i(t,n){for(var r=[],e=1;e<n.length;++e){let c=n[e],f=n[e-1],l=c.x-f.x;t&&(l=c.y-f.y);var o=f.x+l/2,i=f.y,a=c.x-l/2,u=c.y;t&&(o=f.x,i=f.y+l/2,a=c.x,u=c.y-l/2),r.push([o,i,a,u,c.x,c.y])}return{start:n[0],curves:r}}function a(t,n){t.moveTo(n.x,n.y),t.arc(n.x,n.y,4,0,2*Math.PI)}var u=t("lodash.curry"),c=t("../apply-to-points-in-rows");n.exports=e},{"../apply-to-points-in-rows":2,"lodash.curry":26}],48:[function(t,n,r){var e=document.getElementById("sprite-sheet");const o=32;n.exports=function({imageContext:t},n){t.drawImage(e,n.sprite.col*o,n.sprite.row*o,n.sprite.width,n.sprite.height,n.minX,n.minY,n.sprite.width,n.sprite.height)}},{}],49:[function(t,n,r){function e({gameState:t,onAdvance:n,probable:r}){var{boardWidth:e,boardHeight:d}=function(){var t=document.body.getBoundingClientRect().width;t>c&&(t=c);var n=t;return f.style("width",t),f.style("height",n),l.attr("width",t),l.attr("height",n),s.attr("width",t),s.attr("height",n),h.attr("width",t),h.attr("height",n),{boardWidth:t,boardHeight:n}}();p.clearRect(0,0,e,e),t.grids.forEach(i(a)({imageContext:p,probable:r})),t.souls.forEach(i(u)({imageContext:p})),h.on("click.input",null),h.on("click.input",function(){var r=o.event.layerX,e=o.event.layerY;n({gameState:t,recentClickX:r,recentClickY:e})})}var o=t("d3-selection"),i=t("lodash.curry"),a=t("./render-grid"),u=t("./render-soul");const c=800;var f=o.select("#canvases-container"),l=o.select("#image-board"),s=o.select("#ui-board"),h=o.select("#input-board"),p=l.node().getContext("2d",{alpha:!1});n.exports=e},{"./render-grid":47,"./render-soul":48,"d3-selection":11,"lodash.curry":26}],50:[function(t,n,r){n.exports={flattenRowsButKeepOrigins:function(t){for(var n=[],r=0;r<t.length;++r)for(var e=t[r],o=0;o<e.length;++o)n.push({rowIndex:r,colWithinRow:o,value:e[o]});return n},reconstituteIntoRows:function(t){var n=[];return t.forEach(function(t){var r=[];Array.isArray(n[t.rowIndex])?r=n[t.rowIndex]:n[t.rowIndex]=r,r[t.colWithinRow]=t.value}),n}}},{}]},{},[1]);