!function t(n,r,e){function o(u,a){if(!r[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=r[u]={exports:{}};n[u][0].call(s.exports,function(t){var r=n[u][1][t];return o(r||t)},s,s.exports,t,n,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(t,n,r){function e({gameState:t,recentClickX:n,recentClickY:r}){a({gameState:t,recentClickX:n,recentClickY:r}),c({gameState:t,onAdvance:e,probable:f})}function o(t,n,r,e,o){u(o)}var i=t("route-state"),u=t("handle-error-web"),a=t("./flows/update"),c=t("./renderers/render"),f=t("probable"),s={grids:t("./defs/grid-defs"),souls:t("./defs/soul-defs")},l=i({followRoute:function(t){e({gameState:s})},windowObject:window});window.onerror=o,l.routeFromHash()},{"./defs/grid-defs":3,"./defs/soul-defs":4,"./flows/update":7,"./renderers/render":49,"handle-error-web":12,probable:37,"route-state":40}],2:[function(t,n,r){n.exports=function(t,n){for(var r=0;r<t.length;++r){let o=t[r];for(var e=0;e<o.length;++e)n(o[e])}}},{}],3:[function(t,n,r){n.exports=[{id:"basic",xSpace:64,ySpace:64,xOffset:-32,yOffset:-32,width:800,height:800,color:"blue"},{id:"other",xSpace:96,ySpace:32,xOffset:-16,yOffset:0,width:600,height:800,color:"red",effects:[{name:"gravityWarp",centers:[[300,300]],strength:16,decayDist:288},{name:"gravityWarp",centers:[[500,100],[400,700]],strength:64,decayDist:192}]}]},{}],4:[function(t,n,r){n.exports=[{id:"player",grid:{id:"basic",col:4,row:5},sprite:{col:2,row:0,width:32,height:32,hitRadius:48}},{id:"doof",grid:{id:"other",col:4,row:5},sprite:{col:1,row:0,width:32,height:32,hitRadius:100}}]},{}],5:[function(t,n,r){function e(t){t.minX=t.x-u,t.maxX=t.x+u,t.minY=t.y-u,t.maxY=t.y+u}var o=t("../grid-effects/grid-effects"),i=t("../apply-to-points-in-rows");const u=10;n.exports=function(t,n){function r(t){n.rows=o[t.name](t,n.rows)}n.rows||(n.rows=function(t){for(var n=[],r=t.yOffset;r<=t.height;r+=t.ySpace){let o=[];for(var e=t.xOffset;e<=t.width;e+=t.xSpace)o.push({x:e,y:r,gridId:t.id});n.push(o)}return n}(n),i(n.rows,e)),n.effects&&(i(n.rows,t.remove.bind(t)),n.effects.forEach(r),i(n.rows,e),i(n.rows,t.insert.bind(t)))}},{"../apply-to-points-in-rows":2,"../grid-effects/grid-effects":9}],6:[function(t,n,r){var e=t("lodash.findwhere");n.exports=function(t,n,r){var o=e(t,{id:r.grid.id});if(o){var i=o.rows[r.grid.row][r.grid.col];r.minX=i.x-r.sprite.width/2,r.maxX=i.x+r.sprite.width/2,r.minY=i.y-r.sprite.height/2,r.maxY=i.y+r.sprite.height/2,n.remove(r),n.insert(r)}else console.log("Could not find grid",r.grid.id,"for",r.id,"!")}},{"lodash.findwhere":29}],7:[function(t,n,r){var e=t("lodash.curry"),o=t("./update-grid"),i=t("./update-soul");const u=20;var a=t("rbush")(9),c=0;n.exports=function({gameState:t,recentClickX:n,recentClickY:r}){if(!isNaN(n)&&!isNaN(r)){var f=a.search({minX:n-u,maxX:n+u,minY:r-u,maxY:r+u});console.log("thingsHit",f)}0===c&&t.grids.forEach(e(o)(a)),t.souls.forEach(e(i)(t.grids,a)),c+=1}},{"./update-grid":5,"./update-soul":6,"lodash.curry":26,rbush:39}],8:[function(t,n,r){function e({points:t,strength:n,decayDist:r},e){for(var o=a({x:e[0],y:e[1]},u(t,"value"),"x","y"),i=0;i<o.length;++i){let u=t[o[i]].value,a=function(t){return[t.x,t.y]}(u),h=c.getVectorMagnitude(c.subtractPairs(a,e));if(h>r)break;var f=n*(r-h)/r,s=c.changeVectorMagnitude(c.subtractPairs(e,a),f),l=c.addPairs(a,s);u.x=l[0],u.y=l[1]}}var o=t("../row-ops"),i=t("lodash.curry"),u=t("lodash.pluck"),a=t("sort-cells-by-dist"),c=t("basic-2d-math");n.exports=function({centers:t,strength:n,decayDist:r},u){var a=o.flattenRowsButKeepOrigins(u);return t.forEach(i(e)({points:a,strength:n,decayDist:r})),o.reconstituteIntoRows(a)}},{"../row-ops":50,"basic-2d-math":10,"lodash.curry":26,"lodash.pluck":36,"sort-cells-by-dist":46}],9:[function(t,n,r){n.exports={gravityWarp:t("./gravity-warp")}},{"./gravity-warp":8}],10:[function(t,n,r){function e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,n){return[t[0]*n,t[1]*n]}n.exports={getVectorMagnitude:e,addPairs:function(t,n){return[t[0]+n[0],t[1]+n[1]]},subtractPairs:function(t,n){return[t[0]-n[0],t[1]-n[1]]},multiplyPairBySingleValue:o,changeVectorMagnitude:function(t,n){return o(t,n/e(t))}}},{}],11:[function(t,n,r){!function(t,e){"object"==typeof r&&void 0!==n?e(r):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t){var n=t+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=t.slice(0,r))&&(t=t.slice(r+1)),C.hasOwnProperty(n)?{space:C[n],local:t}:t}function r(t){var r=n(t);return(r.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===B&&n.documentElement.namespaceURI===B?n.createElement(t):n.createElementNS(r,t)}})(r)}function e(t){return null==t?function(){}:function(){return this.querySelector(t)}}function o(t){return null==t?function(){return[]}:function(){return this.querySelectorAll(t)}}function i(t){return new Array(t.length)}function u(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function a(t,n){if(!t)return d=new Array(this.size()),s=-1,this.each(function(t){d[++s]=t}),d;var r=n?function(t,n,r,e,o,i,a){var c,f,s,l={},h=n.length,p=i.length,d=new Array(h);for(c=0;c<h;++c)(f=n[c])&&(d[c]=s=F+a.call(f,f.__data__,c,n),s in l?o[c]=f:l[s]=f);for(c=0;c<p;++c)(f=l[s=F+a.call(t,i[c],c,i)])?(e[c]=f,f.__data__=i[c],l[s]=null):r[c]=new u(t,i[c]);for(c=0;c<h;++c)(f=n[c])&&l[d[c]]===f&&(o[c]=f)}:function(t,n,r,e,o,i){for(var a,c=0,f=n.length,s=i.length;c<s;++c)(a=n[c])?(a.__data__=i[c],e[c]=a):r[c]=new u(t,i[c]);for(;c<f;++c)(a=n[c])&&(o[c]=a)},e=this._parents,o=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var i=o.length,a=new Array(i),c=new Array(i),f=new Array(i),s=0;s<i;++s){var l=e[s],h=o[s],p=h.length,d=t.call(l,l&&l.__data__,s,e),v=d.length,y=c[s]=new Array(v),g=a[s]=new Array(v);r(l,h,y,g,f[s]=new Array(p),d,n);for(var m,b,_=0,w=0;_<v;++_)if(m=y[_]){for(_>=w&&(w=_+1);!(b=g[w])&&++w<v;);m._next=b||null}}return a=new A(a,e),a._enter=c,a._exit=f,a}function c(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function f(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function s(t,n){return t.style.getPropertyValue(n)||f(t).getComputedStyle(t,null).getPropertyValue(n)}function l(t){return t.trim().split(/^|\s+/)}function h(t){return t.classList||new p(t)}function p(t){this._node=t,this._names=l(t.getAttribute("class")||"")}function d(t,n){for(var r=h(t),e=-1,o=n.length;++e<o;)r.add(n[e])}function v(t,n){for(var r=h(t),e=-1,o=n.length;++e<o;)r.remove(n[e])}function y(t,n){var r=l(t+"");if(arguments.length<2){for(var e=h(this.node()),o=-1,i=r.length;++o<i;)if(!e.contains(r[o]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?d:v)(this,t)}}:n?function(t){return function(){d(this,t)}}:function(t){return function(){v(this,t)}})(r,n))}function g(){this.nextSibling&&this.parentNode.appendChild(this)}function m(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function b(){var t=this.parentNode;t&&t.removeChild(this)}function _(n,r,e){return function(o){var i=t.event;t.event=o;try{n.call(this,this.__data__,r,e)}finally{t.event=i}}}function w(t,n,r){var e=D.hasOwnProperty(t.type)?function(t,n,r){return t=_(t,n,r),function(n){var r=n.relatedTarget;r&&(r===this||8&r.compareDocumentPosition(this))||t.call(this,n)}}:_;return function(o,i,u){var a,c=this.__on,f=e(n,i,u);if(c)for(var s=0,l=c.length;s<l;++s)if((a=c[s]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=f,a.capture=r),void(a.value=n);this.addEventListener(t.type,f,r),a={type:t.type,name:t.name,value:n,listener:f,capture:r},c?c.push(a):this.__on=[a]}}function x(t,n,r){var e=f(t),o=e.CustomEvent;"function"==typeof o?o=new o(n,r):(o=e.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function j(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return x(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return x(this,t,n)}})(t,n))}function A(t,n){this._groups=t,this._parents=n}function O(){return new A([[document.documentElement]],$)}function S(t){return"string"==typeof t?new A([[document.querySelector(t)]],[document.documentElement]):new A([[t]],$)}function M(){return new E}function E(){this._="@"+(++I).toString(36)}function k(){for(var n,r=t.event;n=r.sourceEvent;)r=n;return r}function P(t,n){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var e=r.createSVGPoint();return e.x=n.clientX,e.y=n.clientY,e=e.matrixTransform(t.getScreenCTM().inverse()),[e.x,e.y]}var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}var B="http://www.w3.org/1999/xhtml",C={svg:"http://www.w3.org/2000/svg",xhtml:B,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Y=document.documentElement;if(!Y.matches){var R=Y.webkitMatchesSelector||Y.msMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector;X=function(t){return function(){return R.call(this,t)}}}}var N=X;u.prototype={constructor:u,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var F="$";p.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var D={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(D={mouseenter:"mouseover",mouseleave:"mouseout"})}var $=[null];A.prototype=O.prototype={constructor:A,select:function(t){"function"!=typeof t&&(t=e(t));for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i)for(var u,a,c=n[i],f=c.length,s=o[i]=new Array(f),l=0;l<f;++l)(u=c[l])&&(a=t.call(u,u.__data__,l,c))&&("__data__"in u&&(a.__data__=u.__data__),s[l]=a);return new A(o,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=o(t));for(var n=this._groups,r=n.length,e=[],i=[],u=0;u<r;++u)for(var a,c=n[u],f=c.length,s=0;s<f;++s)(a=c[s])&&(e.push(t.call(a,a.__data__,s,c)),i.push(a));return new A(e,i)},filter:function(t){"function"!=typeof t&&(t=N(t));for(var n=this._groups,r=n.length,e=new Array(r),o=0;o<r;++o)for(var i,u=n[o],a=u.length,c=e[o]=[],f=0;f<a;++f)(i=u[f])&&t.call(i,i.__data__,f,u)&&c.push(i);return new A(e,this._parents)},data:a,enter:function(){return new A(this._enter||this._groups.map(i),this._parents)},exit:function(){return new A(this._exit||this._groups.map(i),this._parents)},merge:function(t){for(var n=this._groups,r=t._groups,e=n.length,o=r.length,i=Math.min(e,o),u=new Array(e),a=0;a<i;++a)for(var c,f=n[a],s=r[a],l=f.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=f[p]||s[p])&&(h[p]=c);for(;a<e;++a)u[a]=n[a];return new A(u,this._parents)},order:function(){for(var t=this._groups,n=-1,r=t.length;++n<r;)for(var e,o=t[n],i=o.length-1,u=o[i];--i>=0;)(e=o[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},sort:function(t){function n(n,r){return n&&r?t(n.__data__,r.__data__):!n-!r}t||(t=c);for(var r=this._groups,e=r.length,o=new Array(e),i=0;i<e;++i){for(var u,a=r[i],f=a.length,s=o[i]=new Array(f),l=0;l<f;++l)(u=a[l])&&(s[l]=u);s.sort(n)}return new A(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var e=t[n],o=0,i=e.length;o<i;++o){var u=e[o];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,r=0,e=n.length;r<e;++r)for(var o,i=n[r],u=0,a=i.length;u<a;++u)(o=i[u])&&t.call(o,o.__data__,u,i);return this},attr:function(t,r){var e=n(t);if(arguments.length<2){var o=this.node();return e.local?o.getAttributeNS(e.space,e.local):o.getAttribute(e)}return this.each((null==r?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof r?e.local?function(t,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}:function(t,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,r))},style:function(t,n,r){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(t,n,r){return function(){this.style.setProperty(t,n,r)}})(t,n,null==r?"":r)):s(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var r=n.apply(this,arguments);null==r?delete this[t]:this[t]=r}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:y,text:function(t){return arguments.length?this.each(null==t?function(){this.textContent=""}:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?function(){this.innerHTML=""}:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(g)},lower:function(){return this.each(m)},append:function(t){var n="function"==typeof t?t:r(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var o="function"==typeof t?t:r(t),i=null==n?function(){return null}:"function"==typeof n?n:e(n);return this.select(function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(b)},clone:function(t){return this.select(t?function(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}:function(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)})},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,r){var e,o,i=(t+"").trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}}),u=i.length;if(!(arguments.length<2)){for(a=n?w:function(t){return function(){var n=this.__on;if(n){for(var r,e=0,o=-1,i=n.length;e<i;++e)r=n[e],t.type&&r.type!==t.type||r.name!==t.name?n[++o]=r:this.removeEventListener(r.type,r.listener,r.capture);++o?n.length=o:delete this.__on}}},null==r&&(r=!1),e=0;e<u;++e)this.each(a(i[e],n,r));return this}var a=this.node().__on;if(a)for(var c,f=0,s=a.length;f<s;++f)for(e=0,c=a[f];e<u;++e)if((o=i[e]).type===c.type&&o.name===c.name)return c.value},dispatch:j};var I=0;E.prototype=M.prototype={constructor:E,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return S(r(t).call(document.documentElement))},t.creator=r,t.local=M,t.matcher=N,t.mouse=function(t){var n=k();return n.changedTouches&&(n=n.changedTouches[0]),P(t,n)},t.namespace=n,t.namespaces=C,t.clientPoint=P,t.select=S,t.selectAll=function(t){return"string"==typeof t?new A([document.querySelectorAll(t)],[document.documentElement]):new A([null==t?[]:t],$)},t.selection=O,t.selector=e,t.selectorAll=o,t.style=s,t.touch=function(t,n,r){arguments.length<3&&(r=n,n=k().changedTouches);for(var e,o=0,i=n?n.length:0;o<i;++o)if((e=n[o]).identifier===r)return P(t,e);return null},t.touches=function(t,n){null==n&&(n=k().touches);for(var r=0,e=n?n.length:0,o=new Array(e);r<e;++r)o[r]=P(t,n[r]);return o},t.window=f,t.customEvent=function(n,r,e,o){var i=t.event;n.sourceEvent=t.event,t.event=n;try{return r.apply(e,o)}finally{t.event=i}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],12:[function(t,n,r){function e(t){if(t){console.error(t,t.stack);var n="";t.name&&(n+=t.name+": "),n+=t.message,t.stack&&(n+=" | "+t.stack.toString()),function(t){var n=document.getElementById("status-message");n.textContent=t,n.classList.remove("hidden")}(n)}}n.exports=e},{}],13:[function(t,n,r){n.exports=function(t,n){for(var r=-1,e=t.length,o=Array(e);++r<e;)o[r]=n(t[r],r,t);return o}},{}],14:[function(t,n,r){function e(t,n,r){var e=typeof t;return"function"==e?void 0===n?t:h(t,n,r):null==t?s:"object"==e?function(t){var n=function(t){var n=d(t),r=n.length;for(;r--;)n[r][2]=u(n[r][1]);return n}(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null!=t&&(t[r]===e&&(void 0!==e||r in a(t)))}}return function(t){return function(t,n,r){var e=n.length,o=e,i=!r;if(null==t)return!o;t=a(t);for(;e--;){var u=n[e];if(i&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++e<o;){var c=(u=n[e])[0],f=t[c],s=u[1];if(i&&u[2]){if(void 0===f&&!(c in t))return!1}else{var h=r?r(f,s,c):void 0;if(!(void 0===h?l(s,f,r,!0):h))return!1}}return!0}(t,n)}}(t):void 0===n?function(t){return i(t)?function(t){return function(n){return null==n?void 0:n[t]}}(t):function(t){var n=t+"";return t=c(t),function(r){return o(r,t,n)}}(t)}(t):function(t,n){var r=p(t),e=i(t)&&u(n),f=t+"";return t=c(t),function(i){if(null==i)return!1;var u=f;if(i=a(i),(r||!e)&&!(u in i)){if(null==(i=1==t.length?i:o(i,function(t,n,r){var e=-1,o=t.length;(n=null==n?0:+n||0)<0&&(n=-n>o?0:o+n),(r=void 0===r||r>o?o:+r||0)<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(o);++e<o;)i[e]=t[e+n];return i}(t,0,-1))))return!1;u=function(t){var n=t?t.length:0;return n?t[n-1]:void 0}(t),i=a(i)}return i[u]===n?void 0!==n||u in i:l(n,i[u],void 0,!0)}}(t,n)}function o(t,n,r){if(null!=t){void 0!==r&&r in a(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&e<o;)t=t[n[e++]];return e&&e==o?t:void 0}}function i(t,n){var r=typeof t;if("string"==r&&y.test(t)||"number"==r)return!0;if(p(t))return!1;return!v.test(t)||null!=n&&t in a(n)}function u(t){return t==t&&!f(t)}function a(t){return f(t)?t:Object(t)}function c(t){if(p(t))return t;var n=[];return function(t){return null==t?"":t+""}(t).replace(g,function(t,r,e,o){n.push(e?o.replace(m,"$1"):r||t)}),n}function f(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function s(t){return t}var l=t("lodash._baseisequal"),h=t("lodash._bindcallback"),p=t("lodash.isarray"),d=t("lodash.pairs"),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,y=/^\w*$/,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,m=/\\(\\)?/g;n.exports=e},{"lodash._baseisequal":19,"lodash._bindcallback":22,"lodash.isarray":31,"lodash.pairs":35}],15:[function(t,n,r){function e(t,n){return function(r,e){var i=r?f(r):0;if(!function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}(i))return t(r,e);for(var a=n?i:-1,c=o(r);(n?a--:++a<i)&&!1!==e(c[a],a,c););return r}}function o(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}var i=t("lodash.keys"),u=9007199254740991,a=e(function(t,n){return c(t,n,i)}),c=function(t){return function(n,r,e){for(var i=o(n),u=e(n),a=u.length,c=t?a:-1;t?c--:++c<a;){var f=u[c];if(!1===r(i[f],f,i))break}return n}}(),f=function(t){return function(n){return null==n?void 0:n[t]}}("length");n.exports=a},{"lodash.keys":33}],16:[function(t,n,r){n.exports=function(t,n,r,e){var o;return r(t,function(t,r,i){if(n(t,r,i))return o=e?r:t,!1}),o}},{}],17:[function(t,n,r){n.exports=function(t,n,r){for(var e=t.length,o=r?e:-1;r?o--:++o<e;)if(n(t[o],o,t))return o;return-1}},{}],18:[function(t,n,r){function e(t,n,r){if(null!=t){void 0!==r&&r in function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&e<o;)t=t[n[e++]];return e&&e==o?t:void 0}}n.exports=e},{}],19:[function(t,n,r){function e(t,n){for(var r=-1,e=t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}function o(t,n,r,g,_,w){return t===n||(null==t||null==n||!function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&!function(t){return!!t&&"object"==typeof t}(n)?t!=t&&n!=n:function(t,n,r,o,g,_,w){var x=i(t),j=i(n),A=f,O=f;x||((A=b.call(t))==c?A=d:A!=d&&(x=u(t)));j||((O=b.call(n))==c?O=d:O!=d&&(j=u(n)));var S=A==d,M=O==d,E=A==O;if(E&&!x&&!S)return function(t,n,r){switch(r){case s:case l:return+t==+n;case h:return t.name==n.name&&t.message==n.message;case p:return t!=+t?n!=+n:t==+n;case v:case y:return t==n+""}return!1}(t,n,A);if(!g){var k=S&&m.call(t,"__wrapped__"),P=M&&m.call(n,"__wrapped__");if(k||P)return r(k?t.value():t,P?n.value():n,o,g,_,w)}if(!E)return!1;_||(_=[]),w||(w=[]);var B=_.length;for(;B--;)if(_[B]==t)return w[B]==n;_.push(t),w.push(n);var C=(x?function(t,n,r,o,i,u,a){var c=-1,f=t.length,s=n.length;if(f!=s&&!(i&&s>f))return!1;for(;++c<f;){var l=t[c],h=n[c],p=o?o(i?h:l,i?l:h,c):void 0;if(void 0!==p){if(p)continue;return!1}if(i){if(!e(n,function(t){return l===t||r(l,t,o,i,u,a)}))return!1}else if(l!==h&&!r(l,h,o,i,u,a))return!1}return!0}:function(t,n,r,e,o,i,u){var c=a(t),f=c.length,s=a(n).length;if(f!=s&&!o)return!1;var l=f;for(;l--;){var h=c[l];if(!(o?h in n:m.call(n,h)))return!1}var p=o;for(;++l<f;){h=c[l];var d=t[h],v=n[h],y=e?e(o?v:d,o?d:v,h):void 0;if(!(void 0===y?r(d,v,e,o,i,u):y))return!1;p||(p="constructor"==h)}if(!p){var g=t.constructor,b=n.constructor;if(g!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b))return!1}return!0})(t,n,r,o,g,_,w);return _.pop(),w.pop(),C}(t,n,o,r,g,_,w))}var i=t("lodash.isarray"),u=t("lodash.istypedarray"),a=t("lodash.keys"),c="[object Arguments]",f="[object Array]",s="[object Boolean]",l="[object Date]",h="[object Error]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object String]",g=Object.prototype,m=g.hasOwnProperty,b=g.toString;n.exports=o},{"lodash.isarray":31,"lodash.istypedarray":32,"lodash.keys":33}],20:[function(t,n,r){function e(t,n,r){var e=n.length,i=e,u=!r;if(null==t)return!i;for(t=function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t);e--;){var a=n[e];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++e<i;){var c=(a=n[e])[0],f=t[c],s=a[1];if(u&&a[2]){if(void 0===f&&!(c in t))return!1}else{var l=r?r(f,s,c):void 0;if(!(void 0===l?o(s,f,r,!0):l))return!1}}return!0}var o=t("lodash._baseisequal");n.exports=e},{"lodash._baseisequal":19}],21:[function(t,n,r){function e(t){var n=function(t){var n=u(t),r=n.length;for(;r--;)n[r][2]=function(t){return t==t&&!o(t)}(n[r][1]);return n}(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null!=t&&(t[r]===e&&(void 0!==e||r in function(t){return o(t)?t:Object(t)}(t)))}}return function(t){return i(t,n)}}function o(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var i=t("lodash._baseismatch"),u=t("lodash.pairs");n.exports=e},{"lodash._baseismatch":20,"lodash.pairs":35}],22:[function(t,n,r){function e(t){return t}n.exports=function(t,n,r){if("function"!=typeof t)return e;if(void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 3:return function(r,e,o){return t.call(n,r,e,o)};case 4:return function(r,e,o,i){return t.call(n,r,e,o,i)};case 5:return function(r,e,o,i,u){return t.call(n,r,e,o,i,u)}}return function(){return t.apply(n,arguments)}}},{}],23:[function(t,n,r){function e(t,n){var r=null==t?void 0:t[n];return function(t){if(null==t)return!1;if(function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&f.call(t)==o}(t))return s.test(a.call(t));return function(t){return!!t&&"object"==typeof t}(t)&&i.test(t)}(r)?r:void 0}var o="[object Function]",i=/^\[object .+?Constructor\]$/,u=Object.prototype,a=Function.prototype.toString,c=u.hasOwnProperty,f=u.toString,s=RegExp("^"+a.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=e},{}],24:[function(t,n,r){var e=t("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,i=/\\(\\)?/g;n.exports=function(t){if(e(t))return t;var n=[];return function(t){return null==t?"":t+""}(t).replace(o,function(t,r,e,o){n.push(e?o.replace(i,"$1"):r||t)}),n}},{"lodash.isarray":31}],25:[function(t,n,r){(function(t){function e(t,n){return t.set(n[0],n[1]),t}function o(t,n){return t.add(n),t}function i(t,n,r,e){var o=-1,i=t?t.length:0;for(e&&i&&(r=t[++o]);++o<i;)r=n(r,t[o],o,t);return r}function u(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}function a(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function c(t,n){return function(r){return t(n(r))}}function f(t){var n=-1,r=Array(t.size);return t.forEach(function(t){r[++n]=t}),r}function s(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function l(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function h(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function p(t){this.__data__=new l(t)}function d(t,n){var r=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&S(t)}(t)&&mt.call(t,"callee")&&(!St.call(t,"callee")||bt.call(t)==X)}(t)?function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}(t.length,String):[],e=r.length,o=!!e;for(var i in t)!n&&!mt.call(t,i)||o&&("length"==i||function(t,n){return!!(n=null==n?C:n)&&("number"==typeof t||ot.test(t))&&t>-1&&t%1==0&&t<n}(i,e))||r.push(i);return r}function v(t,n,r){var e=t[n];mt.call(t,n)&&O(e,r)&&(void 0!==r||n in t)||(t[n]=r)}function y(t,n){for(var r=t.length;r--;)if(O(t[r][0],n))return r;return-1}function g(t,n,r,c,s,l,h){var d;if(c&&(d=l?c(t,s,l,h):c(t)),void 0!==d)return d;if(!E(t))return t;var y=Vt(t);if(y){if(d=function(t){var n=t.length,r=t.constructor(n);n&&"string"==typeof t[0]&&mt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!n)return function(t,n){var r=-1,e=t.length;n||(n=Array(e));for(;++r<e;)n[r]=t[r];return n}(t,d)}else{var m=Ut(t),w=m==N||m==F;if(zt(t))return function(t,n){if(n)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,n);if(m==I||m==X||w&&!l){if(u(t))return l?t:{};if(d=function(t){return"function"!=typeof t.constructor||j(t)?{}:function(t){return E(t)?Ot(t):{}}(At(t))}(w?{}:t),!n)return function(t,n){return _(t,Ht(t),n)}(t,function(t,n){return t&&_(n,k(n),t)}(d,t))}else{if(!it[m])return l?t:{};d=function(t,n,r,u){var c=t.constructor;switch(n){case U:return b(t);case Y:case R:return new c(+t);case V:return function(t,n){var r=n?b(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,u);case z:case W:case G:case Q:case K:case J:case Z:case tt:case nt:return function(t,n){var r=n?b(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,u);case D:return function(t,n,r){return i(n?r(a(t),!0):a(t),e,new t.constructor)}(t,u,r);case $:case q:return new c(t);case T:return function(t){var n=new t.constructor(t.source,rt.exec(t));return n.lastIndex=t.lastIndex,n}(t);case L:return function(t,n,r){return i(n?r(f(t),!0):f(t),o,new t.constructor)}(t,u,r);case H:return function(t){return qt?Object(qt.call(t)):{}}(t)}}(t,m,g,n)}}h||(h=new p);var x=h.get(t);if(x)return x;if(h.set(t,d),!y)var A=r?function(t){return function(t,n,r){var e=n(t);return Vt(t)?e:function(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t}(e,r(t))}(t,k,Ht)}(t):k(t);return function(t,n){for(var r=-1,e=t?t.length:0;++r<e&&!1!==n(t[r],r,t););}(A||t,function(e,o){A&&(e=t[o=e]),v(d,o,g(e,n,r,c,o,t,h))}),d}function m(t){if(!E(t)||function(t){return!!yt&&yt in t}(t))return!1;return(M(t)||u(t)?_t:et).test(A(t))}function b(t){var n=new t.constructor(t.byteLength);return new jt(n).set(new jt(t)),n}function _(t,n,r,e){r||(r={});for(var o=-1,i=n.length;++o<i;){var u=n[o],a=e?e(r[u],t[u],u,r,t):void 0;v(r,u,void 0===a?t[u]:a)}return r}function w(t,n){var r=t.__data__;return function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?r["string"==typeof n?"string":"hash"]:r.map}function x(t,n){var r=function(t,n){return null==t?void 0:t[n]}(t,n);return m(r)?r:void 0}function j(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||dt)}function A(t){if(null!=t){try{return gt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function O(t,n){return t===n||t!=t&&n!=n}function S(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=C}(t.length)&&!M(t)}function M(t){var n=E(t)?bt.call(t):"";return n==N||n==F}function E(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function k(t){return S(t)?d(t):function(t){if(!j(t))return Pt(t);var n=[];for(var r in Object(t))mt.call(t,r)&&"constructor"!=r&&n.push(r);return n}(t)}var P=200,B="__lodash_hash_undefined__",C=9007199254740991,X="[object Arguments]",Y="[object Boolean]",R="[object Date]",N="[object Function]",F="[object GeneratorFunction]",D="[object Map]",$="[object Number]",I="[object Object]",T="[object RegExp]",L="[object Set]",q="[object String]",H="[object Symbol]",U="[object ArrayBuffer]",V="[object DataView]",z="[object Float32Array]",W="[object Float64Array]",G="[object Int8Array]",Q="[object Int16Array]",K="[object Int32Array]",J="[object Uint8Array]",Z="[object Uint8ClampedArray]",tt="[object Uint16Array]",nt="[object Uint32Array]",rt=/\w*$/,et=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,it={};it[X]=it["[object Array]"]=it[U]=it[V]=it[Y]=it[R]=it[z]=it[W]=it[G]=it[Q]=it[K]=it[D]=it[$]=it[I]=it[T]=it[L]=it[q]=it[H]=it[J]=it[Z]=it[tt]=it[nt]=!0,it["[object Error]"]=it[N]=it["[object WeakMap]"]=!1;var ut="object"==typeof t&&t&&t.Object===Object&&t,at="object"==typeof self&&self&&self.Object===Object&&self,ct=ut||at||Function("return this")(),ft="object"==typeof r&&r&&!r.nodeType&&r,st=ft&&"object"==typeof n&&n&&!n.nodeType&&n,lt=st&&st.exports===ft,ht=Array.prototype,pt=Function.prototype,dt=Object.prototype,vt=ct["__core-js_shared__"],yt=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=pt.toString,mt=dt.hasOwnProperty,bt=dt.toString,_t=RegExp("^"+gt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=lt?ct.Buffer:void 0,xt=ct.Symbol,jt=ct.Uint8Array,At=c(Object.getPrototypeOf,Object),Ot=Object.create,St=dt.propertyIsEnumerable,Mt=ht.splice,Et=Object.getOwnPropertySymbols,kt=wt?wt.isBuffer:void 0,Pt=c(Object.keys,Object),Bt=x(ct,"DataView"),Ct=x(ct,"Map"),Xt=x(ct,"Promise"),Yt=x(ct,"Set"),Rt=x(ct,"WeakMap"),Nt=x(Object,"create"),Ft=A(Bt),Dt=A(Ct),$t=A(Xt),It=A(Yt),Tt=A(Rt),Lt=xt?xt.prototype:void 0,qt=Lt?Lt.valueOf:void 0;s.prototype.clear=function(){this.__data__=Nt?Nt(null):{}},s.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},s.prototype.get=function(t){var n=this.__data__;if(Nt){var r=n[t];return r===B?void 0:r}return mt.call(n,t)?n[t]:void 0},s.prototype.has=function(t){var n=this.__data__;return Nt?void 0!==n[t]:mt.call(n,t)},s.prototype.set=function(t,n){return this.__data__[t]=Nt&&void 0===n?B:n,this},l.prototype.clear=function(){this.__data__=[]},l.prototype.delete=function(t){var n=this.__data__,r=y(n,t);return!(r<0||(r==n.length-1?n.pop():Mt.call(n,r,1),0))},l.prototype.get=function(t){var n=this.__data__,r=y(n,t);return r<0?void 0:n[r][1]},l.prototype.has=function(t){return y(this.__data__,t)>-1},l.prototype.set=function(t,n){var r=this.__data__,e=y(r,t);return e<0?r.push([t,n]):r[e][1]=n,this},h.prototype.clear=function(){this.__data__={hash:new s,map:new(Ct||l),string:new s}},h.prototype.delete=function(t){return w(this,t).delete(t)},h.prototype.get=function(t){return w(this,t).get(t)},h.prototype.has=function(t){return w(this,t).has(t)},h.prototype.set=function(t,n){return w(this,t).set(t,n),this},p.prototype.clear=function(){this.__data__=new l},p.prototype.delete=function(t){return this.__data__.delete(t)},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,n){var r=this.__data__;if(r instanceof l){var e=r.__data__;if(!Ct||e.length<P-1)return e.push([t,n]),this;r=this.__data__=new h(e)}return r.set(t,n),this};var Ht=Et?c(Et,Object):function(){return[]},Ut=function(t){return bt.call(t)};(Bt&&Ut(new Bt(new ArrayBuffer(1)))!=V||Ct&&Ut(new Ct)!=D||Xt&&"[object Promise]"!=Ut(Xt.resolve())||Yt&&Ut(new Yt)!=L||Rt&&"[object WeakMap]"!=Ut(new Rt))&&(Ut=function(t){var n=bt.call(t),r=n==I?t.constructor:void 0,e=r?A(r):void 0;if(e)switch(e){case Ft:return V;case Dt:return D;case $t:return"[object Promise]";case It:return L;case Tt:return"[object WeakMap]"}return n});var Vt=Array.isArray,zt=kt||function(){return!1};n.exports=function(t){return g(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(t,n,r){(function(t){function r(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function e(t,n){return!!(t?t.length:0)&&function(t,n,r){if(n!=n)return function(t,n,r,e){var o=t.length,i=r+(e?1:-1);for(;e?i--:++i<o;)if(n(t[i],i,t))return i;return-1}(t,o,r);var e=r-1,i=t.length;for(;++e<i;)if(t[e]===n)return e;return-1}(t,n,0)>-1}function o(t){return t!=t}function i(t,n){for(var r=-1,e=t.length,o=0,i=[];++r<e;){var u=t[r];u!==n&&u!==b||(t[r]=b,i[o++]=r)}return i}function u(t){if(!v(t)||function(t){return!!Z&&Z in t}(t))return!1;return(function(t){var n=v(t)?rt.call(t):"";return n==Y||n==R}(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t)?et:q).test(function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function a(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=function(t){return v(t)?ot(t):{}}(t.prototype),e=t.apply(r,n);return v(e)?e:r}}function c(t,n,r,e,o,u,s,h,d,v){function y(){for(var _=arguments.length,w=Array(_),j=_;j--;)w[j]=arguments[j];if(x)var A=l(y),M=function(t,n){for(var r=t.length,e=0;r--;)t[r]===n&&e++;return e}(w,A);if(e&&(w=function(t,n,r,e){for(var o=-1,i=t.length,u=r.length,a=-1,c=n.length,f=it(i-u,0),s=Array(c+f),l=!e;++a<c;)s[a]=n[a];for(;++o<u;)(l||o<i)&&(s[r[o]]=t[o]);for(;f--;)s[a++]=t[o++];return s}(w,e,o,x)),u&&(w=function(t,n,r,e){for(var o=-1,i=t.length,u=-1,a=r.length,c=-1,f=n.length,s=it(i-a,0),l=Array(s+f),h=!e;++o<s;)l[o]=t[o];for(var p=o;++c<f;)l[p+c]=n[c];for(;++u<a;)(h||o<i)&&(l[p+r[u]]=t[o++]);return l}(w,u,s,x)),_-=M,x&&_<v){var E=i(w,A);return f(t,n,c,y.placeholder,r,w,E,h,d,v-_)}var k=m?r:this,P=b?k[t]:t;return _=w.length,h?w=function(t,n){var r=t.length,e=ut(n.length,r),o=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}(t);for(;e--;){var i=n[e];t[e]=p(i,r)?o[i]:void 0}return t}(w,h):O&&_>1&&w.reverse(),g&&d<_&&(w.length=d),this&&this!==G&&this instanceof y&&(P=S||a(P)),P.apply(k,w)}var g=n&M,m=n&_,b=n&w,x=n&(j|A),O=n&E,S=b?void 0:a(t);return y}function f(t,n,r,e,o,i,u,a,c,f){var s=n&j;n|=s?O:S,(n&=~(s?S:O))&x||(n&=~(_|w));var l=r(t,n,o,s?i:void 0,s?u:void 0,s?void 0:i,s?void 0:u,a,c,f);return l.placeholder=e,ct(l,t,n)}function s(t,n,e,o,u,s,h,p){var d=n&w;if(!d&&"function"!=typeof t)throw new TypeError(m);var v=o?o.length:0;if(v||(n&=~(O|S),o=u=void 0),h=void 0===h?h:it(g(h),0),p=void 0===p?p:g(p),v-=u?u.length:0,n&S){var y=o,b=u;o=u=void 0}var x=[t,n,e,o,u,y,b,s,h,p];if(t=x[0],n=x[1],e=x[2],o=x[3],u=x[4],!(p=x[9]=null==x[9]?d?0:t.length:it(x[9]-v,0))&&n&(j|A)&&(n&=~(j|A)),n&&n!=_)M=n==j||n==A?function(t,n,e){function o(){for(var a=arguments.length,s=Array(a),h=a,p=l(o);h--;)s[h]=arguments[h];var d=a<3&&s[0]!==p&&s[a-1]!==p?[]:i(s,p);return(a-=d.length)<e?f(t,n,c,o.placeholder,void 0,s,d,void 0,void 0,e-a):r(this&&this!==G&&this instanceof o?u:t,this,s)}var u=a(t);return o}(t,n,p):n!=O&&n!=(_|O)||u.length?c.apply(void 0,x):function(t,n,e,o){function i(){for(var n=-1,a=arguments.length,f=-1,s=o.length,l=Array(s+a),h=this&&this!==G&&this instanceof i?c:t;++f<s;)l[f]=o[f];for(;a--;)l[f++]=arguments[++n];return r(h,u?e:this,l)}var u=n&_,c=a(t);return i}(t,n,e,o);else var M=function(t,n,r){function e(){return(this&&this!==G&&this instanceof e?i:t).apply(o?r:this,arguments)}var o=n&_,i=a(t);return e}(t,n,e);return ct(M,t,n)}function l(t){return t.placeholder}function h(t,n){var r=function(t,n){return null==t?void 0:t[n]}(t,n);return u(r)?r:void 0}function p(t,n){return!!(n=null==n?P:n)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<n}function d(t,n,r){var e=s(t,j,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return e.placeholder=d.placeholder,e}function v(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function y(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&rt.call(t)==N}(t))return C;if(v(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=v(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(F,"");var r=L.test(t);return r||H.test(t)?V(t.slice(2),r?2:8):T.test(t)?C:+t}(t))===k||t===-k){return(t<0?-1:1)*B}return t==t?t:0}function g(t){var n=y(t),r=n%1;return n==n?r?n-r:n:0}var m="Expected a function",b="__lodash_placeholder__",_=1,w=2,x=4,j=8,A=16,O=32,S=64,M=128,E=512,k=1/0,P=9007199254740991,B=1.7976931348623157e308,C=NaN,X=[["ary",M],["bind",_],["bindKey",w],["curry",j],["curryRight",A],["flip",E],["partial",O],["partialRight",S],["rearg",256]],Y="[object Function]",R="[object GeneratorFunction]",N="[object Symbol]",F=/^\s+|\s+$/g,D=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$=/\{\n\/\* \[wrapped with (.+)\] \*/,I=/,? & /,T=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,q=/^\[object .+?Constructor\]$/,H=/^0o[0-7]+$/i,U=/^(?:0|[1-9]\d*)$/,V=parseInt,z="object"==typeof t&&t&&t.Object===Object&&t,W="object"==typeof self&&self&&self.Object===Object&&self,G=z||W||Function("return this")(),Q=Function.prototype,K=Object.prototype,J=G["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),tt=Q.toString,nt=K.hasOwnProperty,rt=K.toString,et=RegExp("^"+tt.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Object.create,it=Math.max,ut=Math.min,at=function(){var t=h(Object,"defineProperty"),n=h.name;return n&&n.length>2?t:void 0}(),ct=at?function(t,n,r){var o=n+"";return at(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(function(t,n){var r=n.length,e=r-1;return n[e]=(r>1?"& ":"")+n[e],n=n.join(r>2?", ":" "),t.replace(D,"{\n/* [wrapped with "+n+"] */\n")}(o,function(t,n){return function(t,n){for(var r=-1,e=t?t.length:0;++r<e&&!1!==n(t[r],r,t););}(X,function(r){var o="_."+r[0];n&r[1]&&!e(t,o)&&t.push(o)}),t.sort()}(function(t){var n=t.match($);return n?n[1].split(I):[]}(o),r)))})}:function(t){return t};d.placeholder={},n.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,n,r){function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function o(t,n){var r=A(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&_.call(t,"callee")&&(!x.call(t,"callee")||w.call(t)==v)}(t)?function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}(t.length,String):[],e=r.length,o=!!e;for(var i in t)!n&&!_.call(t,i)||o&&("length"==i||s(i,e))||r.push(i);return r}function i(t,n,r,e){return void 0===t||l(t,b[r])&&!_.call(e,r)?n:t}function u(t,n,r){var e=t[n];_.call(t,n)&&l(e,r)&&(void 0!==r||n in t)||(t[n]=r)}function a(t){if(!p(t))return function(t){var n=[];if(null!=t)for(var r in Object(t))n.push(r);return n}(t);var n=function(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||b;return t===r}(t),r=[];for(var e in t)("constructor"!=e||!n&&_.call(t,e))&&r.push(e);return r}function c(t,n){return n=j(void 0===n?t.length-1:n,0),function(){for(var r=arguments,o=-1,i=j(r.length-n,0),u=Array(i);++o<i;)u[o]=r[n+o];o=-1;for(var a=Array(n+1);++o<n;)a[o]=r[o];return a[n]=u,e(t,this,a)}}function f(t){return c(function(n,r){var e=-1,o=r.length,i=o>1?r[o-1]:void 0,u=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&function(t,n,r){if(!p(r))return!1;var e=typeof n;if("number"==e?h(r)&&s(n,r.length):"string"==e&&n in r)return l(r[n],t);return!1}(r[0],r[1],u)&&(i=o<3?void 0:i,o=1),n=Object(n);++e<o;){var a=r[e];a&&t(n,a,e,i)}return n})}function s(t,n){return!!(n=null==n?d:n)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<n}function l(t,n){return t===n||t!=t&&n!=n}function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}(t.length)&&!function(t){var n=p(t)?w.call(t):"";return n==y||n==g}(t)}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var d=9007199254740991,v="[object Arguments]",y="[object Function]",g="[object GeneratorFunction]",m=/^(?:0|[1-9]\d*)$/,b=Object.prototype,_=b.hasOwnProperty,w=b.toString,x=b.propertyIsEnumerable,j=Math.max,A=Array.isArray,O=f(function(t,n,r,e){!function(t,n,r,e){r||(r={});for(var o=-1,i=n.length;++o<i;){var a=n[o],c=e?e(r[a],t[a],a,r,t):void 0;u(r,a,void 0===c?t[a]:c)}}(n,function(t){return h(t)?o(t,!0):a(t)}(n),t,e)}),S=c(function(t){return t.push(void 0,i),e(O,void 0,t)});n.exports=S},{}],28:[function(t,n,r){var e=t("lodash._basecallback"),o=t("lodash._baseeach"),i=t("lodash._basefind"),u=t("lodash._basefindindex"),a=t("lodash.isarray"),c=function(t,n){return function(r,o,c){if(o=e(o,c,3),a(r)){var f=u(r,o,n);return f>-1?r[f]:void 0}return i(r,o,t)}}(o);n.exports=c},{"lodash._basecallback":14,"lodash._baseeach":15,"lodash._basefind":16,"lodash._basefindindex":17,"lodash.isarray":31}],29:[function(t,n,r){var e=t("lodash._basematches"),o=t("lodash.find");n.exports=function(t,n){return o(t,e(n))}},{"lodash._basematches":21,"lodash.find":28}],30:[function(t,n,r){function e(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!function(t){var n=function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?s.call(t):"";return n==u||n==a}(t)}(t)}(t)&&f.call(t,"callee")&&(!l.call(t,"callee")||s.call(t)==i)}var o=9007199254740991,i="[object Arguments]",u="[object Function]",a="[object GeneratorFunction]",c=Object.prototype,f=c.hasOwnProperty,s=c.toString,l=c.propertyIsEnumerable;n.exports=e},{}],31:[function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t,n){var r=null==t?void 0:t[n];return function(t){if(null==t)return!1;if(function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)&&s.call(t)==i}(t))return l.test(c.call(t));return e(t)&&u.test(t)}(r)?r:void 0}var i="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,f=a.hasOwnProperty,s=a.toString,l=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=9007199254740991,p=o(Array,"isArray")||function(t){return e(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}(t.length)&&"[object Array]"==s.call(t)};n.exports=p},{}],32:[function(t,n,r){function e(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!!i[u.call(t)]}var o=9007199254740991,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var u=Object.prototype.toString;n.exports=e},{}],33:[function(t,n,r){function e(t,n){return t="number"==typeof t||s.test(t)?+t:-1,n=null==n?p:n,t>-1&&t%1==0&&t<n}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function i(t){for(var n=function(t){if(null==t)return[];u(t)||(t=Object(t));var n=t.length;n=n&&o(n)&&(f(t)||c(t))&&n||0;var r=t.constructor,i=-1,a="function"==typeof r&&r.prototype===t,s=Array(n),h=n>0;for(;++i<n;)s[i]=i+"";for(var p in t)h&&e(p,n)||"constructor"==p&&(a||!l.call(t,p))||s.push(p);return s}(t),r=n.length,i=r&&t.length,a=!!i&&o(i)&&(f(t)||c(t)),s=-1,h=[];++s<r;){var p=n[s];(a&&e(p,i)||l.call(t,p))&&h.push(p)}return h}function u(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var a=t("lodash._getnative"),c=t("lodash.isarguments"),f=t("lodash.isarray"),s=/^\d+$/,l=Object.prototype.hasOwnProperty,h=a(Object,"keys"),p=9007199254740991,d=function(t){return function(n){return null==n?void 0:n[t]}}("length"),v=h?function(t){var n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&function(t){return null!=t&&o(d(t))}(t)?i(t):u(t)?h(t):[]}:i;n.exports=v},{"lodash._getnative":23,"lodash.isarguments":30,"lodash.isarray":31}],34:[function(t,n,r){function e(t,n){var r=-1,e=function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}(f(t))}(t)?Array(t.length):[];return u(t,function(t,o,i){e[++r]=n(t,o,i)}),e}var o=t("lodash._arraymap"),i=t("lodash._basecallback"),u=t("lodash._baseeach"),a=t("lodash.isarray"),c=9007199254740991,f=function(t){return function(n){return null==n?void 0:n[t]}}("length");n.exports=function(t,n,r){var u=a(t)?o:e;return n=i(n,r,3),u(t,n)}},{"lodash._arraymap":13,"lodash._basecallback":14,"lodash._baseeach":15,"lodash.isarray":31}],35:[function(t,n,r){function e(t){t=function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(t);for(var n=-1,r=o(t),e=r.length,i=Array(e);++n<e;){var u=r[n];i[n]=[u,t[u]]}return i}var o=t("lodash.keys");n.exports=e},{"lodash.keys":33}],36:[function(t,n,r){function e(t,n){var r=typeof t;if("string"==r&&s.test(t)||"number"==r)return!0;if(a(t))return!1;return!f.test(t)||null!=n&&t in function(t){return function(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}(t)?t:Object(t)}(n)}function o(t,n){return c(t,function(t){return e(t)?function(t){return function(n){return null==n?void 0:n[t]}}(t):function(t){var n=t+"";return t=u(t),function(r){return i(r,t,n)}}(t)}(n))}var i=t("lodash._baseget"),u=t("lodash._topath"),a=t("lodash.isarray"),c=t("lodash.map"),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;n.exports=o},{"lodash._baseget":18,"lodash._topath":24,"lodash.isarray":31,"lodash.map":34}],37:[function(t,n,r){function e(t){function n(t){return Math.floor(h()*t)}function r(t){function r(t){return function(t,n){n=+n;for(var r=0;r<t.length;++r){var e=t[r],o=e[0];if(n>=o[0]&&n<=o[1])return e[1]}}(e,t)}var e=t,o=e[e.length-1][0][1]-e[0][0][0]+1;return{outcomeAtIndex:r,roll:function(){var t=r(n(o));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:o,getRangesAndOutcomesArray:function(){return e}}}function e(t){var n=[],r=-1,e=function(t){var n=[];for(var r in t){var e=t[r];n.push([e,r])}return n}(t);return(e=e.sort(o)).forEach(function(t){var e=t[0],o=t[1],i=r+1,u=i+e-1;n.push([[i,u],o]),r=u}),n}function o(t,n){return t[0]>n[0]?-1:1}function i(t){return r(function(t){var n=[];for(var r in t){var e=function(t){var n=t.split("-");if(n.length>2)return;return 1===n.length?[+t,+t]:[+n[0],+n[1]]}(r),o=t[r];if("object"==typeof o)if(Array.isArray(o))o=f(o);else{var a=i(o);"function"==typeof a.roll&&(o=a.roll)}n.push([e,o])}return n.sort(u)}(t))}function u(t,n){return t[0][0]<n[0][0]?-1:1}function a(t){return r(function(t){function n(t){var n=t[0],e=t[1],o=r+n-1,i=[r,o];if(r=o+1,Array.isArray(e))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(e)){var u=a(e);"function"==typeof u.roll&&(e=u.roll)}else e=f(e);return[i,e]}var r=0;return t.map(n)}(t))}function c(t,r){return!t||"number"!=typeof t.length||t.length<1?r:t[n(t.length)]}function f(t,n){return function(){return c(t,n)}}function s(t,n){var r=[];return t.forEach(function(t){n.forEach(function(n){Array.isArray(t)||Array.isArray(n)?r.push(t.concat(n)):r.push([t,n])})}),r}function l(t){for(var r,e=t.length,o=Array(e),i=0;i<e;i++)(r=n(i+1))!==i&&(o[i]=o[r]),o[r]=t[i];return o}var h=Math.random;return t&&t.random&&(h=t.random),{roll:n,rollDie:function(t){return 0===t?0:n(t)+1},createRangeTable:r,createRangeTableFromDict:function(t){return r(e(t))},createTableFromDef:i,createTableFromSizes:a,convertDictToRangesAndOutcomePairs:e,pickFromArray:c,crossArrays:s,getCartesianProduct:function(t){return t.slice(1).reduce(s,t[0])},shuffle:l,sample:function(t,n){return l(t).slice(0,n)},randomFn:h}}var o=e();"object"==typeof n&&(n.exports=o,n.exports.createProbable=e)},{}],38:[function(t,n,r){"use strict";function e(t,n,r,e,i){o(t,n,r||0,e||t.length-1,i||function(t,n){return t<n?-1:t>n?1:0})}function o(t,n,r,e,u){for(;e>r;){if(e-r>600){var a=e-r+1,c=n-r+1,f=Math.log(a),s=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*s*(a-s)/a)*(c-a/2<0?-1:1);o(t,n,Math.max(r,Math.floor(n-c*s/a+l)),Math.min(e,Math.floor(n+(a-c)*s/a+l)),u)}var h=t[n],p=r,d=e;for(i(t,r,n),u(t[e],h)>0&&i(t,r,e);p<d;){for(i(t,p,d),p++,d--;u(t[p],h)<0;)p++;for(;u(t[d],h)>0;)d--}0===u(t[r],h)?i(t,r,d):i(t,++d,e),d<=n&&(r=d+1),n<=d&&(e=d-1)}}function i(t,n,r){var e=t[n];t[n]=t[r],t[r]=e}n.exports=e,n.exports.default=e},{}],39:[function(t,n,r){"use strict";function e(t,n){if(!(this instanceof e))return new e(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function o(t,n){i(t,0,t.children.length,n,t)}function i(t,n,r,e,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=n;a<r;a++)i=t.children[a],u(o,t.leaf?e(i):i);return o}function u(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function a(t,n){return t.minX-n.minX}function c(t,n){return t.minY-n.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function s(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function h(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(t,n,r,e,o){for(var i,u=[n,r];u.length;)(r=u.pop())-(n=u.pop())<=e||(i=n+Math.ceil((r-n)/e/2)*e,v(t,i,n,r,o),u.push(n,i,i,r))}n.exports=e,n.exports.default=e;var v=t("quickselect");e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var n=this.data,r=[],e=this.toBBox;if(!h(t,n))return r;for(var o,i,u,a,c=[];n;){for(o=0,i=n.children.length;o<i;o++)u=n.children[o],h(t,a=n.leaf?e(u):u)&&(n.leaf?r.push(u):l(t,a)?this._all(u,r):c.push(u));n=c.pop()}return r},collides:function(t){var n=this.data,r=this.toBBox;if(!h(t,n))return!1;for(var e,o,i,u,a=[];n;){for(e=0,o=n.children.length;e<o;e++)if(i=n.children[e],u=n.leaf?r(i):i,h(t,u)){if(n.leaf||l(t,u))return!0;a.push(i)}n=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0,r=t.length;n<r;n++)this.insert(t[n]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var o=this.data;this.data=e,e=o}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,n){if(!t)return this;for(var r,e,o,i,u=this.data,a=this.toBBox(t),c=[],f=[];u||c.length;){if(u||(u=c.pop(),e=c[c.length-1],r=f.pop(),i=!0),u.leaf&&-1!==(o=function(t,n,r){if(!r)return n.indexOf(t);for(var e=0;e<n.length;e++)if(r(t,n[e]))return e;return-1}(t,u.children,n)))return u.children.splice(o,1),c.push(u),this._condense(c),this;i||u.leaf||!l(u,a)?e?(r++,u=e.children[r],i=!1):u=null:(c.push(u),f.push(r),r=0,e=u,u=u.children[0])}return this},toBBox:function(t){return t},compareMinX:a,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,n){for(var r=[];t;)t.leaf?n.push.apply(n,t.children):r.push.apply(r,t.children),t=r.pop();return n},_build:function(t,n,r,e){var i,u=r-n+1,a=this._maxEntries;if(u<=a)return i=p(t.slice(n,r+1)),o(i,this.toBBox),i;e||(e=Math.ceil(Math.log(u)/Math.log(a)),a=Math.ceil(u/Math.pow(a,e-1))),(i=p([])).leaf=!1,i.height=e;var c,f,s,l,h=Math.ceil(u/a),v=h*Math.ceil(Math.sqrt(a));for(d(t,n,r,v,this.compareMinX),c=n;c<=r;c+=v)for(d(t,c,s=Math.min(c+v-1,r),h,this.compareMinY),f=c;f<=s;f+=h)l=Math.min(f+h-1,s),i.children.push(this._build(t,f,l,e-1));return o(i,this.toBBox),i},_chooseSubtree:function(t,n,r,e){for(var o,i,u,a,c,s,l,h;;){if(e.push(n),n.leaf||e.length-1===r)break;for(l=h=1/0,o=0,i=n.children.length;o<i;o++)c=f(u=n.children[o]),(s=function(t,n){return(Math.max(n.maxX,t.maxX)-Math.min(n.minX,t.minX))*(Math.max(n.maxY,t.maxY)-Math.min(n.minY,t.minY))}(t,u)-c)<h?(h=s,l=c<l?c:l,a=u):s===h&&c<l&&(l=c,a=u);n=a||n.children[0]}return n},_insert:function(t,n,r){var e=this.toBBox,o=r?t:e(t),i=[],a=this._chooseSubtree(o,this.data,n,i);for(a.children.push(t),u(a,o);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(o,i,n)},_split:function(t,n){var r=t[n],e=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,e);var u=this._chooseSplitIndex(r,i,e),a=p(r.children.splice(u,r.children.length-u));a.height=r.height,a.leaf=r.leaf,o(r,this.toBBox),o(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(t,n){this.data=p([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,n,r){var e,o,u,a,c,s,l,h;for(s=l=1/0,e=n;e<=r-n;e++)a=function(t,n){var r=Math.max(t.minX,n.minX),e=Math.max(t.minY,n.minY),o=Math.min(t.maxX,n.maxX),i=Math.min(t.maxY,n.maxY);return Math.max(0,o-r)*Math.max(0,i-e)}(o=i(t,0,e,this.toBBox),u=i(t,e,r,this.toBBox)),c=f(o)+f(u),a<s?(s=a,h=e,l=c<l?c:l):a===s&&c<l&&(l=c,h=e);return h},_chooseSplitAxis:function(t,n,r){var e=t.leaf?this.compareMinX:a,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,n,r,e)<this._allDistMargin(t,n,r,o)&&t.children.sort(e)},_allDistMargin:function(t,n,r,e){t.children.sort(e);var o,a,c=this.toBBox,f=i(t,0,n,c),l=i(t,r-n,r,c),h=s(f)+s(l);for(o=n;o<r-n;o++)a=t.children[o],u(f,t.leaf?c(a):a),h+=s(f);for(o=r-n-1;o>=n;o--)a=t.children[o],u(l,t.leaf?c(a):a),h+=s(l);return h},_adjustParentBBoxes:function(t,n,r){for(var e=r;e>=0;e--)u(n[e],t)},_condense:function(t){for(var n,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(n=t[r-1].children).splice(n.indexOf(t[r]),1):this.clear():o(t[r],this.toBBox)},_initFormat:function(t){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(t[0])),this.compareMinY=new Function("a","b",n.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:38}],40:[function(t,n,r){var e=t("qs"),o=t("lodash.clonedeep"),i=t("lodash.defaults");n.exports=function(t){function n(){a(r())}function r(){return e.parse(c.location.hash.slice(1))}function u(t){var n=c.location.protocol+"//"+c.location.host+c.location.pathname+"#"+e.stringify(t);c.history.pushState(null,null,n)}var a,c;return t&&(a=t.followRoute,c=t.windowObject),c.onhashchange=n,{addToRoute:function(t){var n=i(o(t),r());u(n),a(n)},overwriteRouteEntirely:function(t){u(t),a(t)},routeFromHash:n,unpackEncodedRoute:function(t){var n=e.parse(decodeURIComponent(t));u(n),a(n)}}}},{"lodash.clonedeep":25,"lodash.defaults":27,qs:42}],41:[function(t,n,r){"use strict";var e=String.prototype.replace,o=/%20/g;n.exports={default:"RFC3986",formatters:{RFC1738:function(t){return e.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],42:[function(t,n,r){"use strict";var e=t("./stringify"),o=t("./parse"),i=t("./formats");n.exports={formats:i,parse:o,stringify:e}},{"./formats":41,"./parse":43,"./stringify":44}],43:[function(t,n,r){"use strict";var e=t("./utils"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:e.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},u=function(t,n,r){if(t){var e=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,u=/(\[[^[\]]*])/.exec(e),a=u?e.slice(0,u.index):e,c=[];if(a){if(!r.plainObjects&&o.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var f=0;null!==(u=i.exec(e))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(u[1])}return u&&c.push("["+e.slice(u.index)+"]"),function(t,n,r){for(var e=n,o=t.length-1;o>=0;--o){var i,u=t[o];if("[]"===u)i=(i=[]).concat(e);else{i=r.plainObjects?Object.create(null):{};var a="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,c=parseInt(a,10);!isNaN(c)&&u!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[])[c]=e:i[a]=e}e=i}return e}(c,n,r)}};n.exports=function(t,n){var r=n?e.assign({},n):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||e.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof t?function(t,n){for(var r={},e=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,u=n.parameterLimit===1/0?void 0:n.parameterLimit,a=e.split(n.delimiter,u),c=0;c<a.length;++c){var f,s,l=a[c],h=l.indexOf("]="),p=-1===h?l.indexOf("="):h+1;-1===p?(f=n.decoder(l,i.decoder),s=n.strictNullHandling?null:""):(f=n.decoder(l.slice(0,p),i.decoder),s=n.decoder(l.slice(p+1),i.decoder)),o.call(r,f)?r[f]=[].concat(r[f]).concat(s):r[f]=s}return r}(t,r):t,c=r.plainObjects?Object.create(null):{},f=Object.keys(a),s=0;s<f.length;++s){var l=f[s],h=u(l,a[l],r);c=e.merge(c,h,r)}return e.compact(c)}},{"./utils":45}],44:[function(t,n,r){"use strict";var e=t("./utils"),o=t("./formats"),i={brackets:function(t){return t+"[]"},indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},u=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:e.encode,encodeValuesOnly:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(n,r,o,i,u,c,f,s,l,h,p,d){var v=n;if("function"==typeof f)v=f(r,v);else if(v instanceof Date)v=h(v);else if(null===v){if(i)return c&&!d?c(r,a.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||e.isBuffer(v)){if(c){return[p(d?r:c(r,a.encoder))+"="+p(c(v,a.encoder))]}return[p(r)+"="+p(String(v))]}var y=[];if(void 0===v)return y;var g;if(Array.isArray(f))g=f;else{var m=Object.keys(v);g=s?m.sort(s):m}for(var b=0;b<g.length;++b){var _=g[b];u&&null===v[_]||(y=Array.isArray(v)?y.concat(t(v[_],o(r,_),o,i,u,c,f,s,l,h,p,d)):y.concat(t(v[_],r+(l?"."+_:"["+_+"]"),o,i,u,c,f,s,l,h,p,d)))}return y};n.exports=function(t,n){var r=t,u=n?e.assign({},n):{};if(null!==u.encoder&&void 0!==u.encoder&&"function"!=typeof u.encoder)throw new TypeError("Encoder has to be a function.");var f=void 0===u.delimiter?a.delimiter:u.delimiter,s="boolean"==typeof u.strictNullHandling?u.strictNullHandling:a.strictNullHandling,l="boolean"==typeof u.skipNulls?u.skipNulls:a.skipNulls,h="boolean"==typeof u.encode?u.encode:a.encode,p="function"==typeof u.encoder?u.encoder:a.encoder,d="function"==typeof u.sort?u.sort:null,v=void 0!==u.allowDots&&u.allowDots,y="function"==typeof u.serializeDate?u.serializeDate:a.serializeDate,g="boolean"==typeof u.encodeValuesOnly?u.encodeValuesOnly:a.encodeValuesOnly;if(void 0===u.format)u.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,u.format))throw new TypeError("Unknown format option provided.");var m,b,_=o.formatters[u.format];"function"==typeof u.filter?r=(b=u.filter)("",r):Array.isArray(u.filter)&&(m=b=u.filter);var w=[];if("object"!=typeof r||null===r)return"";var x;x=u.arrayFormat in i?u.arrayFormat:"indices"in u?u.indices?"indices":"repeat":"indices";var j=i[x];m||(m=Object.keys(r)),d&&m.sort(d);for(var A=0;A<m.length;++A){var O=m[A];l&&null===r[O]||(w=w.concat(c(r[O],O,j,s,l,h?p:null,b,d,v,y,_,g)))}var S=w.join(f),M=!0===u.addQueryPrefix?"?":"";return S.length>0?M+S:""}},{"./formats":41,"./utils":45}],45:[function(t,n,r){"use strict";var e=Object.prototype.hasOwnProperty,o=function(){for(var t=[],n=0;n<256;++n)t.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return t}();r.arrayToObject=function(t,n){for(var r=n&&n.plainObjects?Object.create(null):{},e=0;e<t.length;++e)void 0!==t[e]&&(r[e]=t[e]);return r},r.merge=function(t,n,o){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(o.plainObjects||o.allowPrototypes||!e.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=r.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,i){e.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=r.merge(t[i],n,o):t.push(n):t[i]=n}),t):Object.keys(n).reduce(function(t,i){var u=n[i];return e.call(t,i)?t[i]=r.merge(t[i],u,o):t[i]=u,t},i)},r.assign=function(t,n){return Object.keys(n).reduce(function(t,r){return t[r]=n[r],t},t)},r.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(n){return t}},r.encode=function(t){if(0===t.length)return t;for(var n="string"==typeof t?t:String(t),r="",e=0;e<n.length;++e){var i=n.charCodeAt(e);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=n.charAt(e):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(e+=1,i=65536+((1023&i)<<10|1023&n.charCodeAt(e)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},r.compact=function(t){for(var n=[{obj:{o:t},prop:"o"}],r=[],e=0;e<n.length;++e)for(var o=n[e],i=o.obj[o.prop],u=Object.keys(i),a=0;a<u.length;++a){var c=u[a],f=i[c];"object"==typeof f&&null!==f&&-1===r.indexOf(f)&&(n.push({obj:i,prop:c}),r.push(f))}return function(t){for(var n;t.length;){var r=t.pop();if(n=r.obj[r.prop],Array.isArray(n)){for(var e=[],o=0;o<n.length;++o)void 0!==n[o]&&e.push(n[o]);r.obj[r.prop]=e}}return n}(n)},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},r.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],46:[function(t,n,r){function e(t,n){return t.dist<n.dist?-1:1}var o=t("lodash.pluck");n.exports=function(t,n,r="col",i="row"){var u=n.map(function(n,e){var o=n[r]-t[r],u=n[i]-t[i];return{index:e,dist:Math.sqrt(o*o+u*u)}}).sort(e);return o(u,"index")}},{"lodash.pluck":36}],47:[function(t,n,r){function e({imageContext:t,probable:n},r){!function({grid:t,imageContext:n}){function r(t){n.moveTo(t.start.x,t.start.y),t.curves.forEach(f)}var e=function(t){for(var n=[],r=0;r<t[0].length;++r){let e=[];for(let n=0;n<t.length;++n)e.push(t[n][r]);n.push(e)}return n}(t.rows),u=t.rows.map(a(i)(!1)),c=e.map(a(i)(!0));console.log("horizontalBezierCurvesPerLine",u),console.log("verticalBezierCurvesPerLine",c);var f=a(o)(n);n.strokeStyle=t.color,n.beginPath(),u.forEach(r),c.forEach(r),n.stroke()}({grid:r,imageContext:t}),function({grid:t,imageContext:n}){n.fillStyle=t.color,n.beginPath(),c(t.rows,a(u)(n)),n.fill()}({grid:r,imageContext:t})}function o(t,n){t.bezierCurveTo.apply(t,n)}function i(t,n){for(var r=[],e=1;e<n.length;++e){let c=n[e],f=n[e-1],s=c.x-f.x;t&&(s=c.y-f.y);var o=f.x+s/2,i=f.y,u=c.x-s/2,a=c.y;t&&(o=f.x,i=f.y+s/2,u=c.x,a=c.y-s/2),r.push([o,i,u,a,c.x,c.y])}return{start:n[0],curves:r}}function u(t,n){t.moveTo(n.x,n.y),t.arc(n.x,n.y,4,0,2*Math.PI)}var a=t("lodash.curry"),c=t("../apply-to-points-in-rows");n.exports=e},{"../apply-to-points-in-rows":2,"lodash.curry":26}],48:[function(t,n,r){var e=document.getElementById("sprite-sheet");const o=32;n.exports=function({imageContext:t},n){t.drawImage(e,n.sprite.col*o,n.sprite.row*o,n.sprite.width,n.sprite.height,n.minX,n.minY,n.sprite.width,n.sprite.height)}},{}],49:[function(t,n,r){function e({gameState:t,onAdvance:n,probable:r}){var{boardWidth:e,boardHeight:p}=function(){var t=document.body.getBoundingClientRect().width;t>c&&(t=c);var n=t;return f.style("width",t),f.style("height",n),s.attr("width",t),s.attr("height",n),l.attr("width",t),l.attr("height",n),{boardWidth:t,boardHeight:n}}();h.clearRect(0,0,e,e),t.grids.forEach(i(u)({imageContext:h,probable:r})),t.souls.forEach(i(a)({imageContext:h})),s.on("click.input",null),s.on("click.input",function(){var r=o.event.layerX,e=o.event.layerY;n({gameState:t,recentClickX:r,recentClickY:e})})}var o=t("d3-selection"),i=t("lodash.curry"),u=t("./render-grid"),a=t("./render-soul");const c=800;var f=o.select("#canvases-container"),s=o.select("#image-board"),l=o.select("#ui-board"),h=s.node().getContext("2d",{alpha:!1});n.exports=e},{"./render-grid":47,"./render-soul":48,"d3-selection":11,"lodash.curry":26}],50:[function(t,n,r){n.exports={flattenRowsButKeepOrigins:function(t){for(var n=[],r=0;r<t.length;++r)for(var e=t[r],o=0;o<e.length;++o)n.push({rowIndex:r,colWithinRow:o,value:e[o]});return n},reconstituteIntoRows:function(t){var n=[];return t.forEach(function(t){var r=[];Array.isArray(n[t.rowIndex])?r=n[t.rowIndex]:n[t.rowIndex]=r,r[t.colWithinRow]=t.value}),n}}},{}]},{},[1]);