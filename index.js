!function(){function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return t}()({1:[function(t,e,n){"use strict";function r(){g.displayMessage=""}function i(t,e,n,r,i){a(i)}Object.defineProperty(n,"__esModule",{value:!0});var o=t("route-state"),a=t("handle-error-web"),u=t("./flows/update"),c=t("./renderers/render"),s=t("probable").createProbable,l=t("lodash.findwhere"),f=t("./generators/generate-grids"),h=t("./generators/generate-souls"),p=t("seedrandom"),{version:d}=t("./package.json"),v=t("@jimkang/randomid")(),g={allowAdvance:!0,animations:[],ephemerals:{blasts:[]},gridsInit:!1,uiOn:!1,actionChoices:[],lastClickedThingIds:[],gameWon:!1},y=o({followRoute:function({seed:t}){function e({gameState:t,recentClickX:n,recentClickY:o,commands:a}){t.allowAdvance&&(u({gameState:t,recentClickX:n,recentClickY:o,commands:a,probable:i}),c({gameState:t,onMessageDismiss:r,onAdvance:e}))}if(t){var n=p(t),i=s({random:n});g.grids=f({probable:i}),g.souls=h({random:n,grids:g.grids}),g.player=l(g.souls,{id:"player"}),e({gameState:g})}else y.addToRoute({seed:v(8)})},windowObject:window});window.onerror=i,document.getElementById("version-info").textContent=d,y.routeFromHash()},{"./flows/update":8,"./generators/generate-grids":10,"./generators/generate-souls":11,"./package.json":86,"./renderers/render":93,"@jimkang/randomid":14,"handle-error-web":34,"lodash.findwhere":52,probable:65,"route-state":69,seedrandom:75}],2:[function(t,e,n){e.exports=function(t,e){for(var n=0;n<t.length;++n){let i=t[n];for(var r=0;r<i.length;++r)e(i[r])}}},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={};n.getCanMoveHereFn=function(t){var e=function(t){return`movefn-${t.avoid.join("_")}`}(t),n=r[e];return n||(n=function({avoid:t}){function e(e){return!e.gridId&&!!(t&&e.categories&&t.find(function(t){return e.categories.includes(t)}))}return function({colRow:t,getTargetsAtColRow:n}){return n({colRow:t}).filter(e).length<1}}(t),r[e]=n),n}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.randomMove=function({probable:t,neighbors:e,getTargetsAtColRow:n,canMoveHereFn:r}){var i=e.filter(function(t){return r({getTargetsAtColRow:n,colRow:t})});return t.pickFromArray(i)}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t("./can-move-fns"),i=t("./moves"),o=t("../sizes");var a=[{type:"avocado",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:0,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"basicShell",categories:["item"],sprite:{col:0,row:1,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"beanie",categories:["item"],sprite:{col:0,row:2,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell",offset:[0,-64]}},{type:"box",categories:["item"],sprite:{col:0,row:3,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"bucket",categories:["item"],sprite:{col:0,row:4,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"bug",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy"]}),move:i.randomMove,facingsAllowed:[[1,0],[-1,0]],sprite:{col:0,row:5,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"cat",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy"]}),move:i.randomMove,sprite:{col:0,row:6,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"cloud",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:[]}),move:i.randomMove,facingsAllowed:[[1,0],[-1,0]],sprite:{col:0,row:7,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-air"]},{type:"corn",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:8,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"player",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),getInteractionsWithThing:function(t){return t.type&&"player"===t.type?["blast"]:t.categories&&t.categories.includes("item")?["take"]:[]},sprite:{col:0,row:10,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"cup",categories:["item"],sprite:{col:0,row:12,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"devil",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:13,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"fancyShell",categories:["item"],sprite:{col:0,row:14,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"helmet",categories:["item"],sprite:{col:0,row:15,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"horn",categories:["item"],sprite:{col:0,row:16,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"lagavulinShell",categories:["item"],sprite:{col:0,row:17,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"largeShell",categories:["item"],sprite:{col:0,row:18,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"longShell",categories:["item"],sprite:{col:0,row:19,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"pan",categories:["item"],sprite:{col:0,row:20,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"pointyRock",categories:["obstruction"],sprite:{col:0,row:21,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],facingsAllowed:[[1,0]],itemRole:{itemPositioningStyle:"shell"}},{type:"roundRock",categories:["obstruction"],sprite:{col:0,row:22,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],facingsAllowed:[[1,0]],itemRole:{itemPositioningStyle:"shell"}},{type:"shoe",categories:["item"],sprite:{col:0,row:23,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"skull",categories:["item","guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:24,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"soupCan",categories:["item"],sprite:{col:0,row:25,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"SUV",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:26,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"tearDrop",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:27,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],facingsAllowed:[[1,0],[-1,0]],itemRole:{itemPositioningStyle:"shell"}},{type:"tinyShell",categories:["item"],sprite:{col:0,row:28,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"trike",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:29,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"]},{type:"trilby",categories:["item"],sprite:{col:0,row:30,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"twistyShell",categories:["item"],sprite:{col:0,row:31,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}},{type:"twoPointRock",categories:["obstruction"],sprite:{col:0,row:32,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},facingsAllowed:[[1,0]],allowedGrids:["grid-figures"]},{type:"worm",categories:["guy"],canMoveHereFn:r.getCanMoveHereFn({avoid:["guy","obstruction"]}),move:i.randomMove,sprite:{col:0,row:33,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-air"],itemRole:{itemPositioningStyle:"shell"}},{type:"grail",categories:["item"],sprite:{col:0,row:34,width:o.spriteSize,height:o.spriteSize,hitRadius:.75*o.spriteSize},allowedGrids:["grid-figures"],itemRole:{itemPositioningStyle:"shell"}}];n.soulDefs={},a.forEach(function(t){n.soulDefs[t.type]=t})},{"../sizes":95,"./can-move-fns":3,"./moves":4}],6:[function(t,e,n){"use strict";function r(t,e){function n(t){e.rows=o[t.name](t,e.rows)}var r=!function(t){return void 0!==t.rows[0][0].minX}(e);e.effects&&(a(e.rows,t.remove.bind(t)),e.effects.forEach(n),r=!0),r&&(a(e.rows,i),a(e.rows,t.insert.bind(t)))}function i(t){t.minX=t.pt[0]-u,t.maxX=t.pt[0]+u,t.minY=t.pt[1]-u,t.maxY=t.pt[1]+u}Object.defineProperty(n,"__esModule",{value:!0});var o=t("../grid-effects/grid-effects"),a=t("../apply-to-points-in-rows");const u=10;e.exports=r},{"../apply-to-points-in-rows":2,"../grid-effects/grid-effects":13}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("lodash.findwhere");const i=t("../tasks/box-ops");e.exports=function(t,e,n){var o=r(t,{id:n.gridContext.id});if(o){var a=o.rows[n.gridContext.colRow[1]][n.gridContext.colRow[0]];n.x=a.pt[0],n.y=a.pt[1];var u=i.getBoxAroundPosition({center:[n.gridContext.colRow[0],n.gridContext.colRow[1]],boxWidth:n.sprite.width,boxHeight:n.sprite.height});Object.assign(n,u),e.remove(n),e.insert(n)}else console.log("Could not find grid",n.gridContext.id,"for",n.id,"!")}},{"../tasks/box-ops":96,"lodash.findwhere":52}],8:[function(t,e,n){"use strict";function r({gameState:t,recentClickX:e,recentClickY:n,commands:r,probable:a}){function c(e){o(t,a),i(),e&&e.forEach(t=>t&&t(null))}if(t.gridsInit||(t.souls.forEach(h(d)(t.grids,z)),t.grids.forEach(h(p)(z)),t.gridsInit=!0),r&&r.length>0)!function(t,e,n){var r=_(1);t.forEach(function(t){r.defer(u,e,t)}),r.awaitAll(n)}(r,t,x({ok:c,nok:j}));else{if(!t.gameWon&&function(t){return void 0!==g(t.player.items,{type:"grail"})}(t))return t.displayMessage="With the grail to sleep in, you are assured as much safe, restful sleep as you'd like for the rest of your life. You have won! Feel free to hang out as long as you'd like, though.",void(t.gameWon=!0);if(t.allowAdvance&&!isNaN(e)&&!isNaN(n)){var s=A.getBoxAroundCenter({center:[e,n],boxWidth:O,boxHeight:O}),v=z.search(s);t.lastClickedThingIds=m(v,"id");var S=g(v,{gridId:t.player.gridContext.id});S&&function({selectedIntersection:t,gameState:e,thingsHit:n,probable:r}){var a=!1,u=e.player,c=w(t.colRow,u.gridContext.colRow),s=function(t,e){return 1===y.getVectorMagnitude(y.subtractPairs(t,e))}(t.colRow,u.gridContext.colRow);(c||s)&&(e.actionChoices=b(n.map(u.getInteractionsWithThing).flat()));e.actionChoices.length>0?e.uiOn=!0:c||s&&e.player.canMoveHereFn({getTargetsAtColRow:h(f)(e),colRow:t.colRow})&&(!function(t,e){var n=t.player;n.facing=l(n.facingsAllowed,n.gridContext,e.colRow),n.gridContext.colRow=e.colRow}(e,t),o(e,r),a=!0);a&&i()}({selectedIntersection:S,gameState:t,thingsHit:v,probable:a})}}}function i(){console.log("Turn",R,"complete."),R+=1}function o(t,e){t.souls.forEach(h(a)(t,e)),t.souls.forEach(h(d)(t.grids,z))}function a(t,e,n){if("player"!==n.id){var r=n.move;if(n.move){var i=r({soul:n,neighbors:function(t,e){return[[t.gridContext.colRow[0]+1,t.gridContext.colRow[1]],[t.gridContext.colRow[0],t.gridContext.colRow[1]+1],[t.gridContext.colRow[0]-1,t.gridContext.colRow[1]],[t.gridContext.colRow[0],t.gridContext.colRow[1]-1]].filter(function(t){return t[0]>=0&&t[0]<e.rows[0].length&&t[1]>=0&&t[1]<e.rows.length})}(n,g(t.grids,{id:n.gridContext.id})),probable:e,getTargetsAtColRow:h(f)(t),canMoveHereFn:n.canMoveHereFn});i&&(n.facing=l(n.facingsAllowed,n.gridContext,i),n.gridContext.colRow=i)}}}function u(t,e,n){function r(t){i(),n(null,t)}function i(){!function(t,e){var n=m(e,"id");e.forEach(s);for(var r=t.souls.length-1;r>=0;--r)-1!==n.indexOf(t.souls[r].id)&&t.souls.splice(r,1)}(t,a)}function o(e){return t.lastClickedThingIds.includes(e.id)}var a=[];if("blast"===e.cmdType){var u={minX:t.player.x-3*t.player.sprite.width,maxX:t.player.x+3*t.player.sprite.width,minY:t.player.y-3*t.player.sprite.height,maxY:t.player.y+3*t.player.sprite.height};a=function({box:t,filter:e}){var n=z.search(t);e&&(n=n.filter(e));return n}({filter:c,box:u}),console.log("blasting:",a),t.animations.push({type:"blast",cx:t.player.x,cy:t.player.y,r:3*t.player.sprite.width,duration:1e3,postAnimationGameStateUpdater:r})}else if("take"===e.cmdType){var l=t.souls.find(o);if(!l)throw new Error("Somehow no item to take.");t.player.items.push(l),a.push(l),i(),console.log("Take it!"),S(n,null)}}function c(t){return t.type&&"player"!==t.type}function s(t){z.remove(t)}function l(t,e,n){var r=y.subtractPairs(n,e.colRow);return t&&(r=k.sortVectorsByCloseness(r,t)[0]),r}function f(t,{colRow:e}){return t.souls.filter(function(t){return w(t.gridContext.colRow,e)})}Object.defineProperty(n,"__esModule",{value:!0});var h=t("lodash.curry"),p=t("./update-grid"),d=t("./update-soul"),v=t("rbush"),g=t("lodash.findwhere"),y=t("basic-2d-math"),m=t("lodash.pluck"),b=t("lodash.uniq"),w=t("lodash.isequal"),_=t("d3-queue").queue,x=t("oknok"),j=t("handle-error-web"),S=t("call-next-tick");const M=t("../sizes"),A=t("../tasks/box-ops"),k=t("../tasks/dist-ops"),O=M.spriteSize/3;var z=v(9),R=0;e.exports=r},{"../sizes":95,"../tasks/box-ops":96,"../tasks/dist-ops":97,"./update-grid":6,"./update-soul":7,"basic-2d-math":17,"call-next-tick":19,"d3-queue":26,"handle-error-web":34,"lodash.curry":49,"lodash.findwhere":52,"lodash.isequal":56,"lodash.pluck":62,"lodash.uniq":63,oknok:64,rbush:68}],9:[function(t,e,n){var r=t("d3-array").range;e.exports=function({grid:t,probable:e}){var n=e.createTableFromSizes([[4,1],[4,2],[4,3],[2,4],[2,5],[1,6]]),i=(t.width+t.height)/2;return{name:"gravityWarp",centers:r(n.roll()).map(function(){return[e.roll(t.width),e.roll(t.height)]}),strength:.75*(e.roll(t.unitHeight)+e.roll(t.unitWidth)),decayDist:i/5+e.roll(.4*i)}}},{"d3-array":20}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./effects/generate-gravity-warp");const i=t("../sizes");e.exports=function({probable:t}){function e({id:e,unitWidth:n,unitHeight:r,gridWidth:i,gridHeight:o}){let a={id:e,unitWidth:n,unitHeight:r,xOffset:0,yOffset:0,numberOfCols:i/n,numberOfRows:o/r,width:i,height:o,color:`hsl(${t.roll(360)}, 50%, 50%)`};return a.rows=function(t){for(var e=[],n=0;n<t.numberOfRows;++n){let i=[];for(var r=0;r<t.numberOfCols;++r)i.push({pt:[t.xOffset+r*t.unitWidth,t.yOffset+n*t.unitHeight],colRow:[r,n],gridId:t.id});e.push(i)}return e}(a),a}var n=t.createTableFromSizes([[3,1],[2,2],[1,3]]),o=e({id:"grid-air",unitWidth:2*i.spriteSize,unitHeight:2*i.spriteSize,gridWidth:i.spriteSize*i.gridWidthSprites,gridHeight:i.spriteSize*i.gridHeightSprites}),a=[];let u=n.roll();u>0&&(a=[]);for(let e=0;e<u;++e)a.push(r({grid:o,probable:t}));return o.effects=a,[e({id:"grid-ground",unitWidth:i.spriteSize,unitHeight:i.spriteSize,gridWidth:i.spriteSize*i.gridWidthSprites,gridHeight:i.spriteSize*i.gridHeightSprites}),e({id:"grid-figures",unitWidth:i.spriteSize,unitHeight:i.spriteSize,gridWidth:i.spriteSize*i.gridWidthSprites,gridHeight:i.spriteSize*i.gridHeightSprites}),o]}},{"../sizes":95,"./effects/generate-gravity-warp":9}],11:[function(t,e,n){"use strict";function r({random:t,grids:e}){function n({def:t,id:e,facing:n}){var i=o(t);return i.id=e||i.type+"-"+m(4),i.facing=n||y.pickFromArray(t.facingsAllowed||d),t.startingItemIds?i.items=t.startingItemIds.map(r):i.items=[],i}function r(t){return n({def:p.soulDefs[t]})}function h({quantity:t,getType:e}){for(var r=0;r<t;++r){let t=n({def:p.soulDefs[e()]});S.push(t)}}var y=l({random:t}),m=s({random:t}),b=f({random:t}),w=b(v),_=b(g),x=n({def:p.soulDefs.player,id:"player",facing:[1,0]}),j=n({def:p.soulDefs.grail,id:"grail"}),S=[];h({quantity:y.rollDie(8)+y.rollDie(8),getType:w}),h({quantity:y.rollDie(16)+y.roll(16),getType:_}),S.push(x),S.push(j);var M=function(t){function e(t){return u(t,"colRow")}var n={};return t.forEach(function(t){t.rows&&(n[t.id]=c(t.rows.map(e)))}),n}(e);return S.forEach(a(i)(y,e,M)),S}function i(t,e,n,r){var i=e.filter(function(t){return r.allowedGrids.includes(t.id)});let o=t.pickFromArray(i);var a=n[o.id];const u=t.roll(a.length);r.gridContext={id:o.id,colRow:a[u]},a.splice(u,1)}Object.defineProperty(n,"__esModule",{value:!0});var o=t("lodash.clonedeep"),a=t("lodash.curry"),u=t("lodash.pluck"),c=t("lodash.flatten"),s=t("@jimkang/randomid"),l=t("probable").createProbable,{Tablenest:f,r:h}=t("tablenest");const p=t("../defs/soul-defs");var d=[[1,0],[0,-1],[-1,0],[0,1]],v={root:[[1,"pointyRock"],[1,"roundRock"],[1,"twoPointRock"]]},g={root:[[2,h`guy`],[1,h`item`]],guy:[[1,"bug"],[1,"cat"],[1,"cloud"],[1,"corn"],[1,"devil"],[1,"SUV"],[1,"tearDrop"],[1,"trike"],[1,"worm"]],item:[[1,"avocado"],[1,"basicShell"],[1,"beanie"],[1,"box"],[1,"bucket"],[1,"cup"],[1,"fancyShell"],[1,"helmet"],[1,"horn"],[1,"lagavulinShell"],[1,"largeShell"],[1,"longShell"],[1,"pan"],[1,"shoe"],[1,"skull"],[1,"soupCan"],[1,"tinyShell"],[1,"trilby"],[1,"twistyShell"]]};e.exports=r},{"../defs/soul-defs":5,"@jimkang/randomid":14,"lodash.clonedeep":48,"lodash.curry":49,"lodash.flatten":53,"lodash.pluck":62,probable:65,tablenest:84}],12:[function(t,e,n){"use strict";function r({wrappedIntersections:t,strength:e,decayDist:n},r){for(var i=u(r,a(t,"value"),"0","1"),o=0;o<i.length;++o){let a=t[i[o]].value,u=c.getVectorMagnitude(c.subtractPairs(a.pt,r));if(u>n)break;var s=e*(n-u)/n,l=c.changeVectorMagnitude(c.subtractPairs(r,a.pt),s),f=c.addPairs(a.pt,l);a.pt=f}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("../row-ops"),o=t("lodash.curry"),a=t("lodash.pluck"),u=t("sort-cells-by-dist"),c=t("basic-2d-math");e.exports=function({centers:t,strength:e,decayDist:n},a){var u=i.flattenRowsButKeepOrigins(a);return t.forEach(o(r)({wrappedIntersections:u,strength:e,decayDist:n})),i.reconstituteIntoRows(u)}},{"../row-ops":94,"basic-2d-math":17,"lodash.curry":49,"lodash.pluck":62,"sort-cells-by-dist":83}],13:[function(t,e,n){e.exports={gravityWarp:t("./gravity-warp")}},{"./gravity-warp":12}],14:[function(t,e,n){var r=t("probable").createProbable;const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e.exports=function(t){var e,n=i;if(t){let{random:i}=t;e=r({random:i}),t.idChars&&(n=t.idChars)}else e=r();return function(t){for(var r="",i=0;i<t;++i)r+=e.pickFromArray(n);return r}}},{probable:15}],15:[function(t,e,n){function r(t){function e(t){return Math.floor(h()*t)}function n(t){function n(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],i=r[0];if(e>=i[0]&&e<=i[1])return r[1]}}(r,t)}var r=t,i=r[r.length-1][0][1]-r[0][0][0]+1;return{outcomeAtIndex:n,roll:function(){var t=n(e(i));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:i,getRangesAndOutcomesArray:function(){return r}}}function r(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(i)).forEach(function(t){var r=t[0],i=t[1],o=n+1,a=o+r-1;e.push([[o,a],i]),n=a}),e}function i(t,e){return t[0]>e[0]?-1:1}function o(t){return n(function(t){var e=[];for(var n in t){var r=function(t){var e=t.split("-");if(e.length>2)return;return 1===e.length?[+t,+t]:[+e[0],+e[1]]}(n),i=t[n];if("object"==typeof i)if(Array.isArray(i))i=s(i);else if(p){var u=o(i);"function"==typeof u.roll&&(i=u.roll)}e.push([r,i])}return e.sort(a)}(t))}function a(t,e){return t[0][0]<e[0][0]?-1:1}function u(t){return n(function(t){function e(t){var e=t[0],r=t[1],i=n+e-1,o=[n,i];if(n=i+1,Array.isArray(r))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(r)){var a=u(r);"function"==typeof a.roll&&(r=a.roll)}else r=s(r);return[o,r]}var n=0;return t.map(e)}(t))}function c(t,n){return!t||"number"!=typeof t.length||t.length<1?n:t[e(t.length)]}function s(t,e){return function(){return c(t,e)}}function l(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function f(t){for(var n,r=t.length,i=Array(r),o=0;o<r;o++)(n=e(o+1))!==o&&(i[o]=i[n]),i[n]=t[o];return i}var h=Math.random,p=!0;return t&&(t.random&&(h=t.random),void 0!==t.recurse&&(p=t.recurse)),{roll:e,rollDie:function(t){return 0===t?0:e(t)+1},createRangeTable:n,createRangeTableFromDict:function(t){return n(r(t))},createTableFromDef:o,createTableFromSizes:u,convertDictToRangesAndOutcomePairs:r,pickFromArray:c,pick:c,crossArrays:l,getCartesianProduct:function(t){return t.slice(1).reduce(l,t[0])},shuffle:f,sample:function(t,e){return f(t).slice(0,e)},randomFn:h}}var i=r();"object"==typeof e&&(e.exports=i,e.exports.createProbable=r)},{}],16:[function(t,e,n){function r(t,e){var n="id";if(t){if("identity"===t)return i;n="string"==typeof t?t:"object"==typeof t&&"string"==typeof t.path?t.path.split("/"):""+t}return function(t,e){function n(n){if("object"==typeof n){var r=function(t,e){if("string"==typeof e)return t[e];if(Array.isArray(e))return o(t,e)}(n,t);return void 0===r?e:r}return e}return n}(n,e)}function i(t){return t}var o=t("get-at-path");e.exports=r},{"get-at-path":33}],17:[function(t,e,n){function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return[t[0]*e,t[1]*e]}function o(t,e){return t[0]*e[0]+t[1]*e[1]}e.exports={getVectorMagnitude:r,addPairs:function(t,e){return[t[0]+e[0],t[1]+e[1]]},subtractPairs:function(t,e){return[t[0]-e[0],t[1]-e[1]]},multiplyPairBySingleValue:i,changeVectorMagnitude:function(t,e){return i(t,e/r(t))},dotProduct:o,cosSim:function(t,e){return o(t,e)/(r(t)*r(e))}}},{}],18:[function(t,e,n){},{}],19:[function(t,e,n){(function(t){e.exports=function(){var e,n,r,i=arguments.length;if(!(i>0))throw new Error("No callback provided to callNextTick.");e=arguments[0],n=new Array(i-1);for(var o=1;o<i;++o)n[o-1]=arguments[o];r=function(t,e){return function(){t.apply(t,e)}}(e,n),t.nextTick(r)}}).call(this,t("_process"))},{_process:66}],20:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return[t,e]}function n(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=w?10:o>=_?5:o>=x?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=w?10:o>=_?5:o>=x?2:1)}function r(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=w?i*=10:o>=_?i*=5:o>=x&&(i*=2),e<t?-i:i}function i(t){return t.length}var o=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},a=function(t){return 1===t.length&&(t=function(t){return function(e,n){return o(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},u=a(o),c=u.right,s=u.left,l=function(t){return null===t?NaN:+t},f=function(t,e){var n,r,i=t.length,o=0,a=-1,u=0,c=0;if(null==e)for(;++a<i;)isNaN(n=l(t[a]))||(c+=(r=n-u)*(n-(u+=r/++o)));else for(;++a<i;)isNaN(n=l(e(t[a],a,t)))||(c+=(r=n-u)*(n-(u+=r/++o)));if(o>1)return c/(o-1)},h=function(t,e){var n=f(t,e);return n?Math.sqrt(n):n},p=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},d=Array.prototype,v=d.slice,g=d.map,y=function(t){return function(){return t}},m=function(t){return t},b=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},w=Math.sqrt(50),_=Math.sqrt(10),x=Math.sqrt(2),j=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},S=function(t,e,n){if(null==n&&(n=l),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},M=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},A=function(t){if(!(o=t.length))return[];for(var e=-1,n=M(t,i),r=new Array(n);++e<n;)for(var o,a=-1,u=r[e]=new Array(o);++a<o;)u[a]=t[a][e];return r};t.bisect=c,t.bisectRight=c,t.bisectLeft=s,t.ascending=o,t.bisector=a,t.cross=function(t,n,r){var i,o,a,u,c=t.length,s=n.length,l=new Array(c*s);for(null==r&&(r=e),i=a=0;i<c;++i)for(u=t[i],o=0;o<s;++o,++a)l[a]=r(u,n[o]);return l},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=h,t.extent=p,t.histogram=function(){function t(t){var o,a,u=t.length,s=new Array(u);for(o=0;o<u;++o)s[o]=e(t[o],o,t);var l=n(s),f=l[0],h=l[1],p=i(s,f,h);Array.isArray(p)||(p=r(f,h,p),p=b(Math.ceil(f/p)*p,Math.floor(h/p)*p,p));for(var d=p.length;p[0]<=f;)p.shift(),--d;for(;p[d-1]>h;)p.pop(),--d;var v,g=new Array(d+1);for(o=0;o<=d;++o)(v=g[o]=[]).x0=o>0?p[o-1]:f,v.x1=o<d?p[o]:h;for(o=0;o<u;++o)f<=(a=s[o])&&a<=h&&g[c(p,a,0,d)].push(t[o]);return g}var e=m,n=p,i=j;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:y(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:y([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:y(Array.isArray(e)?v.call(e):e),t):i},t},t.thresholdFreedmanDiaconis=function(t,e,n){return t=g.call(t,l).sort(o),Math.ceil((n-e)/(2*(S(t,.75)-S(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*h(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=j,t.max=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},t.mean=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=l(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=l(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},t.median=function(t,e){var n,r=t.length,i=-1,a=[];if(null==e)for(;++i<r;)isNaN(n=l(t[i]))||a.push(n);else for(;++i<r;)isNaN(n=l(e(t[i],i,t)))||a.push(n);return S(a.sort(o),.5)},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},t.min=M,t.pairs=function(t,n){null==n&&(n=e);for(var r=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);r<i;)a[r]=n(o,o=t[++r]);return a},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=S,t.range=b,t.scan=function(t,e){if(n=t.length){var n,r,i=0,a=0,u=t[a];for(null==e&&(e=o);++i<n;)(e(r=t[i],u)<0||0!==e(u,u))&&(u=r,a=i);return 0===e(u,u)?a:void 0}},t.shuffle=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.sum=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},t.ticks=function(t,e,r){var i,o,a,u,c=-1;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(u=n(t,e,r))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),e=Math.floor(e/u),a=new Array(o=Math.ceil(e-t+1));++c<o;)a[c]=(t+c)*u;else for(t=Math.floor(t*u),e=Math.ceil(e*u),a=new Array(o=Math.ceil(t-e+1));++c<o;)a[c]=(t-c)/u;return i&&a.reverse(),a},t.tickIncrement=n,t.tickStep=r,t.transpose=A,t.variance=f,t.zip=function(){return A(arguments)},Object.defineProperty(t,"__esModule",{value:!0})})},{}],21:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=O.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=z.exec(t))?i(parseInt(e[1],16)):(e=R.exec(t))?new c(e[1],e[2],e[3],1):(e=P.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=E.exec(t))?o(e[1],e[2],e[3],e[4]):(e=C.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=N.exec(t))?s(e[1],e[2]/100,e[3]/100,1):(e=T.exec(t))?s(e[1],e[2]/100,e[3]/100,e[4]):I.hasOwnProperty(t)?i(I[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function i(t){return new c(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new c(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,n,r){return 1===arguments.length?a(t):new c(t,e,n,null==r?1:r)}function c(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function s(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new f(t,e,n,r)}function l(t,e,i,o){return 1===arguments.length?function(t){if(t instanceof f)return new f(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new f;if(t instanceof f)return t;var e=(t=t.rgb()).r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),u=Math.max(e,i,o),c=NaN,s=u-a,l=(u+a)/2;return s?(c=e===u?(i-o)/s+6*(i<o):i===u?(o-e)/s+2:(e-i)/s+4,s/=l<.5?u+a:2-u-a,c*=60):s=l>0&&l<1?0:c,new f(c,s,l,t.opacity)}(t):new f(t,e,i,null==o?1:o)}function f(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function h(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function p(t){if(t instanceof v)return new v(t.l,t.a,t.b,t.opacity);if(t instanceof _){var e=t.h*F;return new v(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof c||(t=a(t));var n=b(t.r),r=b(t.g),i=b(t.b),o=g((.4124564*n+.3575761*r+.1804375*i)/B),u=g((.2126729*n+.7151522*r+.072175*i)/D);return new v(116*u-16,500*(o-u),200*(u-g((.0193339*n+.119192*r+.9503041*i)/q)),t.opacity)}function d(t,e,n,r){return 1===arguments.length?p(t):new v(t,e,n,null==r?1:r)}function v(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function g(t){return t>G?Math.pow(t,1/3):t/$+Y}function y(t){return t>H?t*t*t:$*(t-Y)}function m(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function b(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function w(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof _)return new _(t.h,t.c,t.l,t.opacity);t instanceof v||(t=p(t));var e=Math.atan2(t.b,t.a)*X;return new _(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new _(t,e,n,null==r?1:r)}function _(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function x(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);t instanceof c||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Z*r+K*e-J*n)/(Z+K-J),o=r-i,u=(Q*(n-i)-U*o)/V,s=Math.sqrt(u*u+o*o)/(Q*i*(1-i)),l=s?Math.atan2(u,o)*X-120:NaN;return new j(l<0?l+360:l,s,i,t.opacity)}(t):new j(t,e,n,null==r?1:r)}function j(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var S=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},M="\\s*([+-]?\\d+)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",k="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O=/^#([0-9a-f]{3})$/,z=/^#([0-9a-f]{6})$/,R=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),P=new RegExp("^rgb\\("+[k,k,k]+"\\)$"),E=new RegExp("^rgba\\("+[M,M,M,A]+"\\)$"),C=new RegExp("^rgba\\("+[k,k,k,A]+"\\)$"),N=new RegExp("^hsl\\("+[A,k,k]+"\\)$"),T=new RegExp("^hsla\\("+[A,k,k,A]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};S(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),S(c,u,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),S(f,l,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new f(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new f(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new c(h(t>=240?t-240:t+120,i,r),h(t,i,r),h(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var F=Math.PI/180,X=180/Math.PI,B=.95047,D=1,q=1.08883,Y=4/29,H=6/29,$=3*H*H,G=H*H*H;S(v,d,e(n,{brighter:function(t){return new v(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new v(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=D*y(t),e=B*y(e),n=q*y(n),new c(m(3.2404542*e-1.5371385*t-.4985314*n),m(-.969266*e+1.8760108*t+.041556*n),m(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),S(_,w,e(n,{brighter:function(t){return new _(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new _(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}));var L=-.14861,W=1.78277,U=-.29227,V=-.90649,Q=1.97294,K=Q*V,J=Q*W,Z=W*U-V*L;S(j,x,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new j(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*F,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new c(255*(e+n*(L*r+W*i)),255*(e+n*(U*r+V*i)),255*(e+n*(Q*r)),this.opacity)}})),t.color=r,t.rgb=u,t.hsl=l,t.lab=d,t.hcl=w,t.cubehelix=x,Object.defineProperty(t,"__esModule",{value:!0})})},{}],22:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new n(i)}function n(t){this._=t}function r(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=i,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var i={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,i=this._,o=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",i),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<u;)if(n=(t=o[a]).type)i[n]=r(i[n],t.name,e);else if(null==e)for(n in i)i[n]=r(i[n],t.name,null);return this}for(;++a<u;)if((n=(t=o[a]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},{}],23:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(t,e){var r=t.document.documentElement,i=n.select(t).on("dragstart.drag",null);e&&(i.on("click.drag",l,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function o(t,e,n,r,i,o,a,u,c,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=s}function a(){return!n.event.button}function u(){return this.parentNode}function c(t){return null==t?{x:n.event.x,y:n.event.y}:t}function s(){return"ontouchstart"in this}var l=function(){n.event.preventDefault(),n.event.stopImmediatePropagation()},f=function(t){var e=t.document.documentElement,r=n.select(t).on("dragstart.drag",l,!0);"onselectstart"in e?r.on("selectstart.drag",l,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},h=function(t){return function(){return t}};o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};t.drag=function(){function t(t){t.on("mousedown.drag",p).filter(k).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!j&&S.apply(this,arguments)){var t=b("mouse",M.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",d,!0).on("mouseup.drag",v,!0),f(n.event.view),r(),x=!1,w=n.event.clientX,_=n.event.clientY,t("start"))}}function d(){if(l(),!x){var t=n.event.clientX-w,e=n.event.clientY-_;x=t*t+e*e>P}O.mouse("drag")}function v(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),i(n.event.view,x),l(),O.mouse("end")}function g(){if(S.apply(this,arguments)){var t,e,i=n.event.changedTouches,o=M.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(e=b(i[t].identifier,o,n.touch,this,arguments))&&(r(),e("start"))}}function y(){var t,e,r=n.event.changedTouches,i=r.length;for(t=0;t<i;++t)(e=O[r[t].identifier])&&(l(),e("drag"))}function m(){var t,e,i=n.event.changedTouches,o=i.length;for(j&&clearTimeout(j),j=setTimeout(function(){j=null},500),t=0;t<o;++t)(e=O[i[t].identifier])&&(r(),e("end"))}function b(e,r,i,a,u){var c,s,l,f=i(r,e),h=z.copy();if(n.customEvent(new o(t,"beforestart",c,e,R,f[0],f[1],0,0,h),function(){return null!=(n.event.subject=c=A.apply(a,u))&&(s=c.x-f[0]||0,l=c.y-f[1]||0,!0)}))return function p(d){var v,g=f;switch(d){case"start":O[e]=p,v=R++;break;case"end":delete O[e],--R;case"drag":f=i(r,e),v=R}n.customEvent(new o(t,d,c,e,v,f[0]+s,f[1]+l,f[0]-g[0],f[1]-g[1],h),h.apply,h,[d,a,u])}}var w,_,x,j,S=a,M=u,A=c,k=s,O={},z=e.dispatch("start","drag","end"),R=0,P=0;return t.filter=function(e){return arguments.length?(S="function"==typeof e?e:h(!!e),t):S},t.container=function(e){return arguments.length?(M="function"==typeof e?e:h(e),t):M},t.subject=function(e){return arguments.length?(A="function"==typeof e?e:h(e),t):A},t.touchable=function(e){return arguments.length?(k="function"==typeof e?e:h(!!e),t):k},t.on=function(){var e=z.on.apply(z,arguments);return e===z?t:e},t.clickDistance=function(e){return arguments.length?(P=(e=+e)*e,t):Math.sqrt(P)},t},t.dragDisable=f,t.dragEnable=i,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":22,"d3-selection":27}],24:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function r(t){return(1-Math.cos(l*t))/2}function i(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function a(t){return(t=+t)<h?_*t*t:t<d?_*(t-=p)*t+v:t<y?_*(t-=g)*t+m:_*(t-=b)*t+w}var u=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),c=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),s=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),l=Math.PI,f=l/2,h=4/11,p=6/11,d=8/11,v=.75,g=9/11,y=10/11,m=.9375,b=21/22,w=63/64,_=1/h/h,x=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),j=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),S=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),M=2*Math.PI,A=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=M);return r.amplitude=function(e){return t(e,n*M)},r.period=function(n){return t(e,n)},r}(1,.3),k=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=M);return r.amplitude=function(e){return t(e,n*M)},r.period=function(n){return t(e,n)},r}(1,.3),O=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=M);return r.amplitude=function(e){return t(e,n*M)},r.period=function(n){return t(e,n)},r}(1,.3);t.easeLinear=function(t){return+t},t.easeQuad=e,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=e,t.easeCubic=n,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=n,t.easePoly=s,t.easePolyIn=u,t.easePolyOut=c,t.easePolyInOut=s,t.easeSin=r,t.easeSinIn=function(t){return 1-Math.cos(t*f)},t.easeSinOut=function(t){return Math.sin(t*f)},t.easeSinInOut=r,t.easeExp=i,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=i,t.easeCircle=o,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=o,t.easeBounce=a,t.easeBounceIn=function(t){return 1-a(1-t)},t.easeBounceOut=a,t.easeBounceInOut=function(t){return((t*=2)<=1?1-a(1-t):a(t-1)+1)/2},t.easeBack=S,t.easeBackIn=x,t.easeBackOut=j,t.easeBackInOut=S,t.easeElastic=k,t.easeElasticIn=A,t.easeElasticOut=k,t.easeElasticInOut=O,Object.defineProperty(t,"__esModule",{value:!0})})},{}],25:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):b(isNaN(t)?e:t)}function o(t){return 1==(t=+t)?a:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):b(isNaN(e)?n:e)}}function a(t,e){var n=e-t;return n?r(t,n):b(isNaN(t)?e:t)}function u(t){return function(n){var r,i,o=n.length,a=new Array(o),u=new Array(o),c=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,u[r]=i.g||0,c[r]=i.b||0;return a=t(a),u=t(u),c=t(c),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=c(t),i+""}}}function c(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);u.push({i:c-4,x:M(t,i)},{i:c-2,x:M(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:M(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:M(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:M(t,n)},{i:u-2,x:M(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)u[(e=c[n]).i]=e.x(t);return u.join("")}}}function s(t){return((t=Math.exp(t))+1/t)/2}function l(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=a(n.s,r.s),u=a(n.l,r.l),c=a(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=u(t),n.opacity=c(t),n+""}}}function f(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=a(n.c,r.c),u=a(n.l,r.l),c=a(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=u(t),n.opacity=c(t),n+""}}}function h(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),u=a(n.s,i.s),c=a(n.l,i.l),s=a(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=u(t),n.l=c(Math.pow(t,r)),n.opacity=s(t),n+""}}return r=+r,i.gamma=n,i}(1)}var p,d,v,g,y=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,c=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,u,o,a,c)}},m=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],u=t[(i+1)%e],c=t[(i+2)%e];return n((r-i/e)*e,o,a,u,c)}},b=function(t){return function(){return t}},w=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),u=i(t.b,n.b),c=a(t.opacity,n.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=u(e),t.opacity=c(e),t+""}}var i=o(n);return r.gamma=t,r}(1),_=u(y),x=u(m),j=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=R(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},S=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},M=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},A=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=R(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},k=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O=new RegExp(k.source,"g"),z=function(t,e){var n,r,i,o=k.lastIndex=O.lastIndex=0,a=-1,u=[],c=[];for(t+="",e+="";(n=k.exec(t))&&(r=O.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:M(n,r)})),o=O.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)u[(n=c[r]).i]=n.x(t);return u.join("")})},R=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?b(n):("number"===i?M:"string"===i?(r=e.color(n))?(n=r,w):z:n instanceof e.color?w:n instanceof Date?S:Array.isArray(n)?j:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?A:M)(t,n)},P=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},C=function(t,e,n,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*P,skewX:Math.atan(c)*P,scaleX:a,scaleY:u}},N=c(function(t){return"none"===t?E:(p||(p=document.createElement("DIV"),d=document.documentElement,v=document.defaultView),p.style.transform=t,t=v.getComputedStyle(d.appendChild(p),null).getPropertyValue("transform"),d.removeChild(p),t=t.slice(7,-1).split(","),C(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),T=c(function(t){return null==t?E:(g||(g=document.createElementNS("http://www.w3.org/2000/svg","g")),g.setAttribute("transform",t),(t=g.transform.baseVal.consolidate())?(t=t.matrix,C(t.a,t.b,t.c,t.d,t.e,t.f)):E)},", ",")",")"),I=Math.SQRT2,F=l(i),X=l(a),B=f(i),D=f(a),q=h(i),Y=h(a);t.interpolate=R,t.interpolateArray=j,t.interpolateBasis=y,t.interpolateBasisClosed=m,t.interpolateDate=S,t.interpolateNumber=M,t.interpolateObject=A,t.interpolateRound=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},t.interpolateString=z,t.interpolateTransformCss=N,t.interpolateTransformSvg=T,t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],c=e[1],l=e[2],f=u-i,h=c-o,p=f*f+h*h;if(p<1e-12)r=Math.log(l/a)/I,n=function(t){return[i+t*f,o+t*h,a*Math.exp(I*t*r)]};else{var d=Math.sqrt(p),v=(l*l-a*a+4*p)/(2*a*2*d),g=(l*l-a*a-4*p)/(2*l*2*d),y=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-y)/I,n=function(t){var e=t*r,n=s(y),u=a/(2*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(I*e+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[i+u*f,o+u*h,a*n/s(I*e+y)]}}return n.duration=1e3*r,n},t.interpolateRgb=w,t.interpolateRgbBasis=_,t.interpolateRgbBasisClosed=x,t.interpolateHsl=F,t.interpolateHslLong=X,t.interpolateLab=function(t,n){var r=a((t=e.lab(t)).l,(n=e.lab(n)).l),i=a(t.a,n.a),o=a(t.b,n.b),u=a(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=u(e),t+""}},t.interpolateHcl=B,t.interpolateHclLong=D,t.interpolateCubehelix=q,t.interpolateCubehelixLong=Y,t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":21}],26:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function n(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,o=t._tasks[e],a=o.length-1,c=o[a];o[a]=function(t,e){return function(o,a){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=o?r(t,o):(t._data[e]=a,t._waiting?n(t):i(t))))}}(t,e),--t._waiting,++t._active,o=c.apply(null,o),t._tasks[e]&&(t._tasks[e]=o||u)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])r(t,e);else if(!t._data)throw e}}function r(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,i(t)}function i(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function o(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new e(t)}var a=[].slice,u={};e.prototype=o.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=a.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),n(this),this},abort:function(){return null==this._error&&r(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},i(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,i(this),this}},t.queue=o,Object.defineProperty(t,"__esModule",{value:!0})})},{}],27:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),E.hasOwnProperty(e)?{space:E[e],local:t}:t}function n(t){var n=e(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===P&&e.documentElement.namespaceURI===P?e.createElement(t):e.createElementNS(n,t)}})(n)}function r(t){return null==t?function(){}:function(){return this.querySelector(t)}}function i(t){return null==t?function(){return[]}:function(){return this.querySelectorAll(t)}}function o(t){return new Array(t.length)}function a(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function u(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each(function(t){d[++l]=t}),d;var n=e?function(t,e,n,r,i,o,u){var c,s,l,f={},h=e.length,p=o.length,d=new Array(h);for(c=0;c<h;++c)(s=e[c])&&(d[c]=l=F+u.call(s,s.__data__,c,e),l in f?i[c]=s:f[l]=s);for(c=0;c<p;++c)(s=f[l=F+u.call(t,o[c],c,o)])?(r[c]=s,s.__data__=o[c],f[l]=null):n[c]=new a(t,o[c]);for(c=0;c<h;++c)(s=e[c])&&f[d[c]]===s&&(i[c]=s)}:function(t,e,n,r,i,o){for(var u,c=0,s=e.length,l=o.length;c<l;++c)(u=e[c])?(u.__data__=o[c],r[c]=u):n[c]=new a(t,o[c]);for(;c<s;++c)(u=e[c])&&(i[c]=u)},r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,u=new Array(o),c=new Array(o),s=new Array(o),l=0;l<o;++l){var f=r[l],h=i[l],p=h.length,d=t.call(f,f&&f.__data__,l,r),v=d.length,g=c[l]=new Array(v),y=u[l]=new Array(v);n(f,h,g,y,s[l]=new Array(p),d,e);for(var m,b,w=0,_=0;w<v;++w)if(m=g[w]){for(w>=_&&(_=w+1);!(b=y[_])&&++_<v;);m._next=b||null}}return u=new S(u,r),u._enter=c,u._exit=s,u}function c(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function s(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function l(t,e){return t.style.getPropertyValue(e)||s(t).getComputedStyle(t,null).getPropertyValue(e)}function f(t){return t.trim().split(/^|\s+/)}function h(t){return t.classList||new p(t)}function p(t){this._node=t,this._names=f(t.getAttribute("class")||"")}function d(t,e){for(var n=h(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function v(t,e){for(var n=h(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function g(t,e){var n=f(t+"");if(arguments.length<2){for(var r=h(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?d:v)(this,t)}}:e?function(t){return function(){d(this,t)}}:function(t){return function(){v(this,t)}})(n,e))}function y(){this.nextSibling&&this.parentNode.appendChild(this)}function m(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function b(){var t=this.parentNode;t&&t.removeChild(this)}function w(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function _(t,e,n){var r=X.hasOwnProperty(t.type)?function(t,e,n){return t=w(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}:w;return function(i,o,a){var u,c=this.__on,s=r(e,o,a);if(c)for(var l=0,f=c.length;l<f;++l)if((u=c[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=n),void(u.value=e);this.addEventListener(t.type,s,n),u={type:t.type,name:t.name,value:e,listener:s,capture:n},c?c.push(u):this.__on=[u]}}function x(t,e,n){var r=s(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function j(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return x(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return x(this,t,e)}})(t,e))}function S(t,e){this._groups=t,this._parents=e}function M(){return new S([[document.documentElement]],B)}function A(t){return"string"==typeof t?new S([[document.querySelector(t)]],[document.documentElement]):new S([[t]],B)}function k(){return new O}function O(){this._="@"+(++D).toString(36)}function z(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function R(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}var P="http://www.w3.org/1999/xhtml",E={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},C=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var N=document.documentElement;if(!N.matches){var T=N.webkitMatchesSelector||N.msMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector;C=function(t){return function(){return T.call(this,t)}}}}var I=C;a.prototype={constructor:a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var F="$";p.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var X={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(X={mouseenter:"mouseover",mouseleave:"mouseout"})}var B=[null];S.prototype=M.prototype={constructor:S,select:function(t){"function"!=typeof t&&(t=r(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var a,u,c=e[o],s=c.length,l=i[o]=new Array(s),f=0;f<s;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),l[f]=u);return new S(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=[],o=[],a=0;a<n;++a)for(var u,c=e[a],s=c.length,l=0;l<s;++l)(u=c[l])&&(r.push(t.call(u,u.__data__,l,c)),o.push(u));return new S(r,o)},filter:function(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new S(r,this._parents)},data:u,enter:function(){return new S(this._enter||this._groups.map(o),this._parents)},exit:function(){return new S(this._exit||this._groups.map(o),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],f=s.length,h=a[u]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;u<r;++u)a[u]=e[u];return new S(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=c);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,l=i[o]=new Array(s),f=0;f<s;++f)(a=u[f])&&(l[f]=a);l.sort(e)}return new S(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var r=e(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?r.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:r.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(r,n))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):l(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:g,text:function(t){return arguments.length?this.each(null==t?function(){this.textContent=""}:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?function(){this.innerHTML=""}:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(y)},lower:function(){return this.each(m)},append:function(t){var e="function"==typeof t?t:n(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var i="function"==typeof t?t:n(t),o=null==e?function(){return null}:"function"==typeof e?e:r(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(b)},clone:function(t){return this.select(t?function(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}:function(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)})},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=o.length;if(!(arguments.length<2)){for(u=e?_:function(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}},null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:j};var D=0;O.prototype=k.prototype={constructor:O,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return A(n(t).call(document.documentElement))},t.creator=n,t.local=k,t.matcher=I,t.mouse=function(t){var e=z();return e.changedTouches&&(e=e.changedTouches[0]),R(t,e)},t.namespace=e,t.namespaces=E,t.clientPoint=R,t.select=A,t.selectAll=function(t){return"string"==typeof t?new S([document.querySelectorAll(t)],[document.documentElement]):new S([null==t?[]:t],B)},t.selection=M,t.selector=r,t.selectorAll=i,t.style=l,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=z().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return R(t,r);return null},t.touches=function(t,e){null==e&&(e=z().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=R(t,e[n]);return i},t.window=s,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,"__esModule",{value:!0})})},{}],28:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){return g||(b(n),g=m.now()+y)}function n(){g=0}function r(){this._call=this._time=this._next=null}function i(t,e,n){var i=new r;return i.restart(t,e,n),i}function o(){e(),++f;for(var t,n=s;n;)(t=g-n._time)>=0&&n._call.call(null,t),n=n._next;--f}function a(){g=(v=m.now())+y,f=h=0;try{o()}finally{f=0,function(){var t,e,n=s,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:s=e);l=t,c(r)}(),g=0}}function u(){var t=m.now(),e=t-v;e>d&&(y-=e,v=t)}function c(t){if(!f){h&&(h=clearTimeout(h));t-g>24?(t<1/0&&(h=setTimeout(a,t-m.now()-y)),p&&(p=clearInterval(p))):(p||(v=m.now(),p=setInterval(u,d)),f=1,b(a))}}var s,l,f=0,h=0,p=0,d=1e3,v=0,g=0,y=0,m="object"==typeof performance&&performance.now?performance:Date,b="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};r.prototype=i.prototype={constructor:r,restart:function(t,n,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?e():+r)+(null==n?0:+n),this._next||l===this||(l?l._next=this:s=this,l=this),this._call=t,this._time=r,c()},stop:function(){this._call&&(this._call=null,this._time=1/0,c())}};t.now=e,t.timer=i,t.timerFlush=o,t.timeout=function(t,e,n){var i=new r;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},t.interval=function(t,n,i){var o=new r,a=n;return null==n?(o.restart(t,n,i),o):(n=+n,i=null==i?e():+i,o.restart(function e(r){r+=a,o.restart(e,a+=n,i),t(r)},n,i),o)},Object.defineProperty(t,"__esModule",{value:!0})})},{}],29:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-timer"),t("d3-interpolate"),t("d3-color"),t("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a){"use strict";function u(t,e){var n=s(t,e);if(n.state>y)throw new Error("too late; already scheduled");return n}function c(t,e){var n=s(t,e);if(n.state>b)throw new Error("too late; already started");return n}function s(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function l(t,e,n){var r=t._id;return t.each(function(){var t=c(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return s(t,r).value[e]}}function f(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function h(t){return e.selection().transition(t)}function p(){return++O}function d(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return R.time=r.now(),R;return n}var v=n.dispatch("start","end","interrupt"),g=[],y=0,m=1,b=2,w=3,_=4,x=5,j=6,S=function(t,e,n,i,o,a){var u=t.__transition;if(u){if(n in u)return}else t.__transition={};!function(t,e,n){function i(s){var l,f,h,p;if(n.state!==m)return a();for(l in c)if((p=c[l]).name===n.name){if(p.state===w)return r.timeout(i);p.state===_?(p.state=j,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete c[l]):+l<e&&(p.state=j,p.timer.stop(),delete c[l])}if(r.timeout(function(){n.state===w&&(n.state=_,n.timer.restart(o,n.delay,n.time),o(s))}),n.state=b,n.on.call("start",t,t.__data__,n.index,n.group),n.state===b){for(n.state=w,u=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(p=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(u[++f]=p);u.length=f+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=x,1),i=-1,o=u.length;++i<o;)u[i].call(null,r);n.state===x&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=j,n.timer.stop(),delete c[e];for(var r in c)return;delete t.__transition}var u,c=t.__transition;c[e]=n,n.timer=r.timer(function(t){n.state=m,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:o,on:v,tween:g,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:y})},M=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>b&&n.state<x,n.state=j,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},A=function(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof o.color?i.interpolateRgb:(n=o.color(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)},k=e.selection.prototype.constructor,O=0,z=e.selection.prototype;f.prototype=h.prototype={constructor:f,select:function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selector(t));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var c,l,h=i[u],p=h.length,d=a[u]=new Array(p),v=0;v<p;++v)(c=h[v])&&(l=t.call(c,c.__data__,v,h))&&("__data__"in c&&(l.__data__=c.__data__),d[v]=l,S(d[v],n,r,v,d,s(c,r)));return new f(a,this._parents,n,r)},selectAll:function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selectorAll(t));for(var i=this._groups,o=i.length,a=[],u=[],c=0;c<o;++c)for(var l,h=i[c],p=h.length,d=0;d<p;++d)if(l=h[d]){for(var v,g=t.call(l,l.__data__,d,h),y=s(l,r),m=0,b=g.length;m<b;++m)(v=g[m])&&S(v,n,r,m,g,y);a.push(g),u.push(l)}return new f(a,u,n,r)},filter:function(t){"function"!=typeof t&&(t=e.matcher(t));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a,u=n[o],c=u.length,s=i[o]=[],l=0;l<c;++l)(a=u[l])&&t.call(a,a.__data__,l,u)&&s.push(a);return new f(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],h=s.length,p=a[u]=new Array(h),d=0;d<h;++d)(c=s[d]||l[d])&&(p[d]=c);for(;u<r;++u)a[u]=e[u];return new f(a,this._parents,this._name,this._id)},selection:function(){return new k(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=p(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,l=0;l<c;++l)if(a=u[l]){var h=s(a,e);S(a,t,n,l,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new f(r,this._parents,t,n)},call:z.call,nodes:z.nodes,node:z.node,size:z.size,empty:z.empty,each:z.each,on:function(t,e){var n=this._id;return arguments.length<2?s(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?u:c;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,n){var r=e.namespace(t),o="transform"===r?i.interpolateTransformSvg:A;return this.attrTween(t,"function"==typeof n?(r.local?function(t,e,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=e(r=a,i=u);this.removeAttribute(t)}})(r,o,l(this,"attr."+t,n)):null==n?(r.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(r):(r.local?function(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}})(r,o,n+""))},attrTween:function(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var i=e.namespace(t);return this.tween(r,(i.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(i,n))},style:function(t,n,r){var o="transform"==(t+="")?i.interpolateTransformCss:A;return null==n?this.styleTween(t,function(t,n){var r,i,o;return function(){var a=e.style(this,t),u=(this.style.removeProperty(t),e.style(this,t));return a===u?null:a===r&&u===i?o:o=n(r=a,i=u)}}(t,o)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof n?function(t,n,r){var i,o,a;return function(){var u=e.style(this,t),c=r(this);return null==c&&(this.style.removeProperty(t),c=e.style(this,t)),u===c?null:u===i&&c===o?a:a=n(i=u,o=c)}}(t,o,l(this,"style."+t,n)):function(t,n,r){var i,o;return function(){var a=e.style(this,t);return a===r?null:a===i?o:o=n(i=a,r)}}(t,o,n+""),r)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(l(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=s(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=c(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=c(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===e){i[s]=u;break}s===l&&i.push(u)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){u(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){u(this,t).delay=e}})(e,t)):s(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){c(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){c(this,t).duration=e}})(e,t)):s(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){c(this,t).ease=e}}(e,t)):s(this.node(),e).ease}};var R={time:null,delay:0,duration:250,ease:a.easeCubicInOut};e.selection.prototype.interrupt=function(t){return this.each(function(){M(this,t)})},e.selection.prototype.transition=function(t){var e,n;t instanceof f?(e=t._id,t=t._name):(e=p(),(n=R).time=r.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var u,c=i[a],s=c.length,l=0;l<s;++l)(u=c[l])&&S(u,t,e,l,c,n||d(u,e));return new f(i,this._parents,t,e)};var P=[null];t.transition=h,t.active=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>m&&n.name===e)return new f([[t]],P,e,+r)}return null},t.interrupt=M,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":21,"d3-dispatch":22,"d3-ease":24,"d3-interpolate":25,"d3-selection":27,"d3-timer":28}],30:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(t,e,n){this.k=t,this.x=e,this.y=n}function u(t){return t.__zoom||g}function c(){i.event.stopImmediatePropagation()}function s(){return!i.event.button}function l(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function f(){return this.__zoom||g}function h(){return-i.event.deltaY*(i.event.deltaMode?120:1)/500}function p(){return"ontouchstart"in this}function d(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var v=function(t){return function(){return t}};a.prototype={constructor:a,scale:function(t){return 1===t?this:new a(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new a(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var g=new a(1,0,0);u.prototype=a.prototype;var y=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()};t.zoom=function(){function t(t){t.property("__zoom",f).on("wheel.zoom",j).on("mousedown.zoom",S).on("dblclick.zoom",M).filter(T).on("touchstart.zoom",A).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){return(e=Math.max(I[0],Math.min(I[1],e)))===t.k?t:new a(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new a(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n){t.on("start.zoom",function(){_(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=_(this,t),i=E.apply(this,t),o=n||b(i),u=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),c=this.__zoom,s="function"==typeof e?e.apply(this,t):e,l=B(c.invert(o).concat(u/c.k),s.invert(o).concat(u/s.k));return function(t){if(1===t)t=s;else{var e=l(t),n=u/e[2];t=new a(n,o[0]-e[0]*n,o[1]-e[1]*n)}r.zoom(null,t)}})}function _(t,e){for(var n,r=0,i=D.length;r<i;++r)if((n=D[r]).that===t)return n;return new x(t,e)}function x(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=E.apply(t,e)}function j(){if(P.apply(this,arguments)){var t=_(this,arguments),e=this.__zoom,n=Math.max(I[0],Math.min(I[1],e.k*Math.pow(2,N.apply(this,arguments)))),r=i.mouse(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],o.interrupt(this),t.start()}y(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},H),t.zoom("mouse",C(m(u(e,n),t.mouse[0],t.mouse[1]),t.extent,F))}}function S(){if(!R&&P.apply(this,arguments)){var t=_(this,arguments),e=i.select(i.event.view).on("mousemove.zoom",function(){if(y(),!t.moved){var e=i.event.clientX-a,n=i.event.clientY-u;t.moved=e*e+n*n>$}t.zoom("mouse",C(m(t.that.__zoom,t.mouse[0]=i.mouse(t.that),t.mouse[1]),t.extent,F))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),n.dragEnable(i.event.view,t.moved),y(),t.end()},!0),r=i.mouse(this),a=i.event.clientX,u=i.event.clientY;n.dragDisable(i.event.view),c(),t.mouse=[r,this.__zoom.invert(r)],o.interrupt(this),t.start()}}function M(){if(P.apply(this,arguments)){var e=this.__zoom,n=i.mouse(this),r=e.invert(n),o=e.k*(i.event.shiftKey?.5:2),a=C(m(u(e,o),n,r),E.apply(this,arguments),F);y(),X>0?i.select(this).transition().duration(X).call(w,a,n):i.select(this).call(t.transform,a)}}function A(){if(P.apply(this,arguments)){var t,e,n,r,a=_(this,arguments),u=i.event.changedTouches,s=u.length;for(c(),e=0;e<s;++e)n=u[e],r=[r=i.touch(this,u,n.identifier),this.__zoom.invert(r),n.identifier],a.touch0?a.touch1||(a.touch1=r):(a.touch0=r,t=!0);if(z&&(z=clearTimeout(z),!a.touch1))return a.end(),void((r=i.select(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(z=setTimeout(function(){z=null},Y),o.interrupt(this),a.start())}}function k(){var t,e,n,r,o=_(this,arguments),a=i.event.changedTouches,c=a.length;for(y(),z&&(z=clearTimeout(z)),t=0;t<c;++t)e=a[t],n=i.touch(this,a,e.identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var s=o.touch0[0],l=o.touch0[1],f=o.touch1[0],h=o.touch1[1],p=(p=f[0]-s[0])*p+(p=f[1]-s[1])*p,d=(d=h[0]-l[0])*d+(d=h[1]-l[1])*d;e=u(e,Math.sqrt(p/d)),n=[(s[0]+f[0])/2,(s[1]+f[1])/2],r=[(l[0]+h[0])/2,(l[1]+h[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",C(m(e,n,r),o.extent,F))}function O(){var t,e,n=_(this,arguments),r=i.event.changedTouches,o=r.length;for(c(),R&&clearTimeout(R),R=setTimeout(function(){R=null},Y),t=0;t<o;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var z,R,P=s,E=l,C=d,N=h,T=p,I=[0,1/0],F=[[-1/0,-1/0],[1/0,1/0]],X=250,B=r.interpolateZoom,D=[],q=e.dispatch("start","zoom","end"),Y=500,H=150,$=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",f),t!==n?w(t,e):n.interrupt().each(function(){_(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},t.scaleTo=function(e,n){t.transform(e,function(){var t=E.apply(this,arguments),e=this.__zoom,r=b(t),i=e.invert(r),o="function"==typeof n?n.apply(this,arguments):n;return C(m(u(e,o),r,i),t,F)})},t.translateBy=function(e,n,r){t.transform(e,function(){return C(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),E.apply(this,arguments),F)})},t.translateTo=function(e,n,r){t.transform(e,function(){var t=E.apply(this,arguments),e=this.__zoom,i=b(t);return C(g.translate(i[0],i[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),t,F)})},x.prototype={start:function(){return 1==++this.active&&(this.index=D.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(D.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){i.customEvent(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(t,e,this.that.__zoom),q.apply,q,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(N="function"==typeof e?e:v(+e),t):N},t.filter=function(e){return arguments.length?(P="function"==typeof e?e:v(!!e),t):P},t.touchable=function(e){return arguments.length?(T="function"==typeof e?e:v(!!e),t):T},t.extent=function(e){return arguments.length?(E="function"==typeof e?e:v([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):E},t.scaleExtent=function(e){return arguments.length?(I[0]=+e[0],I[1]=+e[1],t):[I[0],I[1]]},t.translateExtent=function(e){return arguments.length?(F[0][0]=+e[0][0],F[1][0]=+e[1][0],F[0][1]=+e[0][1],F[1][1]=+e[1][1],t):[[F[0][0],F[0][1]],[F[1][0],F[1][1]]]},t.constrain=function(e){return arguments.length?(C=e,t):C},t.duration=function(e){return arguments.length?(X=+e,t):X},t.interpolate=function(e){return arguments.length?(B=e,t):B},t.on=function(){var e=q.on.apply(q,arguments);return e===q?t:e},t.clickDistance=function(e){return arguments.length?($=(e=+e)*e,t):Math.sqrt($)},t},t.zoomTransform=u,t.zoomIdentity=g,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":22,"d3-drag":23,"d3-interpolate":25,"d3-selection":27,"d3-transition":29}],31:[function(t,e,n){function r(t){function e(t){var e={rolls:[],total:NaN,source:t},o=function(t){var e;!function(t){return void 0!==n&&t.times>n}(t)?function(t){return void 0!==r&&t.faces>r}(t)&&((e=new Error("I don't have a die with that many faces.")).name="Not enough faces"):(e=new Error("I can't roll that many times.")).name="Too many rolls";return e}(t);if(o)e.error=o;else{for(var a=0;a<t.times;++a)e.rolls.push(c.rollDie(t.faces));e.total=e.rolls.reduce(i,0),e.total*=t.multiplier,e.total+=t.modifier}return e}var n,r,c=a;return t&&(t.probable&&(c=t.probable),t.numberOfRollsLimit&&(n=t.numberOfRollsLimit),t.numberOfFacesOnLargestDie&&(r=t.numberOfFacesOnLargestDie)),{roll:function(t){var n=t.trim().split(" ").map(o);return(n=n.filter(u)).map(e)}}}function i(t,e){return t+e}function o(t){var e={};if("string"!=typeof t)throw new Error("Parameter `command` must be a string, not undefined");if(-1!==t.search(/d\d/i)){var n=t.match(/(\d+)d/i);e.times=n&&n[1]&&parseInt(n[1])||1;var r=t.match(/d(\d+)/i);e.faces=r&&r[1]&&parseInt(r[1])||0;var i=t.match(/\(k(\d+)\)/i);e.keep=i&&i[1]&&parseInt(i[1])||null;var o=/-L/.test(t);e.lowest=o;var a=/-H/.test(t);e.highest=a;var u=t.match(/(?!d\d+)x([\d.]+)/);e.multiplier=u&&u[1]&&parseFloat(u[1])||1;var c=t.match(/(\+[\d.]+\)?|-[\d.]+)\)?/);e.modifier=c&&c[1]&&parseFloat(c[1])||0;var s=t.match(/^(\d+)x\(|\)x(\d+)$/);return e.repeat=s&&s[1]&&parseInt(s[1])||s&&s[2]&&parseInt(s[2])||1,e}}var a=t("probable"),u=t("lodash.isobject");e.exports=r},{"lodash.isobject":57,probable:32}],32:[function(t,e,n){function r(t){function e(t){return Math.floor(s()*t)}function n(t){function n(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],i=r[0];if(e>=i[0]&&e<=i[1])return r[1]}}(r,t)}var r=t,i=r[r.length-1][0][1]-r[0][0][0]+1;return{outcomeAtIndex:n,roll:function(){var t=n(e(i));return"function"==typeof t?t():t},length:i,getRangesAndOutcomesArray:function(){return r}}}function r(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(i)).forEach(function(t){var r=t[0],i=t[1],o=n+1,a=o+r-1;e.push([[o,a],i]),n=a}),e}function i(t,e){return t[0]>e[0]?-1:1}function o(t){return n(function(t){var e=[];for(var n in t){var r=function(t){var e=t.split("-");if(e.length>2)return;return 1===e.length?[+t,+t]:[+e[0],+e[1]]}(n),i=t[n];if("object"==typeof i)if(Array.isArray(i))i=function(t,e){return function(){return a(t,e)}}(i);else{var u=o(i);"function"==typeof u.roll&&(i=u.roll)}e.push([r,i])}return e}(t))}function a(t,n){return!t||"number"!=typeof t.length||t.length<1?n:t[e(t.length)]}function u(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function c(t){for(var n,r=t.length,i=Array(r),o=0;o<r;o++)(n=e(o+1))!==o&&(i[o]=i[n]),i[n]=t[o];return i}var s=Math.random;return t&&t.random&&(s=t.random),{roll:e,rollDie:function(t){return 0===t?0:e(t)+1},createRangeTable:n,createRangeTableFromDict:function(t){return n(r(t))},createTableFromDef:o,convertDictToRangesAndOutcomePairs:r,pickFromArray:a,crossArrays:u,getCartesianProduct:function(t){return t.slice(1).reduce(u,t[0])},shuffle:c,sample:function(t,e){return c(t).slice(0,e)}}}var i=r();"object"==typeof e&&(e.exports=i,e.exports.createProbable=r)},{}],33:[function(t,e,n){e.exports=function(t,e){var n=t;if(e.every(function(t){return n=n[t]},!0))return n}},{}],34:[function(t,e,n){function r(t){if(t){console.error(t,t.stack);var e="";t.name&&(e+=t.name+": "),e+=t.message,t.stack&&(e+=" | "+t.stack.toString()),function(t){var e=document.getElementById("status-message");e.textContent=t,e.classList.remove("hidden")}(e)}}e.exports=r},{}],35:[function(t,e,n){"object"==typeof e&&"object"==typeof e.exports&&(e.exports=function(){function t(t){return t[~~(Math.random()*t.length)]}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return{randomId:function(n){for(var r="",i=0;i<n;++i)r+=t(e);return r}}}())},{}],36:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},{}],37:[function(t,e,n){function r(t,e,n){var r=typeof t;return"function"==r?void 0===e?t:h(t,e,n):null==t?l:"object"==r?function(t){var e=function(t){var e=d(t),n=e.length;for(;n--;)e[n][2]=a(e[n][1]);return e}(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(void 0!==r||n in u(t)))}}return function(t){return function(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;t=u(t);for(;r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){var c=(a=e[r])[0],s=t[c],l=a[1];if(o&&a[2]){if(void 0===s&&!(c in t))return!1}else{var h=n?n(s,l,c):void 0;if(!(void 0===h?f(l,s,n,!0):h))return!1}}return!0}(t,e)}}(t):void 0===e?function(t){return o(t)?function(t){return function(e){return null==e?void 0:e[t]}}(t):function(t){var e=t+"";return t=c(t),function(n){return i(n,t,e)}}(t)}(t):function(t,e){var n=p(t),r=o(t)&&a(e),s=t+"";return t=c(t),function(o){if(null==o)return!1;var a=s;if(o=u(o),(n||!r)&&!(a in o)){if(null==(o=1==t.length?o:i(o,function(t,e,n){var r=-1,i=t.length;(e=null==e?0:+e||0)<0&&(e=-e>i?0:i+e),(n=void 0===n||n>i?i:+n||0)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}(t,0,-1))))return!1;a=function(t){var e=t?t.length:0;return e?t[e-1]:void 0}(t),o=u(o)}return o[a]===e?void 0!==e||a in o:f(e,o[a],void 0,!0)}}(t,e)}function i(t,e,n){if(null!=t){void 0!==n&&n in u(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:void 0}}function o(t,e){var n=typeof t;if("string"==n&&g.test(t)||"number"==n)return!0;if(p(t))return!1;return!v.test(t)||null!=e&&t in u(e)}function a(t){return t==t&&!s(t)}function u(t){return s(t)?t:Object(t)}function c(t){if(p(t))return t;var e=[];return function(t){return null==t?"":t+""}(t).replace(y,function(t,n,r,i){e.push(r?i.replace(m,"$1"):n||t)}),e}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return t}var f=t("lodash._baseisequal"),h=t("lodash._bindcallback"),p=t("lodash.isarray"),d=t("lodash.pairs"),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,g=/^\w*$/,y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,m=/\\(\\)?/g;e.exports=r},{"lodash._baseisequal":42,"lodash._bindcallback":45,"lodash.isarray":55,"lodash.pairs":61}],38:[function(t,e,n){function r(t,e){return function(n,r){var o=n?s(n):0;if(!function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(o))return t(n,r);for(var u=e?o:-1,c=i(n);(e?u--:++u<o)&&!1!==r(c[u],u,c););return n}}function i(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}var o=t("lodash.keys"),a=9007199254740991,u=r(function(t,e){return c(t,e,o)}),c=function(t){return function(e,n,r){for(var o=i(e),a=r(e),u=a.length,c=t?u:-1;t?c--:++c<u;){var s=a[c];if(!1===n(o[s],s,o))break}return e}}(),s=function(t){return function(e){return null==e?void 0:e[t]}}("length");e.exports=u},{"lodash.keys":59}],39:[function(t,e,n){e.exports=function(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}},{}],40:[function(t,e,n){e.exports=function(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}},{}],41:[function(t,e,n){function r(t,e,n){if(null!=t){void 0!==n&&n in function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:void 0}}e.exports=r},{}],42:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function i(t,e,n,y,w,_){return t===e||(null==t||null==e||!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&!function(t){return!!t&&"object"==typeof t}(e)?t!=t&&e!=e:function(t,e,n,i,y,w,_){var x=o(t),j=o(e),S=s,M=s;x||((S=b.call(t))==c?S=d:S!=d&&(x=a(t)));j||((M=b.call(e))==c?M=d:M!=d&&(j=a(e)));var A=S==d,k=M==d,O=S==M;if(O&&!x&&!A)return function(t,e,n){switch(n){case l:case f:return+t==+e;case h:return t.name==e.name&&t.message==e.message;case p:return t!=+t?e!=+e:t==+e;case v:case g:return t==e+""}return!1}(t,e,S);if(!y){var z=A&&m.call(t,"__wrapped__"),R=k&&m.call(e,"__wrapped__");if(z||R)return n(z?t.value():t,R?e.value():e,i,y,w,_)}if(!O)return!1;w||(w=[]),_||(_=[]);var P=w.length;for(;P--;)if(w[P]==t)return _[P]==e;w.push(t),_.push(e);var E=(x?function(t,e,n,i,o,a,u){var c=-1,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;for(;++c<s;){var f=t[c],h=e[c],p=i?i(o?h:f,o?f:h,c):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!r(e,function(t){return f===t||n(f,t,i,o,a,u)}))return!1}else if(f!==h&&!n(f,h,i,o,a,u))return!1}return!0}:function(t,e,n,r,i,o,a){var c=u(t),s=c.length,l=u(e).length;if(s!=l&&!i)return!1;var f=s;for(;f--;){var h=c[f];if(!(i?h in e:m.call(e,h)))return!1}var p=i;for(;++f<s;){h=c[f];var d=t[h],v=e[h],g=r?r(i?v:d,i?d:v,h):void 0;if(!(void 0===g?n(d,v,r,i,o,a):g))return!1;p||(p="constructor"==h)}if(!p){var y=t.constructor,b=e.constructor;if(y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b))return!1}return!0})(t,e,n,i,y,w,_);return w.pop(),_.pop(),E}(t,e,i,n,y,w,_))}var o=t("lodash.isarray"),a=t("lodash.istypedarray"),u=t("lodash.keys"),c="[object Arguments]",s="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Number]",d="[object Object]",v="[object RegExp]",g="[object String]",y=Object.prototype,m=y.hasOwnProperty,b=y.toString;e.exports=i},{"lodash.isarray":55,"lodash.istypedarray":58,"lodash.keys":59}],43:[function(t,e,n){function r(t,e,n){var r=e.length,o=r,a=!n;if(null==t)return!o;for(t=function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}(t);r--;){var u=e[r];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++r<o;){var c=(u=e[r])[0],s=t[c],l=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var f=n?n(s,l,c):void 0;if(!(void 0===f?i(l,s,n,!0):f))return!1}}return!0}var i=t("lodash._baseisequal");e.exports=r},{"lodash._baseisequal":42}],44:[function(t,e,n){function r(t){var e=function(t){var e=a(t),n=e.length;for(;n--;)e[n][2]=function(t){return t==t&&!i(t)}(e[n][1]);return e}(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(void 0!==r||n in function(t){return i(t)?t:Object(t)}(t)))}}return function(t){return o(t,e)}}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var o=t("lodash._baseismatch"),a=t("lodash.pairs");e.exports=r},{"lodash._baseismatch":43,"lodash.pairs":61}],45:[function(t,e,n){function r(t){return t}e.exports=function(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}},{}],46:[function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return function(t){if(null==t)return!1;if(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&s.call(t)==i}(t))return l.test(u.call(t));return function(t){return!!t&&"object"==typeof t}(t)&&o.test(t)}(n)?n:void 0}var i="[object Function]",o=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,s=a.toString,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{}],47:[function(t,e,n){var r=t("lodash.isarray"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,o=/\\(\\)?/g;e.exports=function(t){if(r(t))return t;var e=[];return function(t){return null==t?"":t+""}(t).replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e}},{"lodash.isarray":55}],48:[function(t,e,n){(function(t){function r(t,e){return t.set(e[0],e[1]),t}function i(t,e){return t.add(e),t}function o(t,e,n,r){var i=-1,o=t?t.length:0;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function a(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function u(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function c(t,e){return function(n){return t(e(n))}}function s(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function l(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function p(t){this.__data__=new f(t)}function d(t,e){var n=Lt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&A(t)}(t)&&mt.call(t,"callee")&&(!At.call(t,"callee")||bt.call(t)==C)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!mt.call(t,o)||i&&("length"==o||function(t,e){return!!(e=null==e?E:e)&&("number"==typeof t||it.test(t))&&t>-1&&t%1==0&&t<e}(o,r))||n.push(o);return n}function v(t,e,n){var r=t[e];mt.call(t,e)&&M(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function g(t,e){for(var n=t.length;n--;)if(M(t[n][0],e))return n;return-1}function y(t,e,n,c,l,f,h){var d;if(c&&(d=f?c(t,l,f,h):c(t)),void 0!==d)return d;if(!O(t))return t;var g=Lt(t);if(g){if(d=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&mt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,d)}else{var m=Gt(t),_=m==I||m==F;if(Wt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(m==D||m==C||_&&!f){if(a(t))return f?t:{};if(d=function(t){return"function"!=typeof t.constructor||j(t)?{}:function(t){return O(t)?Mt(t):{}}(St(t))}(_?{}:t),!e)return function(t,e){return w(t,$t(t),e)}(t,function(t,e){return t&&w(e,z(e),t)}(d,t))}else{if(!ot[m])return f?t:{};d=function(t,e,n,a){var c=t.constructor;switch(e){case G:return b(t);case N:case T:return new c(+t);case L:return function(t,e){var n=e?b(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,a);case W:case U:case V:case Q:case K:case J:case Z:case tt:case et:return function(t,e){var n=e?b(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,a);case X:return function(t,e,n){return o(e?n(u(t),!0):u(t),r,new t.constructor)}(t,a,n);case B:case H:return new c(t);case q:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Y:return function(t,e,n){return o(e?n(s(t),!0):s(t),i,new t.constructor)}(t,a,n);case $:return function(t){return Ht?Object(Ht.call(t)):{}}(t)}}(t,m,y,e)}}h||(h=new p);var x=h.get(t);if(x)return x;if(h.set(t,d),!g)var S=n?function(t){return function(t,e,n){var r=e(t);return Lt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,z,$t)}(t):z(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(S||t,function(r,i){S&&(r=t[i=r]),v(d,i,y(r,e,n,c,i,t,h))}),d}function m(t){if(!O(t)||function(t){return!!gt&&gt in t}(t))return!1;return(k(t)||a(t)?wt:rt).test(S(t))}function b(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function w(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],u=r?r(n[a],t[a],a,n,t):void 0;v(n,a,void 0===u?t[a]:u)}return n}function _(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function x(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return m(n)?n:void 0}function j(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||dt)}function S(t){if(null!=t){try{return yt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function M(t,e){return t===e||t!=t&&e!=e}function A(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}(t.length)&&!k(t)}function k(t){var e=O(t)?bt.call(t):"";return e==I||e==F}function O(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function z(t){return A(t)?d(t):function(t){if(!j(t))return Rt(t);var e=[];for(var n in Object(t))mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var R=200,P="__lodash_hash_undefined__",E=9007199254740991,C="[object Arguments]",N="[object Boolean]",T="[object Date]",I="[object Function]",F="[object GeneratorFunction]",X="[object Map]",B="[object Number]",D="[object Object]",q="[object RegExp]",Y="[object Set]",H="[object String]",$="[object Symbol]",G="[object ArrayBuffer]",L="[object DataView]",W="[object Float32Array]",U="[object Float64Array]",V="[object Int8Array]",Q="[object Int16Array]",K="[object Int32Array]",J="[object Uint8Array]",Z="[object Uint8ClampedArray]",tt="[object Uint16Array]",et="[object Uint32Array]",nt=/\w*$/,rt=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,ot={};ot[C]=ot["[object Array]"]=ot[G]=ot[L]=ot[N]=ot[T]=ot[W]=ot[U]=ot[V]=ot[Q]=ot[K]=ot[X]=ot[B]=ot[D]=ot[q]=ot[Y]=ot[H]=ot[$]=ot[J]=ot[Z]=ot[tt]=ot[et]=!0,ot["[object Error]"]=ot[I]=ot["[object WeakMap]"]=!1;var at="object"==typeof t&&t&&t.Object===Object&&t,ut="object"==typeof self&&self&&self.Object===Object&&self,ct=at||ut||Function("return this")(),st="object"==typeof n&&n&&!n.nodeType&&n,lt=st&&"object"==typeof e&&e&&!e.nodeType&&e,ft=lt&&lt.exports===st,ht=Array.prototype,pt=Function.prototype,dt=Object.prototype,vt=ct["__core-js_shared__"],gt=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),yt=pt.toString,mt=dt.hasOwnProperty,bt=dt.toString,wt=RegExp("^"+yt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=ft?ct.Buffer:void 0,xt=ct.Symbol,jt=ct.Uint8Array,St=c(Object.getPrototypeOf,Object),Mt=Object.create,At=dt.propertyIsEnumerable,kt=ht.splice,Ot=Object.getOwnPropertySymbols,zt=_t?_t.isBuffer:void 0,Rt=c(Object.keys,Object),Pt=x(ct,"DataView"),Et=x(ct,"Map"),Ct=x(ct,"Promise"),Nt=x(ct,"Set"),Tt=x(ct,"WeakMap"),It=x(Object,"create"),Ft=S(Pt),Xt=S(Et),Bt=S(Ct),Dt=S(Nt),qt=S(Tt),Yt=xt?xt.prototype:void 0,Ht=Yt?Yt.valueOf:void 0;l.prototype.clear=function(){this.__data__=It?It(null):{}},l.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},l.prototype.get=function(t){var e=this.__data__;if(It){var n=e[t];return n===P?void 0:n}return mt.call(e,t)?e[t]:void 0},l.prototype.has=function(t){var e=this.__data__;return It?void 0!==e[t]:mt.call(e,t)},l.prototype.set=function(t,e){return this.__data__[t]=It&&void 0===e?P:e,this},f.prototype.clear=function(){this.__data__=[]},f.prototype.delete=function(t){var e=this.__data__,n=g(e,t);return!(n<0||(n==e.length-1?e.pop():kt.call(e,n,1),0))},f.prototype.get=function(t){var e=this.__data__,n=g(e,t);return n<0?void 0:e[n][1]},f.prototype.has=function(t){return g(this.__data__,t)>-1},f.prototype.set=function(t,e){var n=this.__data__,r=g(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},h.prototype.clear=function(){this.__data__={hash:new l,map:new(Et||f),string:new l}},h.prototype.delete=function(t){return _(this,t).delete(t)},h.prototype.get=function(t){return _(this,t).get(t)},h.prototype.has=function(t){return _(this,t).has(t)},h.prototype.set=function(t,e){return _(this,t).set(t,e),this},p.prototype.clear=function(){this.__data__=new f},p.prototype.delete=function(t){return this.__data__.delete(t)},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,e){var n=this.__data__;if(n instanceof f){var r=n.__data__;if(!Et||r.length<R-1)return r.push([t,e]),this;n=this.__data__=new h(r)}return n.set(t,e),this};var $t=Ot?c(Ot,Object):function(){return[]},Gt=function(t){return bt.call(t)};(Pt&&Gt(new Pt(new ArrayBuffer(1)))!=L||Et&&Gt(new Et)!=X||Ct&&"[object Promise]"!=Gt(Ct.resolve())||Nt&&Gt(new Nt)!=Y||Tt&&"[object WeakMap]"!=Gt(new Tt))&&(Gt=function(t){var e=bt.call(t),n=e==D?t.constructor:void 0,r=n?S(n):void 0;if(r)switch(r){case Ft:return L;case Xt:return X;case Bt:return"[object Promise]";case Dt:return Y;case qt:return"[object WeakMap]"}return e});var Lt=Array.isArray,Wt=zt||function(){return!1};e.exports=function(t){return y(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(t,e,n){(function(t){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n,r){var i=t.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,i,n);var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function i(t){return t!=t}function o(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==b||(t[n]=b,o[i++]=n)}return o}function a(t){if(!v(t)||function(t){return!!Z&&Z in t}(t))return!1;return(function(t){var e=v(t)?nt.call(t):"";return e==N||e==T}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?rt:H).test(function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function u(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=function(t){return v(t)?it(t):{}}(t.prototype),r=t.apply(n,e);return v(r)?r:n}}function c(t,e,n,r,i,a,l,h,d,v){function g(){for(var w=arguments.length,_=Array(w),j=w;j--;)_[j]=arguments[j];if(x)var S=f(g),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}(_,S);if(r&&(_=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,u=-1,c=e.length,s=ot(o-a,0),l=Array(c+s),f=!r;++u<c;)l[u]=e[u];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;s--;)l[u++]=t[i++];return l}(_,r,i,x)),a&&(_=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,u=n.length,c=-1,s=e.length,l=ot(o-u,0),f=Array(l+s),h=!r;++i<l;)f[i]=t[i];for(var p=i;++c<s;)f[p+c]=e[c];for(;++a<u;)(h||i<o)&&(f[p+n[a]]=t[i++]);return f}(_,a,l,x)),w-=k,x&&w<v){var O=o(_,S);return s(t,e,c,g.placeholder,n,_,O,h,d,v-w)}var z=m?n:this,R=b?z[t]:t;return w=_.length,h?_=function(t,e){var n=t.length,r=at(e.length,n),i=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t);for(;r--;){var o=e[r];t[r]=p(o,n)?i[o]:void 0}return t}(_,h):M&&w>1&&_.reverse(),y&&d<w&&(_.length=d),this&&this!==V&&this instanceof g&&(R=A||u(R)),R.apply(z,_)}var y=e&k,m=e&w,b=e&_,x=e&(j|S),M=e&O,A=b?void 0:u(t);return g}function s(t,e,n,r,i,o,a,u,c,s){var l=e&j;e|=l?M:A,(e&=~(l?A:M))&x||(e&=~(w|_));var f=n(t,e,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,u,c,s);return f.placeholder=r,ct(f,t,e)}function l(t,e,r,i,a,l,h,p){var d=e&_;if(!d&&"function"!=typeof t)throw new TypeError(m);var v=i?i.length:0;if(v||(e&=~(M|A),i=a=void 0),h=void 0===h?h:ot(y(h),0),p=void 0===p?p:y(p),v-=a?a.length:0,e&A){var g=i,b=a;i=a=void 0}var x=[t,e,r,i,a,g,b,l,h,p];if(t=x[0],e=x[1],r=x[2],i=x[3],a=x[4],!(p=x[9]=null==x[9]?d?0:t.length:ot(x[9]-v,0))&&e&(j|S)&&(e&=~(j|S)),e&&e!=w)k=e==j||e==S?function(t,e,r){function i(){for(var u=arguments.length,l=Array(u),h=u,p=f(i);h--;)l[h]=arguments[h];var d=u<3&&l[0]!==p&&l[u-1]!==p?[]:o(l,p);return(u-=d.length)<r?s(t,e,c,i.placeholder,void 0,l,d,void 0,void 0,r-u):n(this&&this!==V&&this instanceof i?a:t,this,l)}var a=u(t);return i}(t,e,p):e!=M&&e!=(w|M)||a.length?c.apply(void 0,x):function(t,e,r,i){function o(){for(var e=-1,u=arguments.length,s=-1,l=i.length,f=Array(l+u),h=this&&this!==V&&this instanceof o?c:t;++s<l;)f[s]=i[s];for(;u--;)f[s++]=arguments[++e];return n(h,a?r:this,f)}var a=e&w,c=u(t);return o}(t,e,r,i);else var k=function(t,e,n){function r(){return(this&&this!==V&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&w,o=u(t);return r}(t,e,r);return ct(k,t,e)}function f(t){return t.placeholder}function h(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return a(n)?n:void 0}function p(t,e){return!!(e=null==e?R:e)&&("number"==typeof t||G.test(t))&&t>-1&&t%1==0&&t<e}function d(t,e,n){var r=l(t,j,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=d.placeholder,r}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&nt.call(t)==I}(t))return E;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(F,"");var n=Y.test(t);return n||$.test(t)?L(t.slice(2),n?2:8):q.test(t)?E:+t}(t))===z||t===-z){return(t<0?-1:1)*P}return t==t?t:0}function y(t){var e=g(t),n=e%1;return e==e?n?e-n:e:0}var m="Expected a function",b="__lodash_placeholder__",w=1,_=2,x=4,j=8,S=16,M=32,A=64,k=128,O=512,z=1/0,R=9007199254740991,P=1.7976931348623157e308,E=NaN,C=[["ary",k],["bind",w],["bindKey",_],["curry",j],["curryRight",S],["flip",O],["partial",M],["partialRight",A],["rearg",256]],N="[object Function]",T="[object GeneratorFunction]",I="[object Symbol]",F=/^\s+|\s+$/g,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,B=/\{\n\/\* \[wrapped with (.+)\] \*/,D=/,? & /,q=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,H=/^\[object .+?Constructor\]$/,$=/^0o[0-7]+$/i,G=/^(?:0|[1-9]\d*)$/,L=parseInt,W="object"==typeof t&&t&&t.Object===Object&&t,U="object"==typeof self&&self&&self.Object===Object&&self,V=W||U||Function("return this")(),Q=Function.prototype,K=Object.prototype,J=V["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),tt=Q.toString,et=K.hasOwnProperty,nt=K.toString,rt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=Object.create,ot=Math.max,at=Math.min,ut=function(){var t=h(Object,"defineProperty"),e=h.name;return e&&e.length>2?t:void 0}(),ct=ut?function(t,e,n){var i=e+"";return ut(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(function(t,e){var n=e.length,r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(X,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(C,function(n){var i="_."+n[0];e&n[1]&&!r(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(B);return e?e[1].split(D):[]}(i),n)))})}:function(t){return t};d.placeholder={},e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(t,e,n){function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){var n=S(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&w.call(t,"callee")&&(!x.call(t,"callee")||_.call(t)==v)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!w.call(t,o)||i&&("length"==o||l(o,r))||n.push(o);return n}function o(t,e,n,r){return void 0===t||f(t,b[n])&&!w.call(r,n)?e:t}function a(t,e,n){var r=t[e];w.call(t,e)&&f(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function u(t){if(!p(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||b;return t===n}(t),n=[];for(var r in t)("constructor"!=r||!e&&w.call(t,r))&&n.push(r);return n}function c(t,e){return e=j(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=j(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=a,r(t,this,u)}}function s(t){return c(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(t,e,n){if(!p(n))return!1;var r=typeof e;if("number"==r?h(n)&&l(e,n.length):"string"==r&&e in n)return f(n[e],t);return!1}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}function l(t,e){return!!(e=null==e?d:e)&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<e}function f(t,e){return t===e||t!=t&&e!=e}function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}(t.length)&&!function(t){var e=p(t)?_.call(t):"";return e==g||e==y}(t)}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var d=9007199254740991,v="[object Arguments]",g="[object Function]",y="[object GeneratorFunction]",m=/^(?:0|[1-9]\d*)$/,b=Object.prototype,w=b.hasOwnProperty,_=b.toString,x=b.propertyIsEnumerable,j=Math.max,S=Array.isArray,M=s(function(t,e,n,r){!function(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var u=e[i],c=r?r(n[u],t[u],u,n,t):void 0;a(n,u,void 0===c?t[u]:c)}}(e,function(t){return h(t)?i(t,!0):u(t)}(e),t,r)}),A=c(function(t){return t.push(void 0,o),r(M,void 0,t)});e.exports=A},{}],51:[function(t,e,n){var r=t("lodash._basecallback"),i=t("lodash._baseeach"),o=t("lodash._basefind"),a=t("lodash._basefindindex"),u=t("lodash.isarray"),c=function(t,e){return function(n,i,c){if(i=r(i,c,3),u(n)){var s=a(n,i,e);return s>-1?n[s]:void 0}return o(n,i,t)}}(i);e.exports=c},{"lodash._basecallback":37,"lodash._baseeach":38,"lodash._basefind":39,"lodash._basefindindex":40,"lodash.isarray":55}],52:[function(t,e,n){var r=t("lodash._basematches"),i=t("lodash.find");e.exports=function(t,e){return i(t,r(e))}},{"lodash._basematches":44,"lodash.find":51}],53:[function(t,e,n){(function(t){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function r(t,e,o,a,u){var c=-1,s=t.length;for(o||(o=i),u||(u=[]);++c<s;){var l=t[c];e>0&&o(l)?e>1?r(l,e-1,o,a,u):n(u,l):a||(u[u.length]=l)}return u}function i(t){return m(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?d.call(t):"";return e==u||e==c}(t)}(t)}(t)&&p.call(t,"callee")&&(!g.call(t,"callee")||d.call(t)==a)}(t)||!!(y&&t&&t[y])}var o=9007199254740991,a="[object Arguments]",u="[object Function]",c="[object GeneratorFunction]",s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,f=s||l||Function("return this")(),h=Object.prototype,p=h.hasOwnProperty,d=h.toString,v=f.Symbol,g=h.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,m=Array.isArray;e.exports=function(t){return(t?t.length:0)?r(t,1):[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(t,e,n){function r(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?l.call(t):"";return e==a||e==u}(t)}(t)}(t)&&s.call(t,"callee")&&(!f.call(t,"callee")||l.call(t)==o)}var i=9007199254740991,o="[object Arguments]",a="[object Function]",u="[object GeneratorFunction]",c=Object.prototype,s=c.hasOwnProperty,l=c.toString,f=c.propertyIsEnumerable;e.exports=r},{}],55:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return function(t){if(null==t)return!1;if(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&l.call(t)==o}(t))return f.test(c.call(t));return r(t)&&a.test(t)}(n)?n:void 0}var o="[object Function]",a=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,s=u.hasOwnProperty,l=u.toString,f=RegExp("^"+c.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=9007199254740991,p=i(Array,"isArray")||function(t){return r(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}(t.length)&&"[object Array]"==l.call(t)};e.exports=p},{}],56:[function(t,e,n){(function(t){function r(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function i(t,e){return t.has(e)}function o(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function a(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function l(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new s;++e<n;)this.add(t[e])}function f(t){var e=this.__data__=new c(t);this.size=e.size}function h(t,e){var n=Wt(t),r=!n&&Lt(t),i=!n&&!r&&Ut(t),o=!n&&!r&&!i&&Vt(t),a=n||r||i||o,u=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=u.length;for(var s in t)!e&&!mt.call(t,s)||a&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||function(t,e){return!!(e=null==e?N:e)&&("number"==typeof t||nt.test(t))&&t>-1&&t%1==0&&t<e}(s,c))||u.push(s);return u}function p(t,e){for(var n=t.length;n--;)if(S(t[n][0],e))return n;return-1}function d(t){return null==t?void 0===t?J:G:kt&&kt in Object(t)?function(t){var e=mt.call(t,kt),n=t[kt];try{t[kt]=void 0;var r=!0}catch(t){}var i=wt.call(t);r&&(e?t[kt]=n:delete t[kt]);return i}(t):function(t){return wt.call(t)}(t)}function v(t){return O(t)&&d(t)==T}function g(t,e,n,r,i){return t===e||(null==t||null==e||!O(t)&&!O(e)?t!=t&&e!=e:function(t,e,n,r,i,u){var c=Wt(t),s=Wt(e),l=c?I:Gt(t),h=s?I:Gt(e),p=(l=l==T?L:l)==L,d=(h=h==T?L:h)==L,v=l==h;if(v&&Ut(t)){if(!Ut(e))return!1;c=!0,p=!1}if(v&&!p)return u||(u=new f),c||Vt(t)?b(t,e,n,r,i,u):function(t,e,n,r,i,u,c){switch(n){case tt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z:return!(t.byteLength!=e.byteLength||!u(new St(t),new St(e)));case X:case B:case $:return S(+t,+e);case D:return t.name==e.name&&t.message==e.message;case U:case Q:return t==e+"";case H:var s=o;case V:var l=r&E;if(s||(s=a),t.size!=e.size&&!l)return!1;var f=c.get(t);if(f)return f==e;r|=C,c.set(t,e);var h=b(s(t),s(e),r,i,u,c);return c.delete(t),h;case K:if(Ht)return Ht.call(t)==Ht.call(e)}return!1}(t,e,l,n,r,i,u);if(!(n&E)){var g=p&&mt.call(t,"__wrapped__"),y=d&&mt.call(e,"__wrapped__");if(g||y){var m=g?t.value():t,_=y?e.value():e;return u||(u=new f),i(m,_,n,r,u)}}if(!v)return!1;return u||(u=new f),function(t,e,n,r,i,o){var a=n&E,u=w(t),c=u.length,s=w(e).length;if(c!=s&&!a)return!1;for(var l=c;l--;){var f=u[l];if(!(a?f in e:mt.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<c;){f=u[l];var v=t[f],g=e[f];if(r)var y=a?r(g,v,f,e,t,o):r(v,g,f,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,u)}(t,e,n,r,g,i))}function y(t){if(!k(t)||function(t){return!!bt&&bt in t}(t))return!1;return(M(t)?_t:et).test(j(t))}function m(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vt;return t===n}(t))return Rt(t);var e=[];for(var n in Object(t))mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function b(t,e,n,o,a,u){var c=n&E,s=t.length,f=e.length;if(s!=f&&!(c&&f>s))return!1;var h=u.get(t);if(h&&u.get(e))return h==e;var p=-1,d=!0,v=n&C?new l:void 0;for(u.set(t,e),u.set(e,t);++p<s;){var g=t[p],y=e[p];if(o)var m=c?o(y,g,p,e,t,u):o(g,y,p,t,e,u);if(void 0!==m){if(m)continue;d=!1;break}if(v){if(!r(e,function(t,e){if(!i(v,e)&&(g===t||a(g,t,n,o,u)))return v.push(e)})){d=!1;break}}else if(g!==y&&!a(g,y,n,o,u)){d=!1;break}}return u.delete(t),u.delete(e),d}function w(t){return function(t,e,n){var r=e(t);return Wt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,z,$t)}function _(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function x(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return y(n)?n:void 0}function j(t){if(null!=t){try{return yt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function S(t,e){return t===e||t!=t&&e!=e}function M(t){if(!k(t))return!1;var e=d(t);return e==q||e==Y||e==F||e==W}function A(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function k(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function O(t){return null!=t&&"object"==typeof t}function z(t){return function(t){return null!=t&&A(t.length)&&!M(t)}(t)?h(t):m(t)}var R=200,P="__lodash_hash_undefined__",E=1,C=2,N=9007199254740991,T="[object Arguments]",I="[object Array]",F="[object AsyncFunction]",X="[object Boolean]",B="[object Date]",D="[object Error]",q="[object Function]",Y="[object GeneratorFunction]",H="[object Map]",$="[object Number]",G="[object Null]",L="[object Object]",W="[object Proxy]",U="[object RegExp]",V="[object Set]",Q="[object String]",K="[object Symbol]",J="[object Undefined]",Z="[object ArrayBuffer]",tt="[object DataView]",et=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,rt={};rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt[T]=rt[I]=rt[Z]=rt[X]=rt[tt]=rt[B]=rt[D]=rt[q]=rt[H]=rt[$]=rt[L]=rt[U]=rt[V]=rt[Q]=rt["[object WeakMap]"]=!1;var it="object"==typeof t&&t&&t.Object===Object&&t,ot="object"==typeof self&&self&&self.Object===Object&&self,at=it||ot||Function("return this")(),ut="object"==typeof n&&n&&!n.nodeType&&n,ct=ut&&"object"==typeof e&&e&&!e.nodeType&&e,st=ct&&ct.exports===ut,lt=st&&it.process,ft=function(){try{return lt&&lt.binding&&lt.binding("util")}catch(t){}}(),ht=ft&&ft.isTypedArray,pt=Array.prototype,dt=Function.prototype,vt=Object.prototype,gt=at["__core-js_shared__"],yt=dt.toString,mt=vt.hasOwnProperty,bt=function(){var t=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),wt=vt.toString,_t=RegExp("^"+yt.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=st?at.Buffer:void 0,jt=at.Symbol,St=at.Uint8Array,Mt=vt.propertyIsEnumerable,At=pt.splice,kt=jt?jt.toStringTag:void 0,Ot=Object.getOwnPropertySymbols,zt=xt?xt.isBuffer:void 0,Rt=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Pt=x(at,"DataView"),Et=x(at,"Map"),Ct=x(at,"Promise"),Nt=x(at,"Set"),Tt=x(at,"WeakMap"),It=x(Object,"create"),Ft=j(Pt),Xt=j(Et),Bt=j(Ct),Dt=j(Nt),qt=j(Tt),Yt=jt?jt.prototype:void 0,Ht=Yt?Yt.valueOf:void 0;u.prototype.clear=function(){this.__data__=It?It(null):{},this.size=0},u.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},u.prototype.get=function(t){var e=this.__data__;if(It){var n=e[t];return n===P?void 0:n}return mt.call(e,t)?e[t]:void 0},u.prototype.has=function(t){var e=this.__data__;return It?void 0!==e[t]:mt.call(e,t)},u.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=It&&void 0===e?P:e,this},c.prototype.clear=function(){this.__data__=[],this.size=0},c.prototype.delete=function(t){var e=this.__data__,n=p(e,t);return!(n<0||(n==e.length-1?e.pop():At.call(e,n,1),--this.size,0))},c.prototype.get=function(t){var e=this.__data__,n=p(e,t);return n<0?void 0:e[n][1]},c.prototype.has=function(t){return p(this.__data__,t)>-1},c.prototype.set=function(t,e){var n=this.__data__,r=p(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},s.prototype.clear=function(){this.size=0,this.__data__={hash:new u,map:new(Et||c),string:new u}},s.prototype.delete=function(t){var e=_(this,t).delete(t);return this.size-=e?1:0,e},s.prototype.get=function(t){return _(this,t).get(t)},s.prototype.has=function(t){return _(this,t).has(t)},s.prototype.set=function(t,e){var n=_(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},l.prototype.add=l.prototype.push=function(t){return this.__data__.set(t,P),this},l.prototype.has=function(t){return this.__data__.has(t)},f.prototype.clear=function(){this.__data__=new c,this.size=0},f.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},f.prototype.get=function(t){return this.__data__.get(t)},f.prototype.has=function(t){return this.__data__.has(t)},f.prototype.set=function(t,e){var n=this.__data__;if(n instanceof c){var r=n.__data__;if(!Et||r.length<R-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this};var $t=Ot?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(Ot(t),function(e){return Mt.call(t,e)}))}:function(){return[]},Gt=d;(Pt&&Gt(new Pt(new ArrayBuffer(1)))!=tt||Et&&Gt(new Et)!=H||Ct&&"[object Promise]"!=Gt(Ct.resolve())||Nt&&Gt(new Nt)!=V||Tt&&"[object WeakMap]"!=Gt(new Tt))&&(Gt=function(t){var e=d(t),n=e==L?t.constructor:void 0,r=n?j(n):"";if(r)switch(r){case Ft:return tt;case Xt:return H;case Bt:return"[object Promise]";case Dt:return V;case qt:return"[object WeakMap]"}return e});var Lt=v(function(){return arguments}())?v:function(t){return O(t)&&mt.call(t,"callee")&&!Mt.call(t,"callee")},Wt=Array.isArray,Ut=zt||function(){return!1},Vt=ht?function(t){return function(e){return t(e)}}(ht):function(t){return O(t)&&A(t.length)&&!!rt[d(t)]};e.exports=function(t,e){return g(t,e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(t,e,n){e.exports=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}},{}],58:[function(t,e,n){function r(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!!o[a.call(t)]}var i=9007199254740991,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a=Object.prototype.toString;e.exports=r},{}],59:[function(t,e,n){function r(t,e){return t="number"==typeof t||l.test(t)?+t:-1,e=null==e?p:e,t>-1&&t%1==0&&t<e}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function o(t){for(var e=function(t){if(null==t)return[];a(t)||(t=Object(t));var e=t.length;e=e&&i(e)&&(s(t)||c(t))&&e||0;var n=t.constructor,o=-1,u="function"==typeof n&&n.prototype===t,l=Array(e),h=e>0;for(;++o<e;)l[o]=o+"";for(var p in t)h&&r(p,e)||"constructor"==p&&(u||!f.call(t,p))||l.push(p);return l}(t),n=e.length,o=n&&t.length,u=!!o&&i(o)&&(s(t)||c(t)),l=-1,h=[];++l<n;){var p=e[l];(u&&r(p,o)||f.call(t,p))&&h.push(p)}return h}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=t("lodash._getnative"),c=t("lodash.isarguments"),s=t("lodash.isarray"),l=/^\d+$/,f=Object.prototype.hasOwnProperty,h=u(Object,"keys"),p=9007199254740991,d=function(t){return function(e){return null==e?void 0:e[t]}}("length"),v=h?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&function(t){return null!=t&&i(d(t))}(t)?o(t):a(t)?h(t):[]}:o;e.exports=v},{"lodash._getnative":46,"lodash.isarguments":54,"lodash.isarray":55}],60:[function(t,e,n){function r(t,e){var n=-1,r=function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}(s(t))}(t)?Array(t.length):[];return a(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=t("lodash._arraymap"),o=t("lodash._basecallback"),a=t("lodash._baseeach"),u=t("lodash.isarray"),c=9007199254740991,s=function(t){return function(e){return null==e?void 0:e[t]}}("length");e.exports=function(t,e,n){var a=u(t)?i:r;return e=o(e,n,3),a(t,e)}},{"lodash._arraymap":36,"lodash._basecallback":37,"lodash._baseeach":38,"lodash.isarray":55}],61:[function(t,e,n){function r(t){t=function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}(t);for(var e=-1,n=i(t),r=n.length,o=Array(r);++e<r;){var a=n[e];o[e]=[a,t[a]]}return o}var i=t("lodash.keys");e.exports=r},{"lodash.keys":59}],62:[function(t,e,n){function r(t,e){var n=typeof t;if("string"==n&&l.test(t)||"number"==n)return!0;if(u(t))return!1;return!s.test(t)||null!=e&&t in function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?t:Object(t)}(e)}function i(t,e){return c(t,function(t){return r(t)?function(t){return function(e){return null==e?void 0:e[t]}}(t):function(t){var e=t+"";return t=a(t),function(n){return o(n,t,e)}}(t)}(e))}var o=t("lodash._baseget"),a=t("lodash._topath"),u=t("lodash.isarray"),c=t("lodash.map"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,l=/^\w*$/;e.exports=i},{"lodash._baseget":41,"lodash._topath":47,"lodash.isarray":55,"lodash.map":60}],63:[function(t,e,n){(function(t){function n(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n,r){var i=t.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,i,n);var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function r(t,e,n){for(var r=-1,i=t?t.length:0;++r<i;)if(n(e,t[r]))return!0;return!1}function i(t){return t!=t}function o(t,e){return t.has(e)}function a(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function u(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function s(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function l(t){var e=-1,n=t?t.length:0;for(this.__data__=new s;++e<n;)this.add(t[e])}function f(t,e){for(var n=t.length;n--;)if(function(t,e){return t===e||t!=t&&e!=e}(t[n][0],e))return n;return-1}function h(t){if(!g(t)||function(t){return!!z&&z in t}(t))return!1;return(function(t){var e=g(t)?E.call(t):"";return e==b||e==w}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?C:_).test(function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function p(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function d(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return h(n)?n:void 0}function v(t){return t&&t.length?function(t,e,i){var u=-1,c=n,s=t.length,f=!0,h=[],p=h;if(i)f=!1,c=r;else if(s>=y){var d=e?null:X(t);if(d)return a(d);f=!1,c=o,p=new l}else p=e?[]:h;t:for(;++u<s;){var v=t[u],g=e?e(v):v;if(v=i||0!==v?v:0,f&&g==g){for(var m=p.length;m--;)if(p[m]===g)continue t;e&&p.push(g),h.push(v)}else c(p,g,i)||(p!==h&&p.push(g),h.push(v))}return h}(t):[]}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var y=200,m="__lodash_hash_undefined__",b="[object Function]",w="[object GeneratorFunction]",_=/^\[object .+?Constructor\]$/,x="object"==typeof t&&t&&t.Object===Object&&t,j="object"==typeof self&&self&&self.Object===Object&&self,S=x||j||Function("return this")(),M=Array.prototype,A=Function.prototype,k=Object.prototype,O=S["__core-js_shared__"],z=function(){var t=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),R=A.toString,P=k.hasOwnProperty,E=k.toString,C=RegExp("^"+R.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=M.splice,T=d(S,"Map"),I=d(S,"Set"),F=d(Object,"create");u.prototype.clear=function(){this.__data__=F?F(null):{}},u.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},u.prototype.get=function(t){var e=this.__data__;if(F){var n=e[t];return n===m?void 0:n}return P.call(e,t)?e[t]:void 0},u.prototype.has=function(t){var e=this.__data__;return F?void 0!==e[t]:P.call(e,t)},u.prototype.set=function(t,e){return this.__data__[t]=F&&void 0===e?m:e,this},c.prototype.clear=function(){this.__data__=[]},c.prototype.delete=function(t){var e=this.__data__,n=f(e,t);return!(n<0||(n==e.length-1?e.pop():N.call(e,n,1),0))},c.prototype.get=function(t){var e=this.__data__,n=f(e,t);return n<0?void 0:e[n][1]},c.prototype.has=function(t){return f(this.__data__,t)>-1},c.prototype.set=function(t,e){var n=this.__data__,r=f(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},s.prototype.clear=function(){this.__data__={hash:new u,map:new(T||c),string:new u}},s.prototype.delete=function(t){return p(this,t).delete(t)},s.prototype.get=function(t){return p(this,t).get(t)},s.prototype.has=function(t){return p(this,t).has(t)},s.prototype.set=function(t,e){return p(this,t).set(t,e),this},l.prototype.add=l.prototype.push=function(t){return this.__data__.set(t,m),this},l.prototype.has=function(t){return this.__data__.has(t)};var X=I&&1/a(new I([,-0]))[1]==1/0?function(t){return new I(t)}:function(){};e.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(t,e,n){e.exports=function({ok:t,nok:e,log:n=console.log}){return function(r){if(r)n&&(r.stack?n(r,r.stack):n(r)),e&&e(r);else if(t){var i=Array.prototype.slice.call(arguments,1);e&&i.push(e),t.apply(t,i)}}}},{}],65:[function(t,e,n){function r(t){function e(t){return Math.floor(h()*t)}function n(t){function n(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],i=r[0];if(e>=i[0]&&e<=i[1])return r[1]}}(r,t)}var r=t,i=r[r.length-1][0][1]-r[0][0][0]+1;return{outcomeAtIndex:n,roll:function(){var t=n(e(i));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:i,getRangesAndOutcomesArray:function(){return r}}}function r(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(i)).forEach(function(t){var r=t[0],i=t[1],o=n+1,a=o+r-1;e.push([[o,a],i]),n=a}),e}function i(t,e){return t[0]>e[0]?-1:1}function o(t){return n(function(t){var e=[];for(var n in t){var r=function(t){var e=t.split("-");if(e.length>2)return;return 1===e.length?[+t,+t]:[+e[0],+e[1]]}(n),i=t[n];if("object"==typeof i)if(Array.isArray(i))i=s(i);else{var u=o(i);"function"==typeof u.roll&&(i=u.roll)}e.push([r,i])}return e.sort(a)}(t))}function a(t,e){return t[0][0]<e[0][0]?-1:1}function u(t){return n(function(t){function e(t){var e=t[0],r=t[1],i=n+e-1,o=[n,i];if(n=i+1,Array.isArray(r))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(r)){var a=u(r);"function"==typeof a.roll&&(r=a.roll)}else r=s(r);return[o,r]}var n=0;return t.map(e)}(t))}function c(t,n){return!t||"number"!=typeof t.length||t.length<1?n:t[e(t.length)]}function s(t,e){return function(){return c(t,e)}}function l(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function f(t){for(var n,r=t.length,i=Array(r),o=0;o<r;o++)(n=e(o+1))!==o&&(i[o]=i[n]),i[n]=t[o];return i}var h=Math.random;return t&&t.random&&(h=t.random),{roll:e,rollDie:function(t){return 0===t?0:e(t)+1},createRangeTable:n,createRangeTableFromDict:function(t){return n(r(t))},createTableFromDef:o,createTableFromSizes:u,convertDictToRangesAndOutcomePairs:r,pickFromArray:c,crossArrays:l,getCartesianProduct:function(t){return t.slice(1).reduce(l,t[0])},shuffle:f,sample:function(t,e){return f(t).slice(0,e)},randomFn:h}}var i=r();"object"==typeof e&&(e.exports=i,e.exports.createProbable=r)},{}],66:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):g=-1,d.length&&u())}function u(){if(!v){var t=o(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,v=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(t)}}function c(t,e){this.fun=t,this.array=e}function s(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,d=[],v=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||v||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.prependListener=s,h.prependOnceListener=s,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],67:[function(t,e,n){"use strict";function r(t,e,n,r,o){i(t,e,n||0,r||t.length-1,o||function(t,e){return t<e?-1:t>e?1:0})}function i(t,e,n,r,a){for(;r>n;){if(r-n>600){var u=r-n+1,c=e-n+1,s=Math.log(u),l=.5*Math.exp(2*s/3),f=.5*Math.sqrt(s*l*(u-l)/u)*(c-u/2<0?-1:1);i(t,e,Math.max(n,Math.floor(e-c*l/u+f)),Math.min(r,Math.floor(e+(u-c)*l/u+f)),a)}var h=t[e],p=n,d=r;for(o(t,n,e),a(t[r],h)>0&&o(t,n,r);p<d;){for(o(t,p,d),p++,d--;a(t[p],h)<0;)p++;for(;a(t[d],h)>0;)d--}0===a(t[n],h)?o(t,n,d):o(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function o(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r,e.exports.default=r},{}],68:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,r,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,u=e;u<n;u++)o=t.children[u],a(i,t.leaf?r(o):o);return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function h(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,v(t,o,e,n,i),a.push(e,o,o,n))}e.exports=r,e.exports.default=r;var v=t("quickselect");r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!h(t,e))return n;for(var i,o,a,u,c=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],h(t,u=e.leaf?r(a):a)&&(e.leaf?n.push(a):f(t,u)?this._all(a,n):c.push(a));e=c.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!h(t,e))return!1;for(var r,i,o,a,u=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,h(t,a)){if(e.leaf||f(t,a))return!0;u.push(o)}e=u.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,u=this.toBBox(t),c=[],s=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=s.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),c.push(a),this._condense(c),this;o||a.leaf||!f(a,u)?r?(n++,a=r.children[n],o=!1):a=null:(c.push(a),s.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var o,a=n-e+1,u=this._maxEntries;if(a<=u)return o=p(t.slice(e,n+1)),i(o,this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(u)),u=Math.ceil(a/Math.pow(u,r-1))),(o=p([])).leaf=!1,o.height=r;var c,s,l,f,h=Math.ceil(a/u),v=h*Math.ceil(Math.sqrt(u));for(d(t,e,n,v,this.compareMinX),c=e;c<=n;c+=v)for(d(t,c,l=Math.min(c+v-1,n),h,this.compareMinY),s=c;s<=l;s+=h)f=Math.min(s+h-1,l),o.children.push(this._build(t,s,f,r-1));return i(o,this.toBBox),o},_chooseSubtree:function(t,e,n,r){for(var i,o,a,u,c,l,f,h;;){if(r.push(e),e.leaf||r.length-1===n)break;for(f=h=1/0,i=0,o=e.children.length;i<o;i++)c=s(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-c)<h?(h=l,f=c<f?c:f,u=a):l===h&&c<f&&(f=c,u=a);e=u||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],u=this._chooseSubtree(i,this.data,e,o);for(u.children.push(t),a(u,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),u=p(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,i(n,this.toBBox),i(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(n,u)},_splitRoot:function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,a,u,c,l,f,h;for(l=f=1/0,r=e;r<=n-e;r++)u=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=o(t,0,r,this.toBBox),a=o(t,r,n,this.toBBox)),c=s(i)+s(a),u<l?(l=u,h=r,f=c<f?c:f):u===l&&c<f&&(f=c,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,u,c=this.toBBox,s=o(t,0,e,c),f=o(t,n-e,n,c),h=l(s)+l(f);for(i=e;i<n-e;i++)u=t.children[i],a(s,t.leaf?c(u):u),h+=l(s);for(i=n-e-1;i>=e;i--)u=t.children[i],a(f,t.leaf?c(u):u),h+=l(f);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():i(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:67}],69:[function(t,e,n){var r=t("qs"),i=t("lodash.clonedeep"),o=t("lodash.defaults");e.exports=function(t){function e(){u(n())}function n(){return r.parse(c.location.hash.slice(1))}function a(t){var e=c.location.protocol+"//"+c.location.host+c.location.pathname+"#"+r.stringify(t);c.history.pushState(null,null,e)}var u,c;return t&&(u=t.followRoute,c=t.windowObject),c.onhashchange=e,{addToRoute:function(t){var e=o(i(t),n());a(e),u(e)},overwriteRouteEntirely:function(t){a(t),u(t)},routeFromHash:e,unpackEncodedRoute:function(t){var e=r.parse(decodeURIComponent(t));a(e),u(e)}}}},{"lodash.clonedeep":48,"lodash.defaults":50,qs:71}],70:[function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],71:[function(t,e,n){"use strict";var r=t("./stringify"),i=t("./parse"),o=t("./formats");e.exports={formats:o,parse:i,stringify:r}},{"./formats":70,"./parse":72,"./stringify":73}],72:[function(t,e,n){"use strict";var r=t("./utils"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),u=a?r.slice(0,a.index):r,c=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var s=0;null!==(a=o.exec(r))&&s<n.depth;){if(s+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=r:o[u]=r}r=o}return r}(c,e,n)}};e.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,u=r.split(e.delimiter,a),c=0;c<u.length;++c){var s,l,f=u[c],h=f.indexOf("]="),p=-1===h?f.indexOf("="):h+1;-1===p?(s=e.decoder(f,o.decoder),l=e.strictNullHandling?null:""):(s=e.decoder(f.slice(0,p),o.decoder),l=e.decoder(f.slice(p+1),o.decoder)),i.call(n,s)?n[s]=[].concat(n[s]).concat(l):n[s]=l}return n}(t,n):t,c=n.plainObjects?Object.create(null):{},s=Object.keys(u),l=0;l<s.length;++l){var f=s[l],h=a(f,u[f],n);c=r.merge(c,h,n)}return r.compact(c)}},{"./utils":74}],73:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./formats"),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,n,i,o,a,c,s,l,f,h,p,d){var v=e;if("function"==typeof s)v=s(n,v);else if(v instanceof Date)v=h(v);else if(null===v){if(o)return c&&!d?c(n,u.encoder):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||r.isBuffer(v)){if(c){return[p(d?n:c(n,u.encoder))+"="+p(c(v,u.encoder))]}return[p(n)+"="+p(String(v))]}var g=[];if(void 0===v)return g;var y;if(Array.isArray(s))y=s;else{var m=Object.keys(v);y=l?m.sort(l):m}for(var b=0;b<y.length;++b){var w=y[b];a&&null===v[w]||(g=Array.isArray(v)?g.concat(t(v[w],i(n,w),i,o,a,c,s,l,f,h,p,d)):g.concat(t(v[w],n+(f?"."+w:"["+w+"]"),i,o,a,c,s,l,f,h,p,d)))}return g};e.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var s=void 0===a.delimiter?u.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:u.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:u.skipNulls,h="boolean"==typeof a.encode?a.encode:u.encode,p="function"==typeof a.encoder?a.encoder:u.encoder,d="function"==typeof a.sort?a.sort:null,v=void 0!==a.allowDots&&a.allowDots,g="function"==typeof a.serializeDate?a.serializeDate:u.serializeDate,y="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:u.encodeValuesOnly;if(void 0===a.format)a.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var m,b,w=i.formatters[a.format];"function"==typeof a.filter?n=(b=a.filter)("",n):Array.isArray(a.filter)&&(m=b=a.filter);var _=[];if("object"!=typeof n||null===n)return"";var x;x=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var j=o[x];m||(m=Object.keys(n)),d&&m.sort(d);for(var S=0;S<m.length;++S){var M=m[S];f&&null===n[M]||(_=_.concat(c(n[M],M,j,l,f,h?p:null,b,d,v,g,w,y)))}var A=_.join(s),k=!0===a.addQueryPrefix?"?":"";return A.length>0?k+A:""}},{"./formats":70,"./utils":74}],74:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();n.arrayToObject=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},n.merge=function(t,e,i){if(!e)return t;if("object"!=typeof e){if(Array.isArray(t))t.push(e);else{if("object"!=typeof t)return[t,e];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,e))&&(t[e]=!0)}return t}if("object"!=typeof t)return[t].concat(e);var o=t;return Array.isArray(t)&&!Array.isArray(e)&&(o=n.arrayToObject(t,i)),Array.isArray(t)&&Array.isArray(e)?(e.forEach(function(e,o){r.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=n.merge(t[o],e,i):t.push(e):t[o]=e}),t):Object.keys(e).reduce(function(t,o){var a=e[o];return r.call(t,o)?t[o]=n.merge(t[o],a,i):t[o]=a,t},o)},n.assign=function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},n.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],s=o[c];"object"==typeof s&&null!==s&&-1===n.indexOf(s)&&(e.push({obj:o,prop:c}),n.push(s))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],i=0;i<e.length;++i)void 0!==e[i]&&r.push(e[i]);n.obj[n.prop]=r}}return e}(e)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],75:[function(t,e,n){var r=t("./lib/alea"),i=t("./lib/xor128"),o=t("./lib/xorwow"),a=t("./lib/xorshift7"),u=t("./lib/xor4096"),c=t("./lib/tychei"),s=t("./seedrandom");s.alea=r,s.xor128=i,s.xorwow=o,s.xorshift7=a,s.xor4096=u,s.tychei=c,e.exports=s},{"./lib/alea":76,"./lib/tychei":77,"./lib/xor128":78,"./lib/xor4096":79,"./lib/xorshift7":80,"./lib/xorwow":81,"./seedrandom":82}],76:[function(t,e,n){!function(t,e,n){function r(t){var e=this,n=function(){var t=4022871197;return function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new r(t),o=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.alea=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],77:[function(t,e,n){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],78:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function i(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],79:[function(t,e,n){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,u=[],c=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,c=Math.max(c,e.length)),i=0,o=-32;o<c;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=u[127&o]^=r+a)?i+1:0);for(i>=128&&(u[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;t.w=a,t.X=u,t.i=i}(e,t)}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&(i.X&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],80:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],t^=t>>>7,n=t^t<<24,t=r[i+1&7],n^=t^t>>>10,t=r[i+3&7],n^=t^t>>>3,t=r[i+4&7],n^=t^t<<7,t=r[i+7&7],t^=t<<13,n^=t^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&(i.x&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],81:[function(t,e,n){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],82:[function(t,e,n){!function(n,r,i){function o(t,e,o){var m=[],b=c(u((e=1==e?{entropy:!0}:e||{}).entropy?[t,s(r)]:null==t?function(){try{var t;return l&&(t=l.randomBytes)?t=t(f):(t=new Uint8Array(f),(n.crypto||n.msCrypto).getRandomValues(t)),s(t)}catch(t){var e=n.navigator,i=e&&e.plugins;return[+new Date,n,i,n.screen,s(r)]}}():t,3),m),w=new function(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];n||(t=[n++]);for(;i<f;)a[i]=i++;for(i=0;i<f;i++)a[i]=a[o=y&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=y&i+1],n=n*f+a[y&(a[i]=a[o=y&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(f)}(m),_=function(){for(var t=w.g(h),e=d,n=0;t<v;)t=(t+n)*f,e*=f,n=w.g(1);for(;t>=g;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|w.g(4)},_.quick=function(){return w.g(4)/4294967296},_.double=_,c(s(w.S),r),(e.pass||o||function(t,e,n,r){return r&&(r.S&&a(r,w),t.state=function(){return a(w,{})}),n?(i[p]=t,e):t})(_,b,"global"in e?e.global:this==i,e.state)}function a(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function u(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(u(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function c(t,e){for(var n,r=t+"",i=0;i<r.length;)e[y&i]=y&(n^=19*e[y&i])+r.charCodeAt(i++);return s(e)}function s(t){return String.fromCharCode.apply(0,t)}var l,f=256,h=6,p="random",d=i.pow(f,h),v=i.pow(2,52),g=2*v,y=f-1;if(c(i.random(),r),"object"==typeof e&&e.exports){e.exports=o;try{l=t("crypto")}catch(t){}}else"function"==typeof define&&define.amd?define(function(){return o}):i["seed"+p]=o}("undefined"!=typeof self?self:this,[],Math)},{crypto:18}],83:[function(t,e,n){function r(t,e){return t.dist<e.dist?-1:1}var i=t("lodash.pluck");e.exports=function(t,e,n="col",o="row"){var a=e.map(function(e,r){var i=e[n]-t[n],a=e[o]-t[o];return{index:r,dist:Math.sqrt(i*i+a*a)}}).sort(r);return i(a,"index")}},{"lodash.pluck":62}],84:[function(t,e,n){function r(t){function e(t,n,r,i,u,s){if(!t[d]){if(t[v]&&s.push({fn:t.fn,parent:n,key:o(r)}),t[g]){if(!u)throw new Error("Missing readFromFirstPassQueue!");u.push({keyPathOnSource:r,thing:{[d]:!0,target:t.target}})}else if(t[y]){if(!u)throw new Error("Missing readFromFirstPassQueue!");u.push({keyPathOnSource:t.target.split("/"),targetParent:n,targetKey:o(r),thing:{[d]:!0,target:t.target,map:t.map}})}else t[m]?t=t.target:t[b]&&(t=function(t){return t.reduce(c,0)}(_.roll(t.target)));return{expatiated:t,isResolved:!0}}{let o=typeof t.target;if("string"===o)return function(t,n,r,i,o,u){var c=function(t){var e,n=[];for(;null!==(e=p.exec(t));)n.push(e[1]);return n}(t);if(c.length<1)return e(i(a(r,t)),n,r,i,o,u);for(var s=t,l=0;l<c.length;++l){let{expatiated:t,isResolved:e}=function(t,e,n){var r=function(t){var e=t.split("/");if(e.length>0)return e.length>1?e:[t];return[]}(t),i=n.slice(),o=e(r),a=!function(t){return t[d]||t[v]||t[g]||t[y]||t[m]||t[b]}(o);a&&(i=i.replace(`{${t}}`,o));return{expatiated:i,isResolved:a}}(c[l],i,s);if(!e)return{isResolved:e};s=t}return e(s,n,r,i,o,u)}(t.target,n,r,i,u,s);if("object"===o)return function(t,n,r,i,o){var u={};for(var c in t){let{isResolved:s,expatiated:l}=e(t[c],u,a(n,c),r,i,o);if(!s)return{isResolved:s};u[c]=l}return{expatiated:u,isResolved:!0}}(t.target,r,i,u,s)}}function n(t,e){return t[o(e)].roll()}function r(t,n,r,{thing:i,keyPathOnSource:a,targetParent:c,targetKey:s}){var h,p=t;a.slice(0,-1).forEach(function(t){p&&(p=p[t])}),h=i.map?e(i,p,a,l(u)(i.map,t),null,r):e(i,p,a,l(f)(t),null,r);var{isResolved:d,expatiated:v}=h;d?c&&s?c[s]=v:p[o(a)]=v:n.push({keyPathOnSource:a,thing:i})}function i(t,{fn:e,parent:n,key:r}){n[r]=e(t,w)}var w;w=t?s({random:t.random,recurse:!1}):s();var _=h({probable:w});return function(t){var o={};for(var a in t){let e=t[a];(!Array.isArray(e)||e.length<1||!Array.isArray(e[0]))&&(e=[[1,e]]),o[a]=w.createTableFromSizes(e)}return function(){for(var t=[],a=[],{expatiated:u}=e(o.root.roll(),null,[],l(n)(o),a,t),c=0;c<10;++c){let e=[];if(a.forEach(l(r)(u,e,t)),t.forEach(l(i)(u)),e.length<1)break;a=e.slice()}return u}}}function i(t){return"raw"in t?t[0]:t}function o(t){if(t.length>0)return t[t.length-1]}function a(t,e){return t.concat([e])}function u(t,e,n){return t[f(e,n)]}function c(t,e){return t+isNaN(e.total)?0:e.total}var s=t("probable").createProbable,l=t("lodash.curry"),f=t("get-at-path"),h=t("dicecup"),p=/{([\S/]+?)}/g;const d=Symbol("resolveTarget"),v=Symbol("resolveFnLaterTarget"),g=Symbol("readFromFirstPass"),y=Symbol("lookUpInMap"),m=Symbol("literal"),b=Symbol("dieRoll");e.exports={Tablenest:r,r:function(t){return{[d]:!0,target:i(t)}},f:function(t){return{[v]:!0,fn:t}},s:function(t){return{[g]:!0,target:i(t)}},m:function({target:t,map:e}){return{[y]:!0,target:t,map:e}},l:function(t){return{[m]:!0,target:t}},d:function(t){return{[b]:!0,target:i(t)}}}},{dicecup:31,"get-at-path":33,"lodash.curry":49,probable:85}],85:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],86:[function(t,e,n){e.exports={name:"crabbington",version:"1.0.2",description:"This is my 2020 7DRL attempt!",main:"index.js",private:!0,scripts:{test:"make test"},repository:{type:"git",url:"git@github.com:jimkang/crabbington.git"},keywords:[],author:"Jim Kang",license:"MIT",bugs:{url:"https://github.com/jimkang/crabbington/issues"},homepage:"https://github.com/jimkang/crabbington",devDependencies:{"@types/node":"^13.7.7","@typescript-eslint/eslint-plugin":"^2.22.0","@typescript-eslint/parser":"^2.22.0",browserify:"^16.5.0",eslint:"^6.8.0",tsify:"^4.0.1",typescript:"^3.8.3","uglify-es":"^3.1.9"},dependencies:{"@jimkang/randomid":"^1.0.2",accessor:"^3.0.0","basic-2d-math":"^1.0.1","basic-browser-request":"^8.0.0","call-next-tick":"^2.0.1","d3-array":"^1.2.1","d3-queue":"^3.0.7","d3-selection":"^1.3.0","d3-timer":"^1.0.7","d3-zoom":"^1.7.1","handle-error-web":"^1.0.1",idmaker:"^0.1.1","lodash.clonedeep":"^4.5.0","lodash.curry":"^4.1.1","lodash.findwhere":"^3.1.0","lodash.flatten":"^4.4.0","lodash.isequal":"^4.5.0","lodash.pluck":"^3.1.2","lodash.uniq":"^4.5.0",oknok:"^3.0.0",probable:"^2.1.1",rbush:"^2.0.2","route-state":"^1.1.2",seedrandom:"^3.0.5","sort-cells-by-dist":"^1.0.3","standard-bail":"^2.0.1",tablenest:"^4.0.0"}}},{}],87:[function(t,e,n){var r=t("d3-queue").queue,i=t("d3-timer").timer,o=t("idmaker").randomId,a=t("call-next-tick"),u={blast:function(t,e,n,r){var a={id:o(4),cx:t.cx,cy:t.cy,r:1,color:"yellow"};e.ephemerals.blasts.push(a);var u=i(function(i){console.log("elapsed",i),i>t.duration?(u.stop(),function(t,e){for(var n=t.length-1;n>=0;--n)if(t[n].id===e){t.splice(n,1);break}}(e.ephemerals.blasts,a.id),r()):(a.r=i/(.8*t.duration)*t.r,a.r>t.r&&(a.r=t.r),n())})}};e.exports=function({gameState:t,onAdvance:e,draw:n}){function i(e,r){function i(){e.postAnimationGameStateUpdater&&e.postAnimationGameStateUpdater(r)}var o=u[e.type];o?o(e,t,n,i):a(r)}t.allowAdvance=!1;var o=r(1);t.animations.forEach(function(t){o.defer(i,t)}),o.awaitAll(function(n){n&&console.error(n),t.allowAdvance=!0,t.animations.length=0,e({gameState:t})})}},{"call-next-tick":19,"d3-queue":26,"d3-timer":28,idmaker:35}],88:[function(t,e,n){e.exports=function({imageContext:t,transform:e},n){t.strokeStyle=n.color,t.lineWidth=4,t.moveTo(e.applyX(n.cx),e.applyY(n.cy)),t.beginPath(),t.arc(e.applyX(n.cx),e.applyY(n.cy),e.k*n.r,0,2*Math.PI),t.stroke()}},{}],89:[function(t,e,n){"use strict";function r({imageContext:t,transform:e,playerGridId:n},r){!function({grid:t,imageContext:e,transform:n,playerGridId:r}){function a(t){e.moveTo.apply(e,t.start),t.curves.forEach(f)}var c=function(t){for(var e=[],n=0;n<t[0].length;++n){let r=[];for(let e=0;e<t.length;++e)r.push(t[e][n]);e.push(r)}return e}(t.rows),s=t.rows.map(u(o)(!1,n)),l=c.map(u(o)(!0,n)),f=u(i)(e);e.strokeStyle=t.color,e.lineWidth=r===t.id?2:1,e.beginPath(),s.forEach(a),l.forEach(a),e.stroke()}({grid:r,imageContext:t,transform:e,playerGridId:n}),function({grid:t,imageContext:e,transform:n,playerGridId:r}){var i=r===t.id?8:4;e.fillStyle=t.color,e.beginPath(),c(t.rows,u(a)(e,n,i)),e.fill()}({grid:r,imageContext:t,transform:e,playerGridId:n})}function i(t,e){t.bezierCurveTo(e.srcCtrl[0],e.srcCtrl[1],e.destCtrl[0],e.destCtrl[1],e.dest[0],e.dest[1])}function o(t,e,n){for(var r=[],i=e.apply(n[0].pt),o=1;o<n.length;++o){let i=e.apply(n[o].pt),c=e.apply(n[o-1].pt),s=i[0]-c[0];t&&(s=i[1]-c[1]);var a=[c[0]+s/2,c[1]],u=[i[0]-s/2,i[1]];t&&(a=[c[0],c[1]+s/2],u=[i[0],i[1]-s/2]),r.push({srcCtrl:a,destCtrl:u,dest:i})}return{start:i,curves:r}}function a(t,e,n,r){var i=e.apply(r.pt);t.moveTo.apply(t,i),t.arc(i[0],i[1],n,0,2*Math.PI)}Object.defineProperty(n,"__esModule",{value:!0});var u=t("lodash.curry"),c=t("../apply-to-points-in-rows");e.exports=r},{"../apply-to-points-in-rows":2,"lodash.curry":49}],90:[function(t,e,n){"use strict";function r({message:t,onMessageDismiss:e}){function n(){i.classed("hidden",!0),e()}i.classed("hidden",!t),t&&(a.on("click",n),o.html(t))}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3-selection").select("#message-layer"),o=i.select(".message"),a=i.select(".close-message-button");n.renderMessage=r},{"d3-selection":27}],91:[function(t,e,n){"use strict";function r({imageContext:t,transform:e,baseX:n,baseY:c,offset:s,facing:l},f){function h(n){if(n.itemRole){var i=[0,0];"player"===f.type&&"shell"===n.itemRole.itemPositioningStyle&&(i=[0,-32]),n.itemRole.offset&&(i=a.addPairs(i,n.itemRole.offset)),r({imageContext:t,transform:e,baseX:f.x,baseY:f.y,offset:i,facing:y},n)}}t.save();const p=e.applyX(isNaN(n)?f.x:n)-f.sprite.width/2,d=e.applyY(isNaN(c)?f.y:c)-f.sprite.height/2;var v=0,g=0;s&&(v=s[0],g=s[1]);var y=l||f.facing;if(t.translate(p,d),o(y,[-1,0]))t.translate(f.sprite.width,0),t.scale(-1,1);else{const e=Math.atan2(y[1],y[0]);t.translate(f.sprite.width/2,f.sprite.height/2),t.rotate(e),v+=-f.sprite.width/2,g+=-f.sprite.height/2}t.drawImage(i,f.sprite.col*u.spriteSize,f.sprite.row*u.spriteSize,f.sprite.width,f.sprite.height,v,g,f.sprite.width,f.sprite.height),t.restore(),f.items&&f.items.forEach(h)}Object.defineProperty(n,"__esModule",{value:!0});var i=document.getElementById("sprite-sheet"),o=t("lodash.isequal"),a=t("basic-2d-math");const u=t("../sizes");e.exports=r},{"../sizes":95,"basic-2d-math":17,"lodash.isequal":56}],92:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=t("d3-selection"),o=t("accessor"),a=i.select("#controls-layer"),u=i.select("#help-layer"),c=i.select("#close-help-button"),s=i.select("#open-help-button"),l=a.select(".button-list"),f=[];c.on("click.close-help",function(){u.classed("hidden",!0),s.classed("hidden",!1),r()}),s.on("click.open-help",function(){u.classed("hidden",!1),s.classed("hidden",!0),r()}),e.exports=function({gameState:t,onAdvance:e}){f.length=0;var n=l.selectAll(".action-button").data(t.actionChoices,o("identity"));n.exit().remove(),n.enter().append("button").classed("action-button",!0).classed("clickable",!0).merge(n).text(o("identity")).on("click",function(t){f.push({cmdType:t}),r()}),console.log("actionChoices",t.actionChoices),a.classed("hidden",!t.uiOn),r=function(){t.uiOn=!1,e({gameState:t,commands:f})},c.classed("hidden",!1)}},{accessor:16,"d3-selection":27}],93:[function(t,e,n){"use strict";function r(){m.clearRect(0,0,w,_);var t=f.player;f.grids.forEach(o(a)({imageContext:m,transform:b,playerGridId:t.gridContext.id})),f.souls.forEach(o(u)({imageContext:m,transform:b})),f.ephemerals.blasts.forEach(o(c)({imageContext:m,transform:b}))}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3-selection"),o=t("lodash.curry"),a=t("./render-grid"),u=t("./render-soul"),c=t("./render-blast"),s=t("./render-ui");const l=t("./render-message");var f,h=t("./render-animations"),p=t("d3-zoom"),d=i.select("#canvases-container"),v=i.select("#image-board"),g=i.select("#ui-board"),y=i.select("#input-board"),m=v.node().getContext("2d",{alpha:!1}),b=p.zoomIdentity,{boardWidth:w,boardHeight:_}=function(){var t=document.body.getBoundingClientRect().width,e=document.body.getBoundingClientRect().height;return e<400&&(e=t),d.style("width",t),d.style("height",e),v.attr("width",t),v.attr("height",e),g.style("width",t),y.attr("width",t),y.attr("height",e),{boardWidth:t,boardHeight:e}}();!function(t){var e=p.zoom().scaleExtent([.03,2]).on("zoom",function(){b=i.event.transform,t(b)});y.call(e)}(r),e.exports=function({gameState:t,onAdvance:e,onMessageDismiss:n}){f=t,t.animations.length>0?h({gameState:t,onAdvance:e,draw:r}):(r(),y.on("click.input",null),y.on("click.input",function(){var n=b.invertX(i.event.layerX),r=b.invertY(i.event.layerY);e({gameState:t,recentClickX:n,recentClickY:r})}),s({gameState:t,onAdvance:e}),l.renderMessage({message:t.displayMessage,onMessageDismiss:n}))}},{"./render-animations":87,"./render-blast":88,"./render-grid":89,"./render-message":90,"./render-soul":91,"./render-ui":92,"d3-selection":27,"d3-zoom":30,"lodash.curry":49}],94:[function(t,e,n){e.exports={flattenRowsButKeepOrigins:function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],i=0;i<r.length;++i)e.push({rowIndex:n,colWithinRow:i,value:r[i]});return e},reconstituteIntoRows:function(t){var e=[];return t.forEach(function(t){var n=[];Array.isArray(e[t.rowIndex])?n=e[t.rowIndex]:e[t.rowIndex]=n,n[t.colWithinRow]=t.value}),e}}},{}],95:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.spriteSize=128,n.gridWidthSprites=10,n.gridHeightSprites=10},{}],96:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t("../sizes");n.getBoxAroundPosition=function({corner:t,center:e,boxWidth:n,boxHeight:i,inset:o=1}){var a,u;return e?(a=e[0]*r.spriteSize,u=e[1]*r.spriteSize):(a=(t[0]+.5)*r.spriteSize,u=(t[1]+.5)*r.spriteSize),{minX:a-n/2+o,maxX:a+n/2-o,minY:u-i/2+o,maxY:u+i/2-o}},n.getBoxAroundCenter=function({center:t,boxWidth:e,boxHeight:n}){return{minX:t[0]-e/2,maxX:t[0]+e/2,minY:t[1]-n/2,maxY:t[1]+n/2}}},{"../sizes":95}],97:[function(t,e,n){"use strict";function r(t,e){return t[1]>e[1]?-1:1}Object.defineProperty(n,"__esModule",{value:!0});var i=t("basic-2d-math");n.sortVectorsByCloseness=function(t,e){var n=e.map(function(e,n){return[n,i.cosSim(e,t)]});return n.sort(r),n.map(function(t){return e[t[0]]})}},{"basic-2d-math":17}]},{},[1]);